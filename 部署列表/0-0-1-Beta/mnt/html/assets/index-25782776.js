import{r as e,O as t,j as i,P as a,B as s,D as r,T as l,M as o,c as p,m as n}from"./index-f2321b57.js";import c from"./detail-f9f59700.js";import d from"./addOrUpdate-b3ee92f2.js";import{pipeline_pluginPageApi as u,pipeline_pluginDeleteApi as m}from"./api-cbd9b73e.js";import{dicValueApi as j}from"./dicApi-6905b9c5.js";import{P as y}from"./PlusOutlined-0e19b652.js";import"./api-557990cc.js";import"./index-b1386cd3.js";import"./Bo-900708b2.js";import"./index-1e1c35a0.js";import"./textSubmit-4229c5b2.js";import"./textAreaSubmit-14d30dcb.js";import"./SelectSubmit-d0c3571a.js";import"./MutSelectSubmit-d4556965.js";import"./FileSubmit-975998bf.js";import"./DateSubmit-41050df2.js";import"./NumberSubmit-9c6b3724.js";import"./index-e51db6e5.js";import"./index-55f4da4c.js";import"./index-d54aef2b.js";import"./EditOutlined-1e526840.js";import"./formComponent-e31b7955.js";import"./Title-c989167c.js";import"./Input-f009b856.js";import"./TextArea-47627076.js";import"./customerFieldNew-4b477ff0.js";import"./customerText-29c51ee6.js";import"./customerTextArea-c929063a.js";import"./customerSelect-e147971d.js";import"./MinusCircleOutlined-ede52421.js";import"./MinusCircleOutlined-47af1d51.js";import"./customerMutSelect-b7b09c88.js";import"./CustomerFile-0ba717f3.js";import"./CustomerDate-a09fb913.js";import"./customerNumber-e3e13da1.js";import"./DeleteOutlined-10e7bcc5.js";const x=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_plugin_type"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelinePluginTypeList:t,PipelinePluginTypeSearchMap:a}},h=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_plugin_source"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelinePluginSourceList:t,PipelinePluginSourceSearchMap:a}},S=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_script_type"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelineScriptTypeList:t,PipelineScriptTypeSearchMap:a}},f=()=>{const j=e.useRef(),[f,b]=e.useState(t.close),[T,g]=e.useState(),[v,P]=e.useState(t.close);let{PipelinePluginTypeList:C}=x(),{PipelinePluginSourceList:E}=h(),{PipelineScriptTypeList:I}=S();const w=e=>{g(e?.id),P(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const L=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1},{title:"资源类型",dataIndex:"type",valueType:"text",copyable:!1,search:!1,render:(e,{type:t})=>i.jsx(l,{color:"green",children:C.find((e=>e.value==t))?.label})},{title:"来源",dataIndex:"source",valueType:"text",copyable:!1,search:!1,render:(e,{source:t})=>i.jsx(l,{color:"green",children:E.find((e=>e.value==t))?.label})},{title:"备注",dataIndex:"desc",valueType:"text",copyable:!1,search:!1},{title:"当前版本号",dataIndex:"number",valueType:"text",copyable:!1,search:!1},{title:"脚本类型",dataIndex:"scriptType",valueType:"text",copyable:!1,search:!1,render:(e,{scriptType:t})=>i.jsx(l,{color:"green",children:I.find((e=>e.value===t))?.label})},{title:"创建时间",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,a,s,r)=>[i.jsx("a",{onClick:()=>(e=>{g(e.id),b(t.detail)})(a),children:"详情"},"detail"),i.jsx("a",{onClick:()=>w(a),children:"编辑"},"edit"),i.jsx("a",{onClick:()=>(async e=>{o?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await m({id:e.id});p(t)||(n.success(t.msg),j.current?.reload())}})})(a),children:"删除"},"del")]}];return i.jsxs("div",{children:[i.jsx(a,{columns:L,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,i)=>{let a={pageNum:e.current,pageSize:e.pageSize,pageSort:t},s=await u({...e,...a});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"pipeline_plugin-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"插件列表",toolBarRender:()=>[i.jsx(s,{icon:i.jsx(y,{}),onClick:()=>{w()},type:"primary",children:"新建"},"button")]}),i.jsx(r,{title:"配置详情",open:f!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>b(t.close),footer:null,children:i.jsx("div",{children:i.jsx(c,{detailId:T,scriptTypeList:I,typeList:C,sourceList:E})})}),i.jsx(r,{title:v===t.edit?"插件编辑":"插件新增",open:v!==t.close,width:"85%",destroyOnClose:!0,maskClosable:!1,onClose:()=>P(t.close),footer:null,children:i.jsx("div",{children:i.jsx(d,{detailId:T??0,operateEnum:v,setAddOrUpdateModalFn:P,reloadTable:()=>{j.current?.reload()},scriptTypeList:I,typeList:C})})})]})};export{f as default};
