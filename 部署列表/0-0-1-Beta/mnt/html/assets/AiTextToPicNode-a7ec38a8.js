import{r as e,O as t,j as i,h as s,B as o,D as a,F as n,I as l,S as r}from"./index-f2321b57.js";import{u as d,H as p,d as c}from"./index-da2797ee.js";import{u as m}from"./ApiBo-06fcdbd2.js";import{aiPipelinePointGetOneApi as x,aiPipelinePointDeleteApi as j,aiPipelinePointUpdateApi as u}from"./pointApi-9a147261.js";import h from"./inputForm-62ee979a.js";import{getInputAllByPointApi as f}from"./varApi-9218bc07.js";import g from"./outputForm-469fe601.js";import{C}from"./ChatModelDic-878347d9.js";import{D as y}from"./DeleteOutlined-10e7bcc5.js";import"./api-a63184d2.js";function v({id:v,isConnectable:I}){d();const{deleteNode:P}=m(),[b,w]=e.useState(t.close),[D,k]=e.useState([]),[L,S]=e.useState(),{ChatModelList:V}=C({type:"图片生成"}),A=async()=>{const e=await f({aiPipelinePointId:v});k(e.data);const t=await x({aiPipelinePointId:v});S(t.data)};if(e.useEffect((()=>{A()}),[]),!L)return i.jsx("div",{children:"加载中..."});const B=async e=>{await u(e)};return i.jsxs("div",{children:[i.jsx(s,{content:i.jsx(o,{icon:i.jsx(y,{}),type:"link",onClick:async()=>{await j({aiPipelinePointId:v}),P(v)}}),placement:"topRight",trigger:"contextMenu",children:i.jsxs("div",{style:{width:"150px",height:"40px",fontSize:"12px",cursor:"pointer",backgroundColor:"#5ba6ea",borderRadius:"5px"},onClick:async()=>{await A(),w(t.add)},children:[i.jsx("div",{children:i.jsx("span",{children:L?.title??"未命名"})}),i.jsxs("span",{children:["文本模型:",i.jsx("span",{children:L?.model})]})]})}),i.jsx(p,{type:"target",position:c.Left,isConnectable:I}),i.jsx(p,{type:"source",position:c.Right,isConnectable:I}),i.jsx(a,{title:"设置",open:b!==t.close,width:"800px",zIndex:1e3,destroyOnClose:!0,maskClosable:!0,onClose:()=>w(t.close),footer:null,children:i.jsx("div",{style:{},children:L&&i.jsxs("div",{style:{},children:[i.jsx(n.Item,{label:"标题",name:"title",rules:[{required:!0}],children:i.jsx(l,{placeholder:"请输入",defaultValue:L?.title,maxLength:20,showCount:!0,onChange:e=>{L.title=e.target.value,B({aiPipelinePointId:v,title:e.target.value})}})}),i.jsx(n.Item,{label:"模型",name:"model",rules:[{required:!0}],children:i.jsx(r,{options:V,placeholder:"请选择",defaultValue:L?.model,onChange:e=>{L.model=e,B({aiPipelinePointId:v,model:e})}})}),i.jsx("div",{style:{marginBottom:"10px"},children:i.jsx(h,{point:L,getDetail:A,inputVarList:D,notDeleteName:["awvh163ld"]})}),i.jsx(g,{point:L,getDetail:A,inputVarList:D})]})})})]})}export{v as default};
