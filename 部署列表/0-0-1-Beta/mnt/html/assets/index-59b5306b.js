import{d as e}from"./index-a58c8af0.js";import{v as t}from"./index-1fe765b2.js";import"./index-308ab40d.js";function n(t){const n=[];let r=-1,o=0,a=0;for(;++r<t.length;){const l=t.charCodeAt(r);let i="";if(37===l&&e(t.charCodeAt(r+1))&&e(t.charCodeAt(r+2)))a=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(i=String.fromCharCode(l));else if(l>55295&&l<57344){const e=t.charCodeAt(r+1);l<56320&&e>56319&&e<57344?(i=String.fromCharCode(l,e),a=1):i="�"}else i=String.fromCharCode(l);i&&(n.push(t.slice(o,r),encodeURIComponent(i)),o=r+a+1,i=""),a&&(r+=a,a=0)}return n.join("")+t.slice(o)}function r(e,t){const r=String(t.identifier).toUpperCase(),o=n(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let l;-1===a?(e.footnoteOrder.push(r),e.footnoteCounts[r]=1,l=e.footnoteOrder.length):(e.footnoteCounts[r]++,l=a+1);const i=e.footnoteCounts[r],p={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+o,id:e.clobberPrefix+"fnref-"+o+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,p);const c={type:"element",tagName:"sup",properties:{},children:[p]};return e.patch(t,c),e.applyData(t,c)}function o(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return{type:"text",value:"!["+t.alt+r};const o=e.all(t),a=o[0];a&&"text"===a.type?a.value="["+a.value:o.unshift({type:"text",value:"["});const l=o[o.length-1];return l&&"text"===l.type?l.value+=r:o.push({type:"text",value:r}),o}function a(e){const t=e.spread;return null==t?e.children.length>1:t}const l=p("start"),i=p("end");function p(e){return function(t){const n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const c=9,s=32;function u(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const a=[];for(;r;)a.push(h(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return a.push(h(t.slice(o),o>0,!1)),a.join("")}function h(e,t,n){let r=0,o=e.length;if(t){let t=e.codePointAt(r);for(;t===c||t===s;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(o-1);for(;t===c||t===s;)o--,t=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}const d={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,o={};r&&(o.className=["language-"+r]);let a={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:r,footnote:function(e,t){const n=e.footnoteById;let o=1;for(;o in n;)o++;const a=String(o);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},r(e,{type:"footnoteReference",identifier:a,position:t.position})},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null},imageReference:function(e,t){const r=e.definition(t.identifier);if(!r)return o(e,t);const a={src:n(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(a.title=r.title);const l={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,l),e.applyData(t,l)},image:function(e,t){const r={src:n(t.url)};null!==t.alt&&void 0!==t.alt&&(r.alt=t.alt),null!==t.title&&void 0!==t.title&&(r.title=t.title);const o={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,o),e.applyData(t,o)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const r=e.definition(t.identifier);if(!r)return o(e,t);const a={href:n(r.url||"")};null!==r.title&&void 0!==r.title&&(a.title=r.title);const l={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,l),e.applyData(t,l)},link:function(e,t){const r={href:n(t.url)};null!==t.title&&void 0!==t.title&&(r.title=t.title);const o={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},listItem:function(e,t,n){const r=e.all(t),o=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=a(n[r])}return t}(n):a(t),l={},i=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let p=-1;for(;++p<r.length;){const e=r[p];(o||0!==p||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||o?i.push(e):i.push(...e.children)}const c=r[r.length-1];c&&(o||"element"!==c.type||"p"!==c.tagName)&&i.push({type:"text",value:"\n"});const s={type:"element",tagName:"li",properties:l,children:i};return e.patch(t,s),e.applyData(t,s)},list:function(e,t){const n={},r=e.all(t);let o=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++o<r.length;){const e=r[o];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),o.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=l(t.children[1]),p=i(t.children[t.children.length-1]);a.line&&p.line&&(r.position={start:a,end:p}),o.push(r)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,o=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,l=a?a.length:t.children.length;let i=-1;const p=[];for(;++i<l;){const n=t.children[i],r={},l=a?a[i]:void 0;l&&(r.align=l);let c={type:"element",tagName:o,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(t,c)),p.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:u(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:f,yaml:f,definition:f,footnoteDefinition:f};function f(){return null}const m={}.hasOwnProperty;function y(e){return String(e||"").toUpperCase()}const g={}.hasOwnProperty;function N(e,n){const r=n||{},o=r.allowDangerousHtml||!1,a={};return c.dangerous=o,c.clobberPrefix=void 0===r.clobberPrefix||null===r.clobberPrefix?"user-content-":r.clobberPrefix,c.footnoteLabel=r.footnoteLabel||"Footnotes",c.footnoteLabelTagName=r.footnoteLabelTagName||"h2",c.footnoteLabelProperties=r.footnoteLabelProperties||{className:["sr-only"]},c.footnoteBackLabel=r.footnoteBackLabel||"Back to content",c.unknownHandler=r.unknownHandler,c.passThrough=r.passThrough,c.handlers={...d,...r.handlers},c.definition=function(e){const n=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return t(e,"definition",(e=>{const t=y(e.identifier);t&&!m.call(n,t)&&(n[t]=e)})),function(e){const t=y(e);return t&&m.call(n,t)?n[t]:null}}(e),c.footnoteById=a,c.footnoteOrder=[],c.footnoteCounts={},c.patch=b,c.applyData=v,c.one=function(e,t){return x(c,e,t)},c.all=function(e){return D(c,e)},c.wrap=C,c.augment=p,t(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();g.call(a,t)||(a[t]=e)})),c;function p(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties={...t.properties,...n.hProperties}),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const r="type"in e?e:{position:e};(n=r)&&n.position&&n.position.start&&n.position.start.line&&n.position.start.column&&n.position.end&&n.position.end.line&&n.position.end.column&&(t.position={start:l(r),end:i(r)})}var n;return t}function c(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),p(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}function b(e,t){var n;e.position&&(t.position={start:l(n=e),end:i(n)})}function v(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,o=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:[]}),"element"===n.type&&o&&(n.properties={...n.properties,...o}),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function x(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return g.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:D(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):function(e,t){const n=t.data||{},r=!("value"in t)||g.call(n,"hProperties")||g.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:D(e,t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}(e,t)}function D(e,t){const n=[];if("children"in t){const r=t.children;let o=-1;for(;++o<r.length;){const a=x(e,r[o],t);if(a){if(o&&"break"===r[o-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=a.value.replace(/^\s+/,"")),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(a)?n.push(...a):n.push(a)}}}return n}function C(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function k(e,t){const r=N(e,t),o=r.one(e,null),a=function(e){const t=[];let r=-1;for(;++r<e.footnoteOrder.length;){const o=e.footnoteById[e.footnoteOrder[r]];if(!o)continue;const a=e.all(o),l=String(o.identifier).toUpperCase(),i=n(l.toLowerCase());let p=0;const c=[];for(;++p<=e.footnoteCounts[l];){const t={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+i+(p>1?"-"+p:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"↩"}]};p>1&&t.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(p)}]}),c.length>0&&c.push({type:"text",value:" "}),c.push(t)}const s=a[a.length-1];if(s&&"element"===s.type&&"p"===s.tagName){const e=s.children[s.children.length-1];e&&"text"===e.type?e.value+=" ":s.children.push({type:"text",value:" "}),s.children.push(...c)}else a.push(...c);const u={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+i},children:e.wrap(a,!0)};e.patch(o,u),t.push(u)}if(0!==t.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:"\n"}]}}(r);return a&&o.children.push({type:"text",value:"\n"},a),Array.isArray(o)?{type:"root",children:o}:o}const w=function(e,t){return e&&"run"in e?function(e,t){return(n,r,o)=>{e.run(k(n,t),r,(e=>{o(e)}))}}(e,t):function(e){return t=>k(t,e)}(e||t)};export{D as all,w as default,d as defaultHandlers,x as one};
