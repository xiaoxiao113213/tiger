import{r as e,O as t,j as i,P as a,B as s,D as r,T as l,M as o,c as p,m as n}from"./index-1fe6dff8.js";import c from"./detail-d12c028f.js";import d from"./addOrUpdate-7ef8b892.js";import{pipeline_pluginPageApi as u,pipeline_pluginDeleteApi as m}from"./api-5149c00d.js";import{dicValueApi as j}from"./dicApi-b68549fb.js";import{P as y}from"./PlusOutlined-73232e7a.js";import"./api-f6cf4490.js";import"./index-05ffbfcb.js";import"./Bo-9e2098a1.js";import"./index-b78e92bd.js";import"./textSubmit-0f3171ae.js";import"./textAreaSubmit-d1dfc909.js";import"./SelectSubmit-9d579393.js";import"./MutSelectSubmit-5dc3359d.js";import"./FileSubmit-0542b294.js";import"./DateSubmit-c557ba41.js";import"./NumberSubmit-de5567a9.js";import"./index-80d88ab0.js";import"./index-262ec5ed.js";import"./index-adfb8488.js";import"./EditOutlined-fbc989f8.js";import"./formComponent-27c8784f.js";import"./Title-952b03be.js";import"./Input-f98aea5e.js";import"./TextArea-08e23fd4.js";import"./customerFieldNew-8ebcd271.js";import"./customerText-9afb4922.js";import"./customerTextArea-67b7b62e.js";import"./customerSelect-14199e01.js";import"./MinusCircleOutlined-7f40363e.js";import"./MinusCircleOutlined-47af1d51.js";import"./customerMutSelect-773b4206.js";import"./CustomerFile-4ea8258f.js";import"./CustomerDate-7ed6f47b.js";import"./customerNumber-a25d7bcc.js";import"./DeleteOutlined-916130f1.js";const x=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_plugin_type"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelinePluginTypeList:t,PipelinePluginTypeSearchMap:a}},h=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_plugin_source"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelinePluginSourceList:t,PipelinePluginSourceSearchMap:a}},S=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_script_type"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelineScriptTypeList:t,PipelineScriptTypeSearchMap:a}},f=()=>{const j=e.useRef(),[f,b]=e.useState(t.close),[T,g]=e.useState(),[v,P]=e.useState(t.close);let{PipelinePluginTypeList:C}=x(),{PipelinePluginSourceList:E}=h(),{PipelineScriptTypeList:I}=S();const w=e=>{g(e?.id),P(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const L=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1},{title:"资源类型",dataIndex:"type",valueType:"text",copyable:!1,search:!1,render:(e,{type:t})=>i.jsx(l,{color:"green",children:C.find((e=>e.value==t))?.label})},{title:"来源",dataIndex:"source",valueType:"text",copyable:!1,search:!1,render:(e,{source:t})=>i.jsx(l,{color:"green",children:E.find((e=>e.value==t))?.label})},{title:"备注",dataIndex:"desc",valueType:"text",copyable:!1,search:!1},{title:"当前版本号",dataIndex:"number",valueType:"text",copyable:!1,search:!1},{title:"脚本类型",dataIndex:"scriptType",valueType:"text",copyable:!1,search:!1,render:(e,{scriptType:t})=>i.jsx(l,{color:"green",children:I.find((e=>e.value===t))?.label})},{title:"创建时间",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,a,s,r)=>[i.jsx("a",{onClick:()=>(e=>{g(e.id),b(t.detail)})(a),children:"详情"},"detail"),i.jsx("a",{onClick:()=>w(a),children:"编辑"},"edit"),i.jsx("a",{onClick:()=>(async e=>{o?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await m({id:e.id});p(t)||(n.success(t.msg),j.current?.reload())}})})(a),children:"删除"},"del")]}];return i.jsxs("div",{children:[i.jsx(a,{columns:L,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,i)=>{let a={pageNum:e.current,pageSize:e.pageSize,pageSort:t},s=await u({...e,...a});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"pipeline_plugin-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"插件列表",toolBarRender:()=>[i.jsx(s,{icon:i.jsx(y,{}),onClick:()=>{w()},type:"primary",children:"新建"},"button")]}),i.jsx(r,{title:"配置详情",open:f!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>b(t.close),footer:null,children:i.jsx("div",{children:i.jsx(c,{detailId:T,scriptTypeList:I,typeList:C,sourceList:E})})}),i.jsx(r,{title:v===t.edit?"插件编辑":"插件新增",open:v!==t.close,width:"85%",destroyOnClose:!0,maskClosable:!1,onClose:()=>P(t.close),footer:null,children:i.jsx("div",{children:i.jsx(d,{detailId:T??0,operateEnum:v,setAddOrUpdateModalFn:P,reloadTable:()=>{j.current?.reload()},scriptTypeList:I,typeList:C})})})]})};export{f as default};
