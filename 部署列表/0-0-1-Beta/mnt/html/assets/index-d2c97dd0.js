import{r as e,O as t,j as o,P as s,B as i,a3 as r,D as d,T as l,M as a,c as p,m as n}from"./index-1fe6dff8.js";import m from"./detail-aa081d24.js";import c from"./addOrUpdate-ab388870.js";import{processPageApi as j,processDeleteApi as u}from"./processApi-33853f9b.js";import x from"./ProcessEdit-c3fc4f02.js";import{P as h}from"./PlusOutlined-73232e7a.js";import"./index-262ec5ed.js";import"./index-80d88ab0.js";import"./index-adfb8488.js";import"./EditOutlined-fbc989f8.js";import"./index-953dfacc.js";import"./Title-952b03be.js";import"./Input-f98aea5e.js";import"./TextArea-08e23fd4.js";import"./Password-ff2218fe.js";import"./QRCodeSVG-710d84ab.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-3c93b810.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./index-9cc62199.js";/* empty css              */import"./CustomEdge-a6421acc.js";import"./CustomDelEdge-3c3bda2b.js";import"./CustomOptionsEdge-c6e4f385.js";import"./uilts-d0a0e0a8.js";import"./pointApi-7316630f.js";import"./ConditionNode-183c6f4e.js";/* empty css                          */import"./ConditionNodeEdit-58e6843e.js";import"./Bo-9e2098a1.js";import"./EditTwoTone-639ee192.js";import"./RightCircleTwoTone-4b7c5206.js";import"./StartNode-dd12347a.js";import"./StartNodeEdit-50252733.js";import"./api-0a5cfd87.js";import"./formComponent-27c8784f.js";import"./index-b78e92bd.js";import"./textSubmit-0f3171ae.js";import"./textAreaSubmit-d1dfc909.js";import"./SelectSubmit-9d579393.js";import"./MutSelectSubmit-5dc3359d.js";import"./FileSubmit-0542b294.js";import"./DateSubmit-c557ba41.js";import"./NumberSubmit-de5567a9.js";import"./customerFieldNew-8ebcd271.js";import"./customerText-9afb4922.js";import"./customerTextArea-67b7b62e.js";import"./customerSelect-14199e01.js";import"./MinusCircleOutlined-7f40363e.js";import"./customerMutSelect-773b4206.js";import"./CustomerFile-4ea8258f.js";import"./CustomerDate-7ed6f47b.js";import"./customerNumber-a25d7bcc.js";import"./DeleteOutlined-916130f1.js";import"./EndNode-46626278.js";import"./EndNodeEdit-aaaffc90.js";import"./api-b0087b33.js";import"./OtherConditionNode-1c84b750.js";import"./ApprovalNode-8e5049b0.js";import"./ApprovalNodeEdit-27c4e920.js";import"./CcNode-caa852ab.js";import"./CcNodeEdit-9ef44a24.js";import"./HandleNode-7f984e6a.js";import"./HandleNodeEdit-3c74ddb7.js";const C=()=>{const C=e.useRef(),[S,y]=e.useState(t.close),[T,b]=e.useState(),[f,g]=e.useState(),[O,I]=e.useState(t.close),[w,N]=e.useState(t.close),v=e=>{b(e?.processId),I(e?t.edit:t.add)},E=()=>{C.current?.reload()};e.useEffect((()=>{}),[]);const k=[{title:"流程ID",dataIndex:"processId",valueType:"text",copyable:!1,search:!1},{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"状态",dataIndex:"disabled",valueType:"text",copyable:!1,search:!1,render:(e,{disabled:t})=>0===t?o.jsx(l,{color:"green",children:"启用"}):o.jsx(l,{color:"red",children:"禁用"})},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"更新人",dataIndex:"updateBy",valueType:"text",copyable:!1,search:!1,render:(e,{updateByAccount:t})=>t.account},{title:"操作",valueType:"option",key:"option",width:180,render:(e,s,i,d)=>[o.jsx("a",{onClick:()=>(e=>{b(e.processId),y(t.detail)})(s),children:"详情"},"detail"),o.jsx("a",{onClick:()=>v(s),hidden:r("approvalSet:edit"),children:"编辑"},"edit"),o.jsx("a",{onClick:()=>(e=>{b(e?.processId),g(e),N(t.edit)})(s),hidden:r("approvalSet:edit"),children:"配置流程"},"config"),o.jsx("a",{onClick:()=>(async e=>{a?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await u({processId:e.processId});p(t)||(n.success(t.msg),C.current?.reload())}})})(s),hidden:r("approvalSet:del"),children:"删除"},"del")]}];return o.jsxs("div",{children:[o.jsx(s,{columns:k,actionRef:C,cardBordered:!0,params:{},request:async(e={},t,o)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},i=await j({...e,...s});return{data:i.data.list,success:1e3===i.code,total:i.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"process-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[o.jsx(i,{icon:o.jsx(h,{}),onClick:()=>{v()},type:"primary",hidden:r("approvalSet:edit"),children:"新建"},"button")]}),o.jsx(d,{title:"配置详情",open:S!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>y(t.close),footer:null,children:o.jsx("div",{children:o.jsx(m,{detailId:T})})}),o.jsx(d,{title:O==t.edit?"配置编辑":"配置新增",open:O!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>I(t.close),footer:null,children:o.jsx("div",{children:o.jsx(c,{detailId:T??0,operateEnum:O,setAddOrUpdateModalFn:I,reloadTable:E})})}),o.jsx(d,{title:"配置流程",open:w!==t.close,width:"98%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{N(t.close),E()},footer:null,children:o.jsx("div",{children:o.jsx(x,{processId:T,processVersionId:f?.processVersionId,close:()=>{N(t.close),E()}})})})]})};export{C as default};
