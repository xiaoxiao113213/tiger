import{r as e,O as t,j as s,P as a,D as o,T as r,M as l,c as n,m as i}from"./index-1fe6dff8.js";import{processMySubmitApi as c,processInstanceDeleteApi as d}from"./processInstanceApi-4791703b.js";import p from"./addOrUpdate-4d231d3f.js";import{G as u}from"./ProcessInstanceStatusDic-db480930.js";import m from"./detail-b7f42df9.js";import"./dicApi-b68549fb.js";import"./uilts-d0a0e0a8.js";import"./index-ad901ab1.js";import"./Bo-9e2098a1.js";import"./index-adfb8488.js";import"./pointList-55c9251a.js";import"./Timeline-f29f8850.js";import"./index-debe4a2e.js";import"./index-262ec5ed.js";import"./index-80d88ab0.js";import"./EditOutlined-fbc989f8.js";const x=x=>{const j=e.useRef(),[y,h]=e.useState(t.close),[I,f]=e.useState(),[b,T]=e.useState(t.close),{processInstanceStatusMap:g,processInstanceStatusList:S}=u(),C=e=>{f(e.processInstanceId),h(t.detail)};e.useEffect((()=>{"4"===x.tabId&&((async()=>{})(),j.current?.reload())}),[x.tabId]);const v=[{title:"ID",dataIndex:"processInstanceId",valueType:"text",copyable:!1,search:!1},{title:"标题",dataIndex:"title",valueType:"text",copyable:!1,search:!1,render:(e,t)=>s.jsx("a",{onClick:()=>C(t),children:t.title})},{title:"status",dataIndex:"status",valueType:"text",copyable:!1,search:!1,render:(e,{status:t})=>{let a=S.find((e=>e.value===t));return s.jsxs(r,{color:a?.color,children:[" ",a?.label,"  "]})}},{title:"申请时间",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"申请人",dataIndex:"createBy",valueType:"text",copyable:!1,search:!1,render:(e,t)=>t.createByAccount.account},{title:"结束时间",dataIndex:"endTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,t,a,o)=>[s.jsx("a",{onClick:()=>C(t),children:"详情"},"detail"),s.jsx("a",{onClick:()=>(async e=>{l?.confirm({title:"是否确认撤回",icon:null,onOk:async()=>{let t=await d({processInstanceId:e.processInstanceId});n(t)||(i.success(t.msg),j.current?.reload())}})})(t),hidden:1!=t.status,children:"撤回"},"del")]}];return s.jsxs("div",{children:[s.jsx(a,{columns:v,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,s)=>{let a={pageNum:e.current,pageSize:e.pageSize,pageSort:t},o=await c({...e,...a});return{data:o.data.list,success:1e3===o.code,total:o.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"processInstance-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processInstanceId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[]}),s.jsx(o,{title:"详情",open:y!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>h(t.close),footer:null,children:s.jsx("div",{children:s.jsx(m,{detailId:I})})}),s.jsx(o,{title:b==t.edit?"配置编辑":"配置新增",open:b!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>T(t.close),footer:null,children:s.jsx("div",{children:s.jsx(p,{detailId:I??0,operateEnum:b,setAddOrUpdateModalFn:T,reloadTable:()=>{j.current?.reload()}})})})]})};export{x as default};
