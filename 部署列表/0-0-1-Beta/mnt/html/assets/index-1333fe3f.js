import{r as e,O as t,j as a,P as s,B as o,D as i,M as l,c as r,m as d}from"./index-03adb9ee.js";import n from"./detail-141d774b.js";import c from"./addOrUpdate-2187e681.js";import{otherAccountPageApi as p,otherAccountDeleteApi as u}from"./api-e992af87.js";import{G as m}from"./OtherAccountTypeDic-64e05a2b.js";import{P as h}from"./PlusOutlined-b4032aa8.js";import"./index-88ad5331.js";import"./index-3585a1a3.js";import"./index-a2b78009.js";import"./EditOutlined-d7a61630.js";import"./dicApi-3ecc5ba9.js";const j=()=>{const j=e.useRef(),[y,x]=e.useState(t.close),[f,g]=e.useState(),[C,O]=e.useState(t.close),{OtherAccountTypeMap:T,OtherAccountTypeValueEnum:b}=m(),S=e=>{g(e?.id),O(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const k=[{title:"类型",dataIndex:"type",valueType:"text",copyable:!1,search:!1,valueEnum:b},{title:"账号名称",dataIndex:"accountName",valueType:"text",copyable:!1,search:!1},{title:"备注",dataIndex:"remarks",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,s,o,i)=>[a.jsx("a",{onClick:()=>(e=>{g(e.id),x(t.detail)})(s),children:"详情"},"detail"),a.jsx("a",{onClick:()=>S(s),children:"编辑"},"edit"),a.jsx("a",{onClick:()=>(async e=>{l?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await u({id:e.id});r(t)||(d.success(t.msg),j.current?.reload())}})})(s),children:"删除"},"del")]}];return a.jsxs("div",{children:[a.jsx(s,{columns:k,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,a)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},o=await p({...e,...s});return{data:o.data.list,success:1e3===o.code,total:o.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"otherAccount-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[a.jsx(o,{icon:a.jsx(h,{}),onClick:()=>{S()},type:"primary",children:"新建"},"button")]}),a.jsx(i,{title:"配置详情",open:y!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>x(t.close),footer:null,children:a.jsx("div",{children:a.jsx(n,{detailId:f})})}),a.jsx(i,{title:C==t.edit?"配置编辑":"配置新增",open:C!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>O(t.close),footer:null,children:a.jsx("div",{children:a.jsx(c,{detailId:f??0,operateEnum:C,setAddOrUpdateModalFn:O,reloadTable:()=>{j.current?.reload()}})})})]})};export{j as default};
