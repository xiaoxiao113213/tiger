import{j as e,r as t,O as s}from"./index-f2321b57.js";import{R as o,u as i,l as n,m as a,i as d,n as r,C as p,M as m,B as l}from"./index-da2797ee.js";/* empty css              */import{M as j}from"./uilts-e16e3ac3.js";import c from"./StartNode-f0bf4205.js";import{buildData as f}from"./dataUtil-d817c03a.js";import g from"./StageNode-16907dfe.js";import u from"./StepNode-07191e47.js";import x from"./CustomEdge-528ca68e.js";import{usePipelineContext as h}from"./context-c3c65fe4.js";/* empty css             */const y={startNode:c,stageNode:g,stepNode:u},N={"custom-edge":x},S=o=>{let c=i();const[g,u,x]=n([]),[S,T,v]=a([]),{pipelineOpenType:C}=h(),w=async()=>{let e=f(o?.detail?.pipelineStageList??[]);u([...e.nodes]),T([...e.edges]),setTimeout((()=>{c.fitView()}),100)};return t.useEffect((()=>{w()}),[o.detail]),e.jsx(j.Provider,{value:{initData:w},children:e.jsxs(d,{nodes:g,edges:S,onNodesChange:x,onEdgesChange:v,connectionLineType:r.SmoothStep,defaultEdgeOptions:{animated:!0,type:"custom-edge"},nodeTypes:y,edgeTypes:N,fitView:!0,minZoom:.01,zoomOnScroll:C!==s.detail,children:[e.jsx(p,{}),e.jsx(m,{pannable:!0}),e.jsx(l,{variant:"dots",gap:12,size:1})]})})};function T(t){return e.jsx("div",{style:{width:"100%",height:"50vh"},children:e.jsx(o,{children:e.jsx(S,{detail:t.detail,nodeClickFn:t.nodeClickFn,openType:t.openType})})})}export{T as default};
