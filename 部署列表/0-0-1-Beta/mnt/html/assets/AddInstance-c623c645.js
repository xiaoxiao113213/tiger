import{F as s,ad as e,r as t,j as i,ab as r,B as o,c as a,m as l}from"./index-f2321b57.js";import{getCanSubmitProcessApi as c}from"./processApi-f72db82e.js";import{serverToClientValue as d,clientToServerValue as m}from"./Bo-900708b2.js";import n from"./submitNowform-f35e2701.js";import{processInstanceSaveApi as p}from"./processInstanceApi-9883ba95.js";import{D as j}from"./index-d54aef2b.js";import"./textSubmit-4229c5b2.js";import"./textAreaSubmit-14d30dcb.js";import"./SelectSubmit-d0c3571a.js";import"./MutSelectSubmit-d4556965.js";import"./DateSubmit-41050df2.js";import"./NumberSubmit-9c6b3724.js";import"./FileUploadSubmit-a4029aca.js";import"./PlusOutlined-0e19b652.js";const f=f=>{const[u]=s.useForm(),x=e(),[h,b]=t.useState({fieldList:[]});t.useEffect((()=>{(async()=>{c({processId:f.processId}).then((s=>{s.data.fieldList.forEach((s=>{d(s)})),b(s.data)}))})()}),[]);const y=[{key:"1",label:"申请人",children:x.nickName}];return i.jsxs("div",{children:[i.jsx(j,{title:"申请流程",items:y}),i.jsx(r,{children:"表单"}),i.jsx(s,{form:u,labelCol:{span:3},children:h.fieldList.map(((s,e)=>i.jsx("div",{style:{display:"flex"},children:i.jsx("span",{style:{flex:20},children:i.jsx(n,{initFieldBo:s})})},e)))}),i.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[i.jsx(o,{type:"primary",onClick:async()=>{if(!(await u.validateFields().catch((()=>!1))))return;const s=await u.getFieldsValue();h.fieldList.forEach((e=>{m(e,s)}));const e=await p({processId:f.processId,processVersionId:h.processVersionId,values:s});a(e)||(l.success("提交成功"),f.closeModal())},children:"提交"}),i.jsx(o,{style:{marginLeft:"20px"},onClick:f.closeModal,children:"取消"})]})]})};export{f as default};
