import{F as a,r as e,i as s,j as t,X as l,S as r,B as o,I as i,Z as n,Y as d,m as p}from"./index-10719960.js";import{databaseConfigAllApi as c}from"./api-0fd5046e.js";import{getDatabaseNameList as m,compareDatabaseBoard as x}from"./api-5ab7ff0b.js";import{A as u}from"./index-8b940b5d.js";const{Paragraph:f,Text:h}=n,j=n=>{const[h]=a.useForm(),[j,b]=e.useState([]),[g,w]=e.useState([]),[y,I]=s.useState(!1),[C,S]=e.useState();return e.useEffect((()=>((async()=>{let a=(await c({})).data.map((a=>({label:a.name,value:a.databaseConfigId})));b(a)})(),()=>{})),[]),t.jsxs("div",{children:[t.jsx(l,{spinning:y,fullscreen:!0}),t.jsx(u,{message:"要自我查看下sql语句，因为有很多情况是不支持的",type:"warning",showIcon:!0,style:{marginBottom:20}}),t.jsxs(a,{form:h,labelCol:{flex:"10%"},wrapperCol:{flex:"90%"},children:[t.jsx(a.Item,{label:"数据库",name:"databaseConfigId",rules:[{required:!0}],children:t.jsx(r,{placeholder:"请选择",options:j,onChange:async a=>{let e=(await m({databaseConfigId:a})).data.map((a=>({label:a,value:a})));w(e)},showSearch:!0,optionFilterProp:"label"})}),t.jsx(a.Item,{label:"库名称",name:"databaseName",rules:[{required:!0}],children:t.jsx(r,{placeholder:"请选择",options:g,showSearch:!0,optionFilterProp:"label"})}),t.jsx(a.Item,{wrapperCol:{offset:8,span:16},style:{textAlign:"left"},children:t.jsx(o,{type:"primary",onClick:async()=>{if(!(await h.validateFields().catch((()=>!1))))return;const a=await(h?.getFieldsValue());d(a),I(!0),x({...a,databaseBoardId:n.databaseBoardId}).then((a=>{1e3===a.code&&(p.success(a.msg),S(a.data))})).finally((()=>{I(!1)}))},children:"开始对比"})})]}),t.jsx(f,{copyable:{text:C||""}}),t.jsx(i.TextArea,{autoSize:{minRows:2},value:C})]})};export{j as default};
