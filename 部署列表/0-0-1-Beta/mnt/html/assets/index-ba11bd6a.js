import{r as e,O as t,j as a,P as s,B as d,a3 as i,D as l,T as o,M as r,c as n,m as c}from"./index-f2321b57.js";import p from"./detail-89b1fb43.js";import u from"./addOrUpdate-29ba2d2b.js";import{rolePageApi as m,roleUpdateDisabledApi as h}from"./api-5c5bfeed.js";import{P as x}from"./PlusOutlined-0e19b652.js";import"./api-6523b4c3.js";import"./menuComponent-b9e327b2.js";import"./index-55f4da4c.js";import"./index-e51db6e5.js";import"./index-d54aef2b.js";import"./EditOutlined-1e526840.js";const j=()=>{const j=e.useRef(),[y,f]=e.useState(t.close),[b,g]=e.useState(),[T,C]=e.useState(t.close),k=e=>{g(e?.id),C(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const S=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1},{title:"编码",dataIndex:"code",valueType:"text",copyable:!0},{title:"排序",dataIndex:"sort",valueType:"text",search:!1},{disable:!0,title:"状态",dataIndex:"disabled",search:!1,render:(e,{disabled:t})=>0===t?a.jsx(o,{color:"green",children:"启用"}):a.jsx(o,{color:"red",children:"禁用"})},{title:"备注",dataIndex:"remarks",valueType:"text",ellipsis:!0,width:80,search:!1},{title:"创建人",dataIndex:"createBy",ellipsis:!0,search:!1,render:(e,t)=>t.createByAccount.account},{title:"创建时间",key:"showTime",dataIndex:"createTime",valueType:"dateTime",sorter:!0,search:!1},{title:"操作",valueType:"option",key:"option",width:130,render:(e,s,d,l)=>[a.jsx("a",{onClick:()=>(e=>{g(e.id),f(t.detail)})(s),children:"详情"},"detail"),a.jsx("a",{onClick:()=>k(s),hidden:i("dept:edit"),children:"编辑"},"log"),a.jsx("a",{onClick:()=>(async e=>{let t=1==e.disabled?0:1;r?.confirm({title:"是否确认操作",icon:null,onOk:async()=>{let a=await h({id:e.id,disabled:t});n(a)||(c.success(a.msg),j.current?.reload())}})})(s),hidden:i("dept:edit"),children:0==s.disabled?"禁用":"启用"},"rebuild")]}];return a.jsxs("div",{children:[a.jsx(s,{columns:S,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,a)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},d=await m({...e,...s});return{data:d.data.list,success:1e3===d.code,total:d.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"角色列表",toolBarRender:()=>[a.jsx(d,{icon:a.jsx(x,{}),onClick:()=>{k()},type:"primary",hidden:i("dept:edit"),children:"新建"},"button")]}),a.jsx(l,{title:"角色详情",open:y!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>f(t.close),footer:null,children:a.jsx("div",{children:a.jsx(p,{detailId:b})})}),a.jsx(l,{title:T==t.edit?"角色编辑":"角色新增",open:T!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>C(t.close),footer:null,children:a.jsx("div",{children:a.jsx(u,{detailId:b??0,operateEnum:T,setAddOrUpdateModalFn:C,reloadTable:()=>{j.current?.reload()}})})})]})};export{j as default};
