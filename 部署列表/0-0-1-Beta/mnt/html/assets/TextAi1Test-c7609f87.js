import{r as e,A as a,_ as t,j as n,i as s,F as i,X as r,I as l,B as o}from"./index-10719960.js";import{checkApi as m}from"./api-8df9ebdb.js";import{getTextStartVarJsonSign as c,aiTextTest as d}from"./varApi-6204ca1d.js";import{d as p}from"./Title-5ea514a5.js";import{a as u,N as x,C as f}from"./ApiBo-d6e5478a.js";import{M as h}from"./index-5517f7e9.js";import{F as j}from"./FileUploadCom-c3fb6dc0.js";import{a as g}from"./utils-452b7114.js";import{D as y,R as v}from"./RightSquareTwoTone-e5897024.js";import{T as C}from"./Timeline-b9d0ea08.js";import"./Input-f4f01092.js";import"./TextArea-8948f20d.js";import"./PlusOutlined-cc4f568a.js";var w=function(n,s){return e.createElement(a,t({},n,{ref:s,icon:y}))};
/**![down-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiBmaWxsPSIjMTY3N2ZmIiAvPjxwYXRoIGQ9Ik0xODQgODQwaDY1NlYxODRIMTg0djY1NnptMTUwLTQ0MGg0Ni45YzEwLjMgMCAxOS45IDQuOSAyNS45IDEzLjJMNTEyIDU1OC42bDEwNS4yLTE0NS40YzYtOC4zIDE1LjctMTMuMiAyNS45LTEzLjJINjkwYzYuNSAwIDEwLjMgNy40IDYuNCAxMi43bC0xNzggMjQ2YTcuOTUgNy45NSAwIDAxLTEyLjkgMGwtMTc4LTI0NmMtMy44LTUuMyAwLTEyLjcgNi41LTEyLjd6IiBmaWxsPSIjZTZmNGZmIiAvPjxwYXRoIGQ9Ik01MDUuNSA2NTguN2MzLjIgNC40IDkuNyA0LjQgMTIuOSAwbDE3OC0yNDZjMy45LTUuMy4xLTEyLjctNi40LTEyLjdoLTQ2LjljLTEwLjIgMC0xOS45IDQuOS0yNS45IDEzLjJMNTEyIDU1OC42IDQwNi44IDQxMy4yYy02LTguMy0xNS42LTEzLjItMjUuOS0xMy4ySDMzNGMtNi41IDAtMTAuMyA3LjQtNi41IDEyLjdsMTc4IDI0NnoiIGZpbGw9IiMxNjc3ZmYiIC8+PC9zdmc+) */const b=e.forwardRef(w);var q=function(n,s){return e.createElement(a,t({},n,{ref:s,icon:v}))};
/**![right-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiBmaWxsPSIjMTY3N2ZmIiAvPjxwYXRoIGQ9Ik0xODQgODQwaDY1NlYxODRIMTg0djY1NnptMjE2LTE5Ni45YzAtMTAuMiA0LjktMTkuOSAxMy4yLTI1LjlMNTU4LjYgNTEyIDQxMy4yIDQwNi44Yy04LjMtNi0xMy4yLTE1LjYtMTMuMi0yNS45VjMzNGMwLTYuNSA3LjQtMTAuMyAxMi43LTYuNWwyNDYgMTc4YzQuNCAzLjIgNC40IDkuNyAwIDEyLjlsLTI0NiAxNzhjLTUuMyAzLjktMTIuNy4xLTEyLjctNi40di00Ni45eiIgZmlsbD0iI2U2ZjRmZiIgLz48cGF0aCBkPSJNNDEyLjcgNjk2LjRsMjQ2LTE3OGM0LjQtMy4yIDQuNC05LjcgMC0xMi45bC0yNDYtMTc4Yy01LjMtMy44LTEyLjcgMC0xMi43IDYuNXY0Ni45YzAgMTAuMyA0LjkgMTkuOSAxMy4yIDI1LjlMNTU4LjYgNTEyIDQxMy4yIDYxNy4yYy04LjMgNi0xMy4yIDE1LjctMTMuMiAyNS45VjY5MGMwIDYuNSA3LjQgMTAuMyAxMi43IDYuNHoiIGZpbGw9IiMxNjc3ZmYiIC8+PC9zdmc+) */const I=e.forwardRef(q),T=new h({html:!0,linkify:!0,typographer:!0}),k=({content:e,backgroundColor:a})=>{const t=T.render(e);return n.jsx("div",{dangerouslySetInnerHTML:{__html:t},style:{fontFamily:"Arial, sans-serif",lineHeight:1.6,backgroundColor:a}})},F=a=>{const{aiPipelineId:t}=a,[h,y]=e.useState(),[v,w]=e.useState([]),[q,T]=s.useState(!1),[F,S]=e.useState(),[R,W]=e.useState(),[A,E]=e.useState(!1),[P]=i.useForm();return e.useEffect((()=>{m({aiPipelineId:t}).then((e=>{y(e.data),e.data.isPass&&c({aiPipelineId:t}).then((e=>{w(e.data)}))}))}),[]),n.jsxs("div",{children:[n.jsx(r,{spinning:q,fullscreen:!0}),!h?.isPass&&n.jsxs("div",{style:{color:"red"},children:["校验不通过",h?.errorMsg]}),h?.isPass&&n.jsx("div",{children:n.jsxs(i,{form:P,children:[n.jsx(i.Item,{label:"用户输入信息",name:"newMsg",rules:[{required:!0}],children:n.jsx(l.TextArea,{placeholder:"请输入",maxLength:3e3,showCount:!0,autoSize:{minRows:1,maxRows:5}})}),v.map((e=>{let a="";return e.remarks.length>0&&(a="（"+e.remarks+"）"),e.type==u.Object?n.jsx(i.Item,{label:e.name,name:e.name,rules:[{required:!0}],children:n.jsx(l.TextArea,{placeholder:"请输入对应的json对象"+a,maxLength:3e3,showCount:!0,autoSize:{minRows:1,maxRows:5}})}):e.type.startsWith("array")?n.jsx(i.Item,{label:e.name,name:e.name,rules:[{required:!0}],children:n.jsx(l.TextArea,{placeholder:"请输入对应的json数组"+a,maxLength:3e3,showCount:!0,autoSize:{minRows:1,maxRows:5}})}):e.type.startsWith("fileDoc")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"}):e.type.startsWith("fileImage")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"image/*"}):e.type.startsWith("fileAudio")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"audio/*"}):e.type.startsWith("fileVideo")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"video/*"}):e.type.startsWith("fileTxt")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"text/plain"}):e.type.startsWith("fileExcel")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}):e.type.startsWith("filePdf")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:1,accept:"application/pdf"}):e.type.startsWith("fileList")?n.jsx(j,{label:e.name,name:e.name,required:!0,maxCount:10,accept:"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/*,audio/*,video/*,text/plain,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/pdf"}):n.jsx(i.Item,{label:e.name,name:e.name,rules:[{required:!0}],children:n.jsx(l,{placeholder:"请输入",maxLength:200,showCount:!0})})})),n.jsx(i.Item,{children:n.jsx(o,{onClick:async()=>{if(!(await P.validateFields().catch((()=>!1))))return;const e=await(P?.getFieldsValue());v.forEach((a=>{a.type.startsWith("file")&&(e[a.name]=g(e[a.name]))})),T(!0),d({aiPipelineId:t,map:{...e}}).then((e=>{E(!1);let a=e.data.map((e=>({color:"green",children:n.jsxs(n.Fragment,{children:[n.jsx(p,{level:4,children:e.title}),e.varList.filter((a=>e.type==x.End?a.category==f.Input:a.category==f.Output)).map((e=>n.jsxs("p",{style:{color:"green"},children:[e.name,": ",n.jsx(k,{content:e.value??"",backgroundColor:"#f0f0f0"})]})))]})})));S(a),e.data.find((e=>e.type==x.End))?.varList.forEach((e=>{W({lable:e.name,value:e.value})}))})).finally((()=>{T(!1)}))},type:"primary",children:"调试"})})]})}),R&&n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsx(p,{level:3,children:"测试结果："}),n.jsxs(p,{level:4,children:[R.lable,"："]}),n.jsx(k,{content:R.value??"",backgroundColor:"#f0f0f0"})]}),F&&n.jsxs("div",{style:{marginTop:"20px"},children:[n.jsx(n.Fragment,{children:!A&&n.jsx(o,{icon:n.jsx(I,{}),type:"link",onClick:()=>{E(!0)},children:"展开详情"})}),n.jsx(n.Fragment,{children:A&&n.jsx(o,{icon:n.jsx(b,{}),type:"link",onClick:()=>{E(!1)},children:"收起详情"})}),n.jsx("div",{style:{marginTop:"10px"},children:A&&n.jsx(C,{items:F})})]})]})};export{F as default};
