import{d as e}from"./index-2791e9ec.js";function t(t){return t.label||!t.identifier?t.label||"":e(t.identifier)}function n(e,t,n){const o=t.indexStack,i=e.children||[],s=t.createTracker(n),c=[];let l=-1;for(o.push(-1);++l<i.length;){const n=i[l];o[o.length-1]=l,c.push(s.move(t.handle(n,e,t,{before:"\n",after:"\n",...s.current()}))),"list"!==n.type&&(t.bulletLastUsed=void 0),l<i.length-1&&c.push(s.move(r(n,i[l+1],e,t)))}return o.pop(),c.join("")}function r(e,t,n,r){let o=r.join.length;for(;o--;){const i=r.join[o](e,t,n,r);if(!0===i||1===i)break;if("number"==typeof i)return"\n".repeat(1+i);if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}const o=/\r?\n|\r/g;function i(e,t){const n=[];let r,i=0,s=0;for(;r=o.exec(e);)c(e.slice(i,r.index)),n.push(r[0]),i=r.index+r[0].length,s++;return c(e.slice(i)),n.join("");function c(e){n.push(t(e,s,!e))}}function s(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function c(e,t){return l(e,t.inConstruct,!0)&&!l(e,t.notInConstruct,!1)}function l(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function f(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),o=[],i=[],l={};let f=-1;for(;++f<e.unsafe.length;){const t=e.unsafe[f];if(!c(e.stack,t))continue;const n=s(t);let i;for(;i=n.exec(r);){const e="before"in t||Boolean(t.atBreak),n="after"in t,r=i.index+(e?i[1].length:0);o.includes(r)?(l[r].before&&!e&&(l[r].before=!1),l[r].after&&!n&&(l[r].after=!1)):(o.push(r),l[r]={before:e,after:n})}}o.sort(a);let h=n.before?n.before.length:0;const p=r.length-(n.after?n.after.length:0);for(f=-1;++f<o.length;){const e=o[f];e<h||e>=p||(e+1<p&&o[f+1]===e+1&&l[e].after&&!l[e+1].before&&!l[e+1].after||o[f-1]===e-1&&l[e].before&&!l[e-1].before&&!l[e-1].after||(h!==e&&i.push(u(r.slice(h,e),"\\")),h=e,!/[!-/:-@[-`{-~]/.test(r.charAt(e))||n.encode&&n.encode.includes(r.charAt(e))?(i.push("&#x"+r.charCodeAt(e).toString(16).toUpperCase()+";"),h++):i.push("\\")))}return i.push(u(r.slice(h,p),n.after)),i.join("")}function a(e,t){return e-t}function u(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],o=[],i=e+t;let s,c=-1,l=0;for(;s=n.exec(i);)r.push(s.index);for(;++c<r.length;)l!==r[c]&&o.push(e.slice(l,r[c])),o.push("\\"),l=r[c];return o.push(e.slice(l)),o.join("")}function h(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,o=n.line||1,i=n.column||1;return{move:function(e){const t=e||"",n=t.split(/\r?\n|\r/g),s=n[n.length-1];return o+=n.length-1,i=1===n.length?i+s.length:1+s.length+r,t},current:function(){return{now:{line:o,column:i},lineShift:r}},shift:function(e){r+=e}}}function p(e,t,n){const r=t.indexStack,o=e.children||[],i=[];let s=-1,c=n.before;r.push(-1);let l=t.createTracker(n);for(;++s<o.length;){const f=o[s];let a;if(r[r.length-1]=s,s+1<o.length){let n=t.handle.handlers[o[s+1].type];n&&n.peek&&(n=n.peek),a=n?n(o[s+1],e,t,{before:"",after:"",...l.current()}).charAt(0):""}else a=n.after;i.length>0&&("\r"===c||"\n"===c)&&"html"===f.type&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),c=" ",l=t.createTracker(n),l.move(i.join(""))),i.push(l.move(t.handle(f,e,t,{...l.current(),before:c,after:a}))),c=i[i.length-1].slice(-1)}return r.pop(),i.join("")}function d(e,t,n){let r=e.value||"",o="`",i=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const e=n.unsafe[i],t=s(e);let o;if(e.atBreak)for(;o=t.exec(r);){let e=o.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(o.index+1)}}return o+r+o}function g(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function b(e,t,n,r){const o=function(e){const t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let i=n.bulletCurrent||g(n);t&&"list"===t.type&&t.ordered&&(i=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let s=i.length+1;("tab"===o||"mixed"===o&&(t&&"list"===t.type&&t.spread||e.spread))&&(s=4*Math.ceil(s/4));const c=n.createTracker(r);c.move(i+" ".repeat(s-i.length)),c.shift(s);const l=n.enter("listItem"),f=n.indentLines(n.containerFlow(e,c.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(s))+e;return(n?i:i+" ".repeat(s-i.length))+e}));return l(),f}d.peek=function(){return"`"};export{t as a,p as b,n as c,d,g as e,i,b as l,c as p,f as s,h as t};
