import{r as e,O as t,j as a,P as d,B as s,a3 as i,D as l,T as o,M as r,c as n,m as c}from"./index-52537ad8.js";import p from"./detail-ff59a6c2.js";import m from"./addOrUpdate-cb69efe5.js";import{rolePageApi as u,roleUpdateDisabledApi as h}from"./api-29516818.js";import{P as x}from"./PlusOutlined-0403edcb.js";import"./api-6777dbf2.js";import"./menuComponent-bd0ef3ed.js";import"./index-a5ca1b9c.js";import"./index-8d66853c.js";import"./index-ec1d06fe.js";import"./EditOutlined-4076ffe0.js";const j=()=>{const j=e.useRef(),[y,f]=e.useState(t.close),[g,b]=e.useState(),[T,C]=e.useState(t.close),k=e=>{b(e?.id),C(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const S=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1},{title:"编码",dataIndex:"code",valueType:"text",copyable:!0},{title:"排序",dataIndex:"sort",valueType:"text",search:!1},{disable:!0,title:"状态",dataIndex:"disabled",search:!1,render:(e,{disabled:t})=>0===t?a.jsx(o,{color:"green",children:"启用"}):a.jsx(o,{color:"red",children:"禁用"})},{title:"备注",dataIndex:"remarks",valueType:"text",ellipsis:!0,width:80,search:!1},{title:"创建人",dataIndex:"createBy",ellipsis:!0,search:!1,render:(e,t)=>t.createByAccount.account},{title:"创建时间",key:"showTime",dataIndex:"createTime",valueType:"dateTime",sorter:!0,search:!1},{title:"操作",valueType:"option",key:"option",width:130,render:(e,d,s,l)=>[a.jsx("a",{onClick:()=>(e=>{b(e.id),f(t.detail)})(d),children:"详情"},"detail"),a.jsx("a",{onClick:()=>k(d),hidden:i("dept:edit"),children:"编辑"},"log"),a.jsx("a",{onClick:()=>(async e=>{let t=1==e.disabled?0:1;r?.confirm({title:"是否确认操作",icon:null,onOk:async()=>{let a=await h({id:e.id,disabled:t});n(a)||(c.success(a.msg),j.current?.reload())}})})(d),hidden:i("dept:edit"),children:0==d.disabled?"禁用":"启用"},"rebuild")]}];return a.jsxs("div",{children:[a.jsx(d,{columns:S,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,a)=>{let d={pageNum:e.current,pageSize:e.pageSize,pageSort:t},s=await u({...e,...d});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"角色列表",toolBarRender:()=>[a.jsx(s,{icon:a.jsx(x,{}),onClick:()=>{k()},type:"primary",hidden:i("dept:edit"),children:"新建"},"button")]}),a.jsx(l,{title:"角色详情",open:y!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>f(t.close),footer:null,children:a.jsx("div",{children:a.jsx(p,{detailId:g})})}),a.jsx(l,{title:T==t.edit?"角色编辑":"角色新增",open:T!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>C(t.close),footer:null,children:a.jsx("div",{children:a.jsx(m,{detailId:g??0,operateEnum:T,setAddOrUpdateModalFn:C,reloadTable:()=>{j.current?.reload()}})})})]})};export{j as default};
