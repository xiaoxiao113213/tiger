import{r as e,O as t,j as i,P as a,B as s,D as r,T as l,M as o,c as p,m as n}from"./index-10719960.js";import c from"./detail-1f108b59.js";import d from"./addOrUpdate-7a426b41.js";import{pipeline_pluginPageApi as u,pipeline_pluginDeleteApi as m}from"./api-94733e85.js";import{dicValueApi as j}from"./dicApi-19a4777b.js";import{P as y}from"./PlusOutlined-cc4f568a.js";import"./api-7031d208.js";import"./index-0e948b02.js";import"./Bo-bcadefc8.js";import"./index-fb93998c.js";import"./textSubmit-5aad76e3.js";import"./textAreaSubmit-e3064045.js";import"./SelectSubmit-fba154f7.js";import"./MutSelectSubmit-7d2986fa.js";import"./FileSubmit-52898802.js";import"./DateSubmit-7b5457eb.js";import"./NumberSubmit-61c4b5e2.js";import"./index-30b704bf.js";import"./index-4b23e8f2.js";import"./index-be16395f.js";import"./EditOutlined-34dfcda0.js";import"./formComponent-402c7b18.js";import"./Title-5ea514a5.js";import"./Input-f4f01092.js";import"./TextArea-8948f20d.js";import"./customerFieldNew-bd52e5d5.js";import"./customerText-ab37e497.js";import"./customerTextArea-fdf43c64.js";import"./customerSelect-0b789148.js";import"./MinusCircleOutlined-f32dd4d0.js";import"./MinusCircleOutlined-47af1d51.js";import"./customerMutSelect-2ed19145.js";import"./CustomerFile-b6b47294.js";import"./CustomerDate-c212afd9.js";import"./customerNumber-f42eabd0.js";import"./DeleteOutlined-91444ec2.js";const x=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_plugin_type"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelinePluginTypeList:t,PipelinePluginTypeSearchMap:a}},h=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_plugin_source"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelinePluginSourceList:t,PipelinePluginSourceSearchMap:a}},S=()=>{const[t,i]=e.useState([]),[a,s]=e.useState({});return e.useEffect((()=>{(async()=>{let e=await j({code:"pipeline_script_type"});e.data.forEach((e=>e.value=parseInt(e.value))),i(e.data);let t={};e.data.forEach((e=>{t[e.value]={text:e.label}})),s(t)})()}),[]),{PipelineScriptTypeList:t,PipelineScriptTypeSearchMap:a}},f=()=>{const j=e.useRef(),[f,b]=e.useState(t.close),[T,g]=e.useState(),[v,P]=e.useState(t.close);let{PipelinePluginTypeList:C}=x(),{PipelinePluginSourceList:I}=h(),{PipelineScriptTypeList:E}=S();const w=e=>{g(e?.id),P(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const L=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1},{title:"资源类型",dataIndex:"type",valueType:"text",copyable:!1,search:!1,render:(e,{type:t})=>i.jsx(l,{color:"green",children:C.find((e=>e.value==t))?.label})},{title:"来源",dataIndex:"source",valueType:"text",copyable:!1,search:!1,render:(e,{source:t})=>i.jsx(l,{color:"green",children:I.find((e=>e.value==t))?.label})},{title:"备注",dataIndex:"desc",valueType:"text",copyable:!1,search:!1},{title:"当前版本号",dataIndex:"number",valueType:"text",copyable:!1,search:!1},{title:"脚本类型",dataIndex:"scriptType",valueType:"text",copyable:!1,search:!1,render:(e,{scriptType:t})=>i.jsx(l,{color:"green",children:E.find((e=>e.value===t))?.label})},{title:"创建时间",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,a,s,r)=>[i.jsx("a",{onClick:()=>(e=>{g(e.id),b(t.detail)})(a),children:"详情"},"detail"),i.jsx("a",{onClick:()=>w(a),children:"编辑"},"edit"),i.jsx("a",{onClick:()=>(async e=>{o?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await m({id:e.id});p(t)||(n.success(t.msg),j.current?.reload())}})})(a),children:"删除"},"del")]}];return i.jsxs("div",{children:[i.jsx(a,{columns:L,actionRef:j,cardBordered:!0,params:{},request:async(e={},t,i)=>{let a={pageNum:e.current,pageSize:e.pageSize,pageSort:t},s=await u({...e,...a});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"pipeline_plugin-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"插件列表",toolBarRender:()=>[i.jsx(s,{icon:i.jsx(y,{}),onClick:()=>{w()},type:"primary",children:"新建"},"button")]}),i.jsx(r,{title:"配置详情",open:f!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>b(t.close),footer:null,children:i.jsx("div",{children:i.jsx(c,{detailId:T,scriptTypeList:E,typeList:C,sourceList:I})})}),i.jsx(r,{title:v===t.edit?"插件编辑":"插件新增",open:v!==t.close,width:"85%",destroyOnClose:!0,maskClosable:!1,onClose:()=>P(t.close),footer:null,children:i.jsx("div",{children:i.jsx(d,{detailId:T??0,operateEnum:v,setAddOrUpdateModalFn:P,reloadTable:()=>{j.current?.reload()},scriptTypeList:E,typeList:C})})})]})};export{f as default};
