import{r as e,O as t,i as s,j as i,D as o,M as r,c as n}from"./index-1fe6dff8.js";import{u as l,H as a,d as p}from"./index-9cc62199.js";/* empty css                          */import{processPointDeleteApi as d,processPointUpdateApi as c}from"./pointApi-7316630f.js";import{M as j}from"./uilts-d0a0e0a8.js";import m from"./ApprovalNodeEdit-27c4e920.js";import{E as u,D as x}from"./EditTwoTone-639ee192.js";import{R as f}from"./RightCircleTwoTone-4b7c5206.js";import"./index-953dfacc.js";import"./Title-952b03be.js";import"./Input-f98aea5e.js";import"./TextArea-08e23fd4.js";import"./Password-ff2218fe.js";import"./QRCodeSVG-710d84ab.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-3c93b810.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./api-0a5cfd87.js";import"./processApi-33853f9b.js";import"./api-b0087b33.js";function h({id:h,data:y,isConnectable:T}){l();const[C,w]=e.useState(t.close),[b,g]=e.useState(!1),[k,v]=e.useState(y.label),O=e.useRef(null),S=s.useContext(j),E=()=>{let e=O.current?.value||k;v(e),y.label=e,g(!1),c({processPointId:h,name:e})};return e.useEffect((()=>{if(b&&O.current){O.current.focus();const e=t=>{if("Enter"===t.key){try{O.current.removeEventListener("keydown",e)}catch(s){}E()}};return O.current.addEventListener("keydown",e),()=>{try{O.current.removeEventListener("keydown",e)}catch(t){}}}}),[b]),i.jsxs("div",{className:"text-updater-node",style:{backgroundColor:"#c7e8a9"},children:[i.jsx(a,{type:"target",position:p.Top,isConnectable:T}),i.jsx("div",{className:"nodrag",style:{width:150},children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"text",style:{height:15,fontSize:10,display:"flex"},children:[!b&&i.jsxs("span",{style:{flex:5},children:[k,i.jsx(u,{onClick:()=>{g(!0)}})]}),b&&i.jsx("span",{style:{flex:1},children:i.jsx("input",{defaultValue:k,onBlur:()=>{E()},ref:O})}),i.jsx("span",{style:{flex:1,textAlign:"right"},children:i.jsx(x,{onClick:async()=>{r?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let e=await d({processPointId:h});n(e)||S.initData()}})}})})]}),i.jsx("hr",{style:{marginTop:0}}),i.jsxs("label",{htmlFor:"text",style:{height:15,fontSize:15,display:"flex"},children:[i.jsx("span",{style:{flex:1,color:"blue"},children:"设置审批人"}),i.jsx("span",{style:{flex:1,textAlign:"right"},children:i.jsx(f,{onClick:()=>{w(t.edit)}})})]})]})}),i.jsx(a,{type:"source",position:p.Bottom,isConnectable:T}),i.jsx(o,{title:"设置",open:C!==t.close,width:"70%",destroyOnClose:!0,maskClosable:!1,onClose:()=>w(t.close),footer:null,children:i.jsx("div",{children:i.jsx(m,{processPointId:h,closeSelf:()=>{w(t.close)}})})})]})}export{h as default};
