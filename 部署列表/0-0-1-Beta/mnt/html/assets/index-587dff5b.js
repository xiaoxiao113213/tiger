import{r as e,O as t,j as o,P as s,B as i,a3 as r,D as d,T as l,M as a,c as p,m as n}from"./index-f2321b57.js";import m from"./detail-fdf010a3.js";import c from"./addOrUpdate-4c0f911b.js";import{processPageApi as j,processDeleteApi as u}from"./processApi-f72db82e.js";import x from"./ProcessEdit-3fdc6689.js";import{P as h}from"./PlusOutlined-0e19b652.js";import"./index-55f4da4c.js";import"./index-e51db6e5.js";import"./index-d54aef2b.js";import"./EditOutlined-1e526840.js";import"./index-20d3ffb0.js";import"./Title-c989167c.js";import"./Input-f009b856.js";import"./TextArea-47627076.js";import"./Password-38003184.js";import"./QRCodeSVG-f82b9ee5.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-c8d13b2f.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./index-da2797ee.js";/* empty css              */import"./CustomEdge-1a3c5bbb.js";import"./CustomDelEdge-8403396a.js";import"./CustomOptionsEdge-c90efb2a.js";import"./uilts-e16e3ac3.js";import"./pointApi-0a0df1a6.js";import"./ConditionNode-ee47f0e6.js";/* empty css                          */import"./ConditionNodeEdit-bfd1db2f.js";import"./Bo-900708b2.js";import"./EditTwoTone-617452f6.js";import"./RightCircleTwoTone-00ad1f09.js";import"./StartNode-5d915602.js";import"./StartNodeEdit-0e96ff5a.js";import"./api-df708061.js";import"./formComponent-e31b7955.js";import"./index-1e1c35a0.js";import"./textSubmit-4229c5b2.js";import"./textAreaSubmit-14d30dcb.js";import"./SelectSubmit-d0c3571a.js";import"./MutSelectSubmit-d4556965.js";import"./FileSubmit-975998bf.js";import"./DateSubmit-41050df2.js";import"./NumberSubmit-9c6b3724.js";import"./customerFieldNew-4b477ff0.js";import"./customerText-29c51ee6.js";import"./customerTextArea-c929063a.js";import"./customerSelect-e147971d.js";import"./MinusCircleOutlined-ede52421.js";import"./customerMutSelect-b7b09c88.js";import"./CustomerFile-0ba717f3.js";import"./CustomerDate-a09fb913.js";import"./customerNumber-e3e13da1.js";import"./DeleteOutlined-10e7bcc5.js";import"./EndNode-efda9474.js";import"./EndNodeEdit-c3229abc.js";import"./api-5c5bfeed.js";import"./OtherConditionNode-49c11083.js";import"./ApprovalNode-d90271e8.js";import"./ApprovalNodeEdit-3aff377a.js";import"./CcNode-f3826eaa.js";import"./CcNodeEdit-34ce4092.js";import"./HandleNode-367ab76b.js";import"./HandleNodeEdit-50c28299.js";const C=()=>{const C=e.useRef(),[S,y]=e.useState(t.close),[T,b]=e.useState(),[f,g]=e.useState(),[O,I]=e.useState(t.close),[w,N]=e.useState(t.close),v=e=>{b(e?.processId),I(e?t.edit:t.add)},E=()=>{C.current?.reload()};e.useEffect((()=>{}),[]);const k=[{title:"流程ID",dataIndex:"processId",valueType:"text",copyable:!1,search:!1},{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"状态",dataIndex:"disabled",valueType:"text",copyable:!1,search:!1,render:(e,{disabled:t})=>0===t?o.jsx(l,{color:"green",children:"启用"}):o.jsx(l,{color:"red",children:"禁用"})},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"更新人",dataIndex:"updateBy",valueType:"text",copyable:!1,search:!1,render:(e,{updateByAccount:t})=>t.account},{title:"操作",valueType:"option",key:"option",width:180,render:(e,s,i,d)=>[o.jsx("a",{onClick:()=>(e=>{b(e.processId),y(t.detail)})(s),children:"详情"},"detail"),o.jsx("a",{onClick:()=>v(s),hidden:r("approvalSet:edit"),children:"编辑"},"edit"),o.jsx("a",{onClick:()=>(e=>{b(e?.processId),g(e),N(t.edit)})(s),hidden:r("approvalSet:edit"),children:"配置流程"},"config"),o.jsx("a",{onClick:()=>(async e=>{a?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await u({processId:e.processId});p(t)||(n.success(t.msg),C.current?.reload())}})})(s),hidden:r("approvalSet:del"),children:"删除"},"del")]}];return o.jsxs("div",{children:[o.jsx(s,{columns:k,actionRef:C,cardBordered:!0,params:{},request:async(e={},t,o)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},i=await j({...e,...s});return{data:i.data.list,success:1e3===i.code,total:i.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"process-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[o.jsx(i,{icon:o.jsx(h,{}),onClick:()=>{v()},type:"primary",hidden:r("approvalSet:edit"),children:"新建"},"button")]}),o.jsx(d,{title:"配置详情",open:S!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>y(t.close),footer:null,children:o.jsx("div",{children:o.jsx(m,{detailId:T})})}),o.jsx(d,{title:O==t.edit?"配置编辑":"配置新增",open:O!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>I(t.close),footer:null,children:o.jsx("div",{children:o.jsx(c,{detailId:T??0,operateEnum:O,setAddOrUpdateModalFn:I,reloadTable:E})})}),o.jsx(d,{title:"配置流程",open:w!==t.close,width:"98%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{N(t.close),E()},footer:null,children:o.jsx("div",{children:o.jsx(x,{processId:T,processVersionId:f?.processVersionId,close:()=>{N(t.close),E()}})})})]})};export{C as default};
