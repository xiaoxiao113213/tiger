import{z as e}from"./index-93c92338.js";import{p as t,e as r,d as n,l as o,i as a,a as i,t as c,b as s,c as u,s as l}from"./list-item-20847868.js";import{v as f}from"./index-1fe765b2.js";import{E as d}from"./index-308ab40d.js";import{t as h}from"./index-5adc07c7.js";import{p}from"./index-c7af2da5.js";import"./index-2791e9ec.js";function m(e,t){let r,n=-1;if(t.extensions)for(;++n<t.extensions.length;)m(e,t.extensions[n]);for(r in t)"extensions"===r||("unsafe"===r||"join"===r?e[r]=[...e[r]||[],...t[r]||[]]:"handlers"===r?e[r]=Object.assign(e[r],t[r]||{}):e.options[r]=t[r]);return e}function g(e,t,r){return">"+(r?"":" ")+e}function v(e,r,n,o){let a=-1;for(;++a<n.unsafe.length;)if("\n"===n.unsafe[a].character&&t(n.stack,n.unsafe[a]))return/[ \t]/.test(o.before)?"":" ";return"\\\n"}function k(e,t){return Boolean(!t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function b(e,t,r){return(r?"":"    ")+e}function C(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function w(e,t,r,n){const o=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(r),a=r.enter("emphasis"),i=r.createTracker(n);let c=i.move(o);return c+=i.move(r.containerPhrasing(e,{before:c,after:o,...i.current()})),c+=i.move(o),a(),c}function x(e,t){let r=!1;return f(e,(e=>{if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return r=!0,d})),Boolean((!e.depth||e.depth<3)&&h(e)&&(t.options.setext||r))}function y(e){return e.value||""}function A(e,t,r,n){const o=C(r),a='"'===o?"Quote":"Apostrophe",i=r.enter("image");let c=r.enter("label");const s=r.createTracker(n);let u=s.move("![");return u+=s.move(r.safe(e.alt,{before:u,after:"]",...s.current()})),u+=s.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=r.enter("destinationLiteral"),u+=s.move("<"),u+=s.move(r.safe(e.url,{before:u,after:">",...s.current()})),u+=s.move(">")):(c=r.enter("destinationRaw"),u+=s.move(r.safe(e.url,{before:u,after:e.title?" ":")",...s.current()}))),c(),e.title&&(c=r.enter(`title${a}`),u+=s.move(" "+o),u+=s.move(r.safe(e.title,{before:u,after:o,...s.current()})),u+=s.move(o),c()),u+=s.move(")"),i(),u}function F(e,t,r,n){const o=e.referenceType,a=r.enter("imageReference");let i=r.enter("label");const c=r.createTracker(n);let s=c.move("![");const u=r.safe(e.alt,{before:s,after:"]",...c.current()});s+=c.move(u+"]["),i();const l=r.stack;r.stack=[],i=r.enter("reference");const f=r.safe(r.associationId(e),{before:s,after:"]",...c.current()});return i(),r.stack=l,a(),"full"!==o&&u&&u===f?"shortcut"===o?s=s.slice(0,-1):s+=c.move("]"):s+=c.move(f+"]"),s}function O(e,t){const r=h(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function L(e,t,r,n){const o=C(r),a='"'===o?"Quote":"Apostrophe",i=r.createTracker(n);let c,s;if(O(e,r)){const t=r.stack;r.stack=[],c=r.enter("autolink");let n=i.move("<");return n+=i.move(r.containerPhrasing(e,{before:n,after:">",...i.current()})),n+=i.move(">"),c(),r.stack=t,n}c=r.enter("link"),s=r.enter("label");let u=i.move("[");return u+=i.move(r.containerPhrasing(e,{before:u,after:"](",...i.current()})),u+=i.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=r.enter("destinationLiteral"),u+=i.move("<"),u+=i.move(r.safe(e.url,{before:u,after:">",...i.current()})),u+=i.move(">")):(s=r.enter("destinationRaw"),u+=i.move(r.safe(e.url,{before:u,after:e.title?" ":")",...i.current()}))),s(),e.title&&(s=r.enter(`title${a}`),u+=i.move(" "+o),u+=i.move(r.safe(e.title,{before:u,after:o,...i.current()})),u+=i.move(o),s()),u+=i.move(")"),c(),u}function B(e,t,r,n){const o=e.referenceType,a=r.enter("linkReference");let i=r.enter("label");const c=r.createTracker(n);let s=c.move("[");const u=r.containerPhrasing(e,{before:s,after:"]",...c.current()});s+=c.move(u+"]["),i();const l=r.stack;r.stack=[],i=r.enter("reference");const f=r.safe(r.associationId(e),{before:s,after:"]",...c.current()});return i(),r.stack=l,a(),"full"!==o&&u&&u===f?"shortcut"===o?s=s.slice(0,-1):s+=c.move("]"):s+=c.move(f+"]"),s}function T(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function E(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function I(e,t,r,n){const o=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(r),a=r.enter("strong"),i=r.createTracker(n);let c=i.move(o+o);return c+=i.move(r.containerPhrasing(e,{before:c,after:o,...i.current()})),c+=i.move(o+o),a(),c}w.peek=function(e,t,r){return r.options.emphasis||"*"},y.peek=function(){return"<"},A.peek=function(){return"!"},F.peek=function(){return"!"},L.peek=function(e,t,r){return O(e,r)?"<":"["},B.peek=function(){return"["},I.peek=function(e,t,r){return r.options.strong||"*"};const z={blockquote:function(e,t,r,n){const o=r.enter("blockquote"),a=r.createTracker(n);a.move("> "),a.shift(2);const i=r.indentLines(r.containerFlow(e,a.current()),g);return o(),i},break:v,code:function(e,t,r,n){const o=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(r),a=e.value||"",i="`"===o?"GraveAccent":"Tilde";if(k(e,r)){const e=r.enter("codeIndented"),t=r.indentLines(a,b);return e(),t}const c=r.createTracker(n),s=o.repeat(Math.max(function(e,t){const r=String(e);let n=r.indexOf(t),o=n,a=0,i=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==n;)n===o?++a>i&&(i=a):a=1,o=n+t.length,n=r.indexOf(t,o);return i}(a,o)+1,3)),u=r.enter("codeFenced");let l=c.move(s);if(e.lang){const t=r.enter(`codeFencedLang${i}`);l+=c.move(r.safe(e.lang,{before:l,after:" ",encode:["`"],...c.current()})),t()}if(e.lang&&e.meta){const t=r.enter(`codeFencedMeta${i}`);l+=c.move(" "),l+=c.move(r.safe(e.meta,{before:l,after:"\n",encode:["`"],...c.current()})),t()}return l+=c.move("\n"),a&&(l+=c.move(a+"\n")),l+=c.move(s),u(),l},definition:function(e,t,r,n){const o=C(r),a='"'===o?"Quote":"Apostrophe",i=r.enter("definition");let c=r.enter("label");const s=r.createTracker(n);let u=s.move("[");return u+=s.move(r.safe(r.associationId(e),{before:u,after:"]",...s.current()})),u+=s.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=r.enter("destinationLiteral"),u+=s.move("<"),u+=s.move(r.safe(e.url,{before:u,after:">",...s.current()})),u+=s.move(">")):(c=r.enter("destinationRaw"),u+=s.move(r.safe(e.url,{before:u,after:e.title?" ":"\n",...s.current()}))),c(),e.title&&(c=r.enter(`title${a}`),u+=s.move(" "+o),u+=s.move(r.safe(e.title,{before:u,after:o,...s.current()})),u+=s.move(o),c()),i(),u},emphasis:w,hardBreak:v,heading:function(e,t,r,n){const o=Math.max(Math.min(6,e.depth||1),1),a=r.createTracker(n);if(x(e,r)){const t=r.enter("headingSetext"),n=r.enter("phrasing"),i=r.containerPhrasing(e,{...a.current(),before:"\n",after:"\n"});return n(),t(),i+"\n"+(1===o?"=":"-").repeat(i.length-(Math.max(i.lastIndexOf("\r"),i.lastIndexOf("\n"))+1))}const i="#".repeat(o),c=r.enter("headingAtx"),s=r.enter("phrasing");a.move(i+" ");let u=r.containerPhrasing(e,{before:"# ",after:"\n",...a.current()});return/^[\t ]/.test(u)&&(u="&#x"+u.charCodeAt(0).toString(16).toUpperCase()+";"+u.slice(1)),u=u?i+" "+u:i,r.options.closeAtx&&(u+=" "+i),s(),c(),u},html:y,image:A,imageReference:F,inlineCode:n,link:L,linkReference:B,list:function(e,t,n,o){const a=n.enter("list"),i=n.bulletCurrent;let c=e.ordered?T(n):r(n);const s=e.ordered?function(e){const t=T(e),r=e.options.bulletOrderedOther;if(!r)return"."===t?")":".";if("."!==r&&")"!==r)throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bulletOrdered` (`"+t+"`) and `bulletOrderedOther` (`"+r+"`) to be different");return r}(n):function(e){const t=r(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n),u=n.bulletLastUsed;let l=!1;if(t&&(e.ordered?n.options.bulletOrderedOther:n.options.bulletOther)&&u&&c===u&&(l=!0),!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==c&&"-"!==c||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),E(n)===c&&t){let t=-1;for(;++t<e.children.length;){const r=e.children[t];if(r&&"listItem"===r.type&&r.children&&r.children[0]&&"thematicBreak"===r.children[0].type){l=!0;break}}}}l&&(c=s),n.bulletCurrent=c;const f=n.containerFlow(e,o);return n.bulletLastUsed=c,n.bulletCurrent=i,a(),f},listItem:o,paragraph:function(e,t,r,n){const o=r.enter("paragraph"),a=r.enter("phrasing"),i=r.containerPhrasing(e,n);return a(),o(),i},root:function(e,t,r,n){return(e.children.some((e=>p(e)))?r.containerPhrasing:r.containerFlow).call(r,e,n)},strong:I,text:function(e,t,r,n){return r.safe(e.value,n)},thematicBreak:function(e,t,r){const n=(E(r)+(r.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(r));return r.options.ruleSpaces?n.slice(0,-1):n}},j=[function(e,t,r,n){if("code"===t.type&&k(t,n)&&("list"===e.type||e.type===t.type&&k(e,n)))return!1;if("list"===e.type&&e.type===t.type&&Boolean(e.ordered)===Boolean(t.ordered)&&!(e.ordered?n.options.bulletOrderedOther:n.options.bulletOther))return!1;if("spread"in r&&"boolean"==typeof r.spread){if("paragraph"===e.type&&(e.type===t.type||"definition"===t.type||"heading"===t.type&&x(t,n)))return;return r.spread?1:0}}];const S=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],R=[{character:"\t",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"\t",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:"\n",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:S},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:"(?:[\r\n]|$)"},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:S},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:"(?:[ \t\r\n*])"},{character:"*",inConstruct:"phrasing",notInConstruct:S},{atBreak:!0,character:"+",after:"(?:[ \t\r\n])"},{atBreak:!0,character:"-",after:"(?:[ \t\r\n-])"},{atBreak:!0,before:"\\d+",character:".",after:"(?:[ \t\r\n]|$)"},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:S},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:S},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:S},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:S},{atBreak:!0,character:"~"}];function M(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function P(e){throw new Error("Cannot handle unknown node `"+e.type+"`")}function G(e,t){if("definition"===e.type&&e.type===t.type)return 0}function $(e,t){return s(e,this,t)}function _(e,t){return u(e,this,t)}function Q(e,t){return l(this,e,t)}function q(t){Object.assign(this,{Compiler:r=>{const n=this.data("settings");return function(t,r={}){const n={enter:function(e){return n.stack.push(e),function(){n.stack.pop()}},indentLines:a,associationId:i,containerPhrasing:$,containerFlow:_,createTracker:c,safe:Q,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[],handle:void 0};m(n,{unsafe:R,join:j,handlers:z}),m(n,r),n.options.tightDefinitions&&m(n,{join:[G]}),n.handle=e("type",{invalid:M,unknown:P,handlers:n.handlers});let o=n.handle(t,void 0,n,{before:"\n",after:"\n",now:{line:1,column:1},lineShift:0});return o&&10!==o.charCodeAt(o.length-1)&&13!==o.charCodeAt(o.length-1)&&(o+="\n"),o}(r,Object.assign({},n,t,{extensions:this.data("toMarkdownExtensions")||[]}))}})}export{q as default};
