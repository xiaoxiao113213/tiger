import{r as e,O as t,i as s,j as i,aa as o,D as r,M as l,c as n}from"./index-52537ad8.js";import{u as a,H as d,d as p}from"./index-f591dfb2.js";/* empty css                          */import{M as c}from"./uilts-69ee15ee.js";import{processPointDeleteApi as j,processPointUpdateApi as m}from"./pointApi-8e2f7664.js";import u from"./HandleNodeEdit-029c125e.js";import{E as x,D as f}from"./EditTwoTone-faaa53cc.js";import{R as h}from"./RightCircleTwoTone-746a25ce.js";import"./index-385cacc2.js";import"./Title-0f7b284b.js";import"./Input-33d09d13.js";import"./TextArea-0027e4e6.js";import"./Password-207dd782.js";import"./QRCodeSVG-eefef35a.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-239e2818.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./api-900906c9.js";import"./processApi-46ba1e32.js";import"./api-29516818.js";function y({id:y,data:w,isConnectable:T}){a();const[C,b]=e.useState(t.close),[O,g]=e.useState(!1),[k,v]=e.useState(w.label),S=e.useRef(null),E=s.useContext(c),F=()=>{let e=S.current?.value||k;v(e),w.label=e,g(!1),m({processPointId:y,name:e})};return e.useEffect((()=>{if(O&&S.current){S.current.focus();const e=t=>{if("Enter"===t.key){try{S.current?.removeEventListener("keydown",e)}catch(s){}F()}};return S.current.addEventListener("keydown",e),()=>{try{S.current?.removeEventListener("keydown",e)}catch(t){}}}}),[O]),i.jsxs("div",{className:"text-updater-node",style:{backgroundColor:"#d0aeef"},children:[i.jsx(d,{type:"target",position:p.Top,isConnectable:T}),i.jsx("div",{className:"nodrag",style:{width:150},children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"text",style:{height:15,fontSize:10,display:"flex"},children:[!O&&i.jsx(o,{placement:"top",title:k,children:i.jsxs("span",{style:{flex:5,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[k,i.jsx(x,{onClick:()=>{g(!0)}})]})}),O&&i.jsx("span",{style:{flex:1},children:i.jsx("input",{defaultValue:k,onBlur:()=>{F()},ref:S})}),i.jsx("span",{style:{flex:1,textAlign:"right"},children:i.jsx(f,{onClick:async()=>{l?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let e=await j({processPointId:y});n(e)||E.initData()}})}})})]}),i.jsx("hr",{style:{marginTop:0}}),i.jsxs("label",{htmlFor:"text",style:{height:15,fontSize:15,display:"flex"},children:[i.jsx("span",{style:{flex:1,color:"blue"},children:"设置办理人"}),i.jsx("span",{style:{flex:1,textAlign:"right"},children:i.jsx(h,{onClick:()=>{b(t.edit)}})})]})]})}),i.jsx(d,{type:"source",position:p.Bottom,isConnectable:T}),i.jsx(r,{title:"设置",open:C!==t.close,width:"70%",destroyOnClose:!0,maskClosable:!1,onClose:()=>b(t.close),footer:null,children:i.jsx("div",{children:i.jsx(u,{processPointId:y,closeSelf:()=>{b(t.close)}})})})]})}export{y as default};
