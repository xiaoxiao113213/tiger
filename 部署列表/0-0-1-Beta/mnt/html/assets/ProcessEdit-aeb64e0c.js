import{aU as e,j as t,r,B as n,M as o,c as i}from"./index-52537ad8.js";import{R as s,u as a,l as d,m as h,i as u,n as c,C as l,M as f,B as p,P as g}from"./index-f591dfb2.js";/* empty css              */import m from"./CustomEdge-15f951b2.js";import v from"./CustomDelEdge-2ea4c70c.js";import w from"./CustomOptionsEdge-f5cbcc95.js";import E from"./ConditionNode-3f0bffac.js";import b from"./StartNode-42f90115.js";import y from"./EndNode-8151b702.js";import _ from"./OtherConditionNode-ddff5c02.js";import N from"./ApprovalNode-d11a9a24.js";import k from"./CcNode-cb293401.js";import j from"./HandleNode-0dc7b55c.js";import{processPointAllApi as x}from"./pointApi-8e2f7664.js";import{M as O}from"./uilts-69ee15ee.js";import{processPublish as I}from"./processApi-46ba1e32.js";import"./PlusSquareTwoTone-f51424a0.js";/* empty css                          */import"./ConditionNodeEdit-29c006fd.js";import"./index-385cacc2.js";import"./Title-0f7b284b.js";import"./Input-33d09d13.js";import"./TextArea-0027e4e6.js";import"./Password-207dd782.js";import"./QRCodeSVG-eefef35a.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-239e2818.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./Bo-cc27e439.js";import"./EditTwoTone-faaa53cc.js";import"./RightCircleTwoTone-746a25ce.js";import"./StartNodeEdit-429deb05.js";import"./api-900906c9.js";import"./formComponent-546559ea.js";import"./index-f6caee0f.js";import"./textSubmit-f698ce92.js";import"./textAreaSubmit-9cc0fcd3.js";import"./SelectSubmit-a0546f42.js";import"./MutSelectSubmit-978c5f1c.js";import"./FileSubmit-f1303890.js";import"./PlusOutlined-0403edcb.js";import"./DateSubmit-7515399a.js";import"./NumberSubmit-d54ed6cf.js";import"./customerFieldNew-1985dcb7.js";import"./customerText-7f38fb85.js";import"./customerTextArea-84d38379.js";import"./customerSelect-aabfe871.js";import"./MinusCircleOutlined-37395b9b.js";import"./customerMutSelect-c1e3cf9e.js";import"./CustomerFile-7877d17f.js";import"./CustomerDate-9ed3e0ba.js";import"./customerNumber-33ced8f3.js";import"./index-8d66853c.js";import"./DeleteOutlined-104cbf00.js";import"./EndNodeEdit-5d497185.js";import"./api-29516818.js";import"./ApprovalNodeEdit-4600a59f.js";import"./CcNodeEdit-6c6fc2b9.js";import"./HandleNodeEdit-029c125e.js";var C="\0",P="\0",M="";function T(e,t){e[t]?e[t]++:e[t]=1}function L(e,t){--e[t]||delete e[t]}function S(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var s=o;o=i,i=s}return o+M+i+M+(void 0===n?C:n)}function R(e,t){return S(e,t.v,t.w,t.name)}var F=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=!e.hasOwnProperty("directed")||e.directed,this._isMultigraph=!!e.hasOwnProperty("multigraph")&&e.multigraph,this._isCompound=!!e.hasOwnProperty("compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children[P]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._in[t]).length))}sinks(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._out[t]).length))}setNodes(e,t){var r=arguments,n=this;return e.forEach((function(e){r.length>1?n.setNode(e,t):n.setNode(e)})),this}setNode(e,t){return this._nodes.hasOwnProperty(e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=P,this._children[e]={},this._children[P][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return this._nodes.hasOwnProperty(e)}removeNode(e){var t=this;if(this._nodes.hasOwnProperty(e)){var r=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach((function(e){t.setParent(e)})),delete this._children[e]),Object.keys(this._in[e]).forEach(r),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(void 0===t)t=P;else{for(var r=t+="";void 0!==r;r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==P)return t}}children(e=P){if(this._isCompound){var t=this._children[e];if(t)return Object.keys(t)}else{if(e===P)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this._preds[e];if(t)return Object.keys(t)}successors(e){var t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){const n=new Set(t);for(var r of this.successors(e))n.add(r);return Array.from(n.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach((function([r,n]){e(r)&&t.setNode(r,n)})),Object.values(this._edgeObjs).forEach((function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))}));var n={};function o(e){var i=r.parent(e);return void 0===i||t.hasNode(i)?(n[e]=i,i):i in n?n[i]:o(i)}return this._isCompound&&t.nodes().forEach((e=>t.setParent(e,o(e)))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){var r=this,n=arguments;return e.reduce((function(e,o){return n.length>1?r.setEdge(e,o,t):r.setEdge(e,o),o})),this}setEdge(){var e,t,r,n,o=!1,i=arguments[0];"object"==typeof i&&null!==i&&"v"in i?(e=i.v,t=i.w,r=i.name,2===arguments.length&&(n=arguments[1],o=!0)):(e=i,t=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),e=""+e,t=""+t,void 0!==r&&(r=""+r);var s=S(this._isDirected,e,t,r);if(this._edgeLabels.hasOwnProperty(s))return o&&(this._edgeLabels[s]=n),this;if(void 0!==r&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=o?n:this._defaultEdgeLabelFn(e,t,r);var a=function(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var s=o;o=i,i=s}var a={v:o,w:i};n&&(a.name=n);return a}(this._isDirected,e,t,r);return e=a.v,t=a.w,Object.freeze(a),this._edgeObjs[s]=a,T(this._preds[t],e),T(this._sucs[e],t),this._in[t][s]=a,this._out[e][s]=a,this._edgeCount++,this}edge(e,t,r){var n=1===arguments.length?R(this._isDirected,arguments[0]):S(this._isDirected,e,t,r);return this._edgeLabels[n]}edgeAsObj(){const e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,r){var n=1===arguments.length?R(this._isDirected,arguments[0]):S(this._isDirected,e,t,r);return this._edgeLabels.hasOwnProperty(n)}removeEdge(e,t,r){var n=1===arguments.length?R(this._isDirected,arguments[0]):S(this._isDirected,e,t,r),o=this._edgeObjs[n];return o&&(e=o.v,t=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],L(this._preds[t],e),L(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this}inEdges(e,t){var r=this._in[e];if(r){var n=Object.values(r);return t?n.filter((e=>e.v===t)):n}}outEdges(e,t){var r=this._out[e];if(r){var n=Object.values(r);return t?n.filter((e=>e.w===t)):n}}nodeEdges(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},D={Graph:F,version:"2.2.2"},G=F,V={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:A(e),edges:B(e)};void 0!==e.graph()&&(t.value=structuredClone(e.graph()));return t},read:function(e){var t=new G(e.options).setGraph(e.value);return e.nodes.forEach((function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),e.edges.forEach((function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}};function A(e){return e.nodes().map((function(t){var r=e.node(t),n=e.parent(t),o={v:t};return void 0!==r&&(o.value=r),void 0!==n&&(o.parent=n),o}))}function B(e){return e.edges().map((function(t){var r=e.edge(t),n={v:t.v,w:t.w};return void 0!==t.name&&(n.name=t.name),void 0!==r&&(n.value=r),n}))}var Y=function(e){var t,r={},n=[];function o(n){r.hasOwnProperty(n)||(r[n]=!0,t.push(n),e.successors(n).forEach(o),e.predecessors(n).forEach(o))}return e.nodes().forEach((function(e){t=[],o(e),t.length&&n.push(t)})),n};var z=class{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map((function(e){return e.key}))}has(e){return this._keyIndices.hasOwnProperty(e)}priority(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key}add(e,t){var r=this._keyIndices;if(e=String(e),!r.hasOwnProperty(e)){var n=this._arr,o=n.length;return r[e]=o,n.push({key:e,priority:t}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)}_heapify(e){var t=this._arr,r=2*e,n=r+1,o=e;r<t.length&&(o=t[r].priority<t[o].priority?r:o,n<t.length&&(o=t[n].priority<t[o].priority?n:o),o!==e&&(this._swap(e,o),this._heapify(o)))}_decrease(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t}_swap(e,t){var r=this._arr,n=this._keyIndices,o=r[e],i=r[t];r[e]=i,r[t]=o,n[i.key]=e,n[o.key]=t}},q=z,W=function(e,t,r,n){return function(e,t,r,n){var o,i,s={},a=new q,d=function(e){var t=e.v!==o?e.v:e.w,n=s[t],d=r(e),h=i.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+d);h<n.distance&&(n.distance=h,n.predecessor=o,a.decrease(t,h))};e.nodes().forEach((function(e){var r=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:r},a.add(e,r)}));for(;a.size()>0&&(o=a.removeMin(),(i=s[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(d);return s}(e,String(t),r||H,n||function(t){return e.outEdges(t)})},H=()=>1;var U=W,Q=function(e,t,r){return e.nodes().reduce((function(n,o){return n[o]=U(e,o,t,r),n}),{})};var Z=function(e){var t=0,r=[],n={},o=[];function i(s){var a=n[s]={onStack:!0,lowlink:t,index:t++};if(r.push(s),e.successors(s).forEach((function(e){n.hasOwnProperty(e)?n[e].onStack&&(a.lowlink=Math.min(a.lowlink,n[e].index)):(i(e),a.lowlink=Math.min(a.lowlink,n[e].lowlink))})),a.lowlink===a.index){var d,h=[];do{d=r.pop(),n[d].onStack=!1,h.push(d)}while(s!==d);o.push(h)}}return e.nodes().forEach((function(e){n.hasOwnProperty(e)||i(e)})),o};var X=Z,J=function(e){return X(e).filter((function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))};var K=function(e,t,r){return function(e,t,r){var n={},o=e.nodes();return o.forEach((function(e){n[e]={},n[e][e]={distance:0},o.forEach((function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})})),r(e).forEach((function(r){var o=r.v===e?r.w:r.v,i=t(r);n[e][o]={distance:i,predecessor:e}}))})),o.forEach((function(e){var t=n[e];o.forEach((function(r){var i=n[r];o.forEach((function(r){var n=i[e],o=t[r],s=i[r],a=n.distance+o.distance;a<s.distance&&(s.distance=a,s.predecessor=o.predecessor)}))}))})),n}(e,t||$,r||function(t){return e.outEdges(t)})},$=()=>1;function ee(e){var t={},r={},n=[];if(e.sinks().forEach((function o(i){if(r.hasOwnProperty(i))throw new te;t.hasOwnProperty(i)||(r[i]=!0,t[i]=!0,e.predecessors(i).forEach(o),delete r[i],n.push(i))})),Object.keys(t).length!==e.nodeCount())throw new te;return n}class te extends Error{constructor(){super(...arguments)}}var re=ee;ee.CycleException=te;var ne=re;var oe=function(e,t,r){Array.isArray(t)||(t=[t]);var n=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),o="post"===r?ie:se,i=[],s={};return t.forEach((t=>{if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);o(t,n,s,i)})),i};function ie(e,t,r,n){for(var o=[[e,!1]];o.length>0;){var i=o.pop();i[1]?n.push(i[0]):r.hasOwnProperty(i[0])||(r[i[0]]=!0,o.push([i[0],!0]),ae(t(i[0]),(e=>o.push([e,!1]))))}}function se(e,t,r,n){for(var o=[e];o.length>0;){var i=o.pop();r.hasOwnProperty(i)||(r[i]=!0,n.push(i),ae(t(i),(e=>o.push(e))))}}function ae(e,t){for(var r=e.length;r--;)t(e[r],r,e);return e}var de=oe;var he=oe;var ue=F,ce=z;var le={Graph:D.Graph,json:V,alg:{components:Y,dijkstra:W,dijkstraAll:Q,findCycles:J,floydWarshall:K,isAcyclic:function(e){try{ne(e)}catch(t){if(t instanceof ne.CycleException)return!1;throw t}return!0},postorder:function(e,t){return de(e,t,"post")},preorder:function(e,t){return he(e,t,"pre")},prim:function(e,t){var r,n=new ue,o={},i=new ce;function s(e){var n=e.v===r?e.w:e.v,s=i.priority(n);if(void 0!==s){var a=t(e);a<s&&(o[n]=r,i.decrease(n,a))}}if(0===e.nodeCount())return n;e.nodes().forEach((function(e){i.add(e,Number.POSITIVE_INFINITY),n.setNode(e)})),i.decrease(e.nodes()[0],0);var a=!1;for(;i.size()>0;){if(r=i.removeMin(),o.hasOwnProperty(r))n.setEdge(r,o[r]);else{if(a)throw new Error("Input graph is not connected: "+e);a=!0}e.nodeEdges(r).forEach(s)}return n},tarjan:Z,topsort:re},version:D.version};function fe(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function pe(e,t){if("_next"!==e&&"_prev"!==e)return t}let ge=le.Graph,me=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return fe(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&fe(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,r=t._prev;for(;r!==t;)e.push(JSON.stringify(r,pe)),r=r._prev;return"["+e.join(", ")+"]"}};var ve=function(e,t){if(e.nodeCount()<=1)return[];let r=function(e,t){let r=new ge,n=0,o=0;e.nodes().forEach((e=>{r.setNode(e,{v:e,in:0,out:0})})),e.edges().forEach((e=>{let i=r.edge(e.v,e.w)||0,s=t(e),a=i+s;r.setEdge(e.v,e.w,a),o=Math.max(o,r.node(e.v).out+=s),n=Math.max(n,r.node(e.w).in+=s)}));let i=function(e){const t=[];for(let r=0;r<e;r++)t.push(r);return t}(o+n+3).map((()=>new me)),s=n+1;return r.nodes().forEach((e=>{be(i,s,r.node(e))})),{graph:r,buckets:i,zeroIdx:s}}(e,t||we);return function(e,t,r){let n,o=[],i=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;n=s.dequeue();)Ee(e,t,r,n);for(;n=i.dequeue();)Ee(e,t,r,n);if(e.nodeCount())for(let i=t.length-2;i>0;--i)if(n=t[i].dequeue(),n){o=o.concat(Ee(e,t,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx).flatMap((t=>e.outEdges(t.v,t.w)))};let we=()=>1;function Ee(e,t,r,n,o){let i=o?[]:void 0;return e.inEdges(n.v).forEach((n=>{let s=e.edge(n),a=e.node(n.v);o&&i.push({v:n.v,w:n.w}),a.out-=s,be(t,r,a)})),e.outEdges(n.v).forEach((n=>{let o=e.edge(n),i=n.w,s=e.node(i);s.in-=o,be(t,r,s)})),e.removeNode(n.v),i}function be(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}let ye=le.Graph;var _e={addBorderNode:function(e,t,r,n){let o={width:0,height:0};arguments.length>=4&&(o.rank=r,o.order=n);return Ne(e,"border",o,t)},addDummyNode:Ne,asNonCompoundGraph:function(e){let t=new ye({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach((r=>{e.children(r).length||t.setNode(r,e.node(r))})),e.edges().forEach((r=>{t.setEdge(r,e.edge(r))})),t},buildLayerMatrix:function(e){let t=Oe(ke(e)+1).map((()=>[]));return e.nodes().forEach((r=>{let n=e.node(r),o=n.rank;void 0!==o&&(t[o][n.order]=r)})),t},intersectRect:function(e,t){let r,n,o=e.x,i=e.y,s=t.x-o,a=t.y-i,d=e.width/2,h=e.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(a)*d>Math.abs(s)*h?(a<0&&(h=-h),r=h*s/a,n=h):(s<0&&(d=-d),r=d,n=d*a/s);return{x:o+r,y:i+n}},mapValues:function(e,t){let r=t;"string"==typeof t&&(r=e=>e[t]);return Object.entries(e).reduce(((e,[t,n])=>(e[t]=r(n,t),e)),{})},maxRank:ke,normalizeRanks:function(e){let t=Math.min(...e.nodes().map((t=>{let r=e.node(t).rank;return void 0===r?Number.MAX_VALUE:r})));e.nodes().forEach((r=>{let n=e.node(r);n.hasOwnProperty("rank")&&(n.rank-=t)}))},notime:function(e,t){return t()},partition:function(e,t){let r={lhs:[],rhs:[]};return e.forEach((e=>{t(e)?r.lhs.push(e):r.rhs.push(e)})),r},pick:function(e,t){const r={};for(const n of t)void 0!==e[n]&&(r[n]=e[n]);return r},predecessorWeights:function(e){let t=e.nodes().map((t=>{let r={};return e.inEdges(t).forEach((t=>{r[t.v]=(r[t.v]||0)+e.edge(t).weight})),r}));return Ie(e.nodes(),t)},range:Oe,removeEmptyRanks:function(e){let t=Math.min(...e.nodes().map((t=>e.node(t).rank))),r=[];e.nodes().forEach((n=>{let o=e.node(n).rank-t;r[o]||(r[o]=[]),r[o].push(n)}));let n=0,o=e.graph().nodeRankFactor;Array.from(r).forEach(((t,r)=>{void 0===t&&r%o!=0?--n:void 0!==t&&n&&t.forEach((t=>e.node(t).rank+=n))}))},simplify:function(e){let t=(new ye).setGraph(e.graph());return e.nodes().forEach((r=>t.setNode(r,e.node(r)))),e.edges().forEach((r=>{let n=t.edge(r.v,r.w)||{weight:0,minlen:1},o=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})})),t},successorWeights:function(e){let t=e.nodes().map((t=>{let r={};return e.outEdges(t).forEach((t=>{r[t.w]=(r[t.w]||0)+e.edge(t).weight})),r}));return Ie(e.nodes(),t)},time:function(e,t){Date.now();try{return t()}finally{}},uniqueId:xe,zipObject:Ie};function Ne(e,t,r,n){let o;do{o=xe(n)}while(e.hasNode(o));return r.dummy=t,e.setNode(o,r),o}function ke(e){return Math.max(...e.nodes().map((t=>{let r=e.node(t).rank;return void 0===r?Number.MIN_VALUE:r})))}let je=0;function xe(e){var t=++je;return toString(e)+t}function Oe(e,t,r=1){null==t&&(t=e,e=0);let n=e=>e<t;r<0&&(n=e=>t<e);const o=[];for(let i=e;n(i);i+=r)o.push(i);return o}function Ie(e,t){return e.reduce(((e,r,n)=>(e[r]=t[n],e)),{})}let Ce=ve,Pe=_e.uniqueId;var Me={run:function(e){("greedy"===e.graph().acyclicer?Ce(e,function(e){return t=>e.edge(t).weight}(e)):function(e){let t=[],r={},n={};function o(i){n.hasOwnProperty(i)||(n[i]=!0,r[i]=!0,e.outEdges(i).forEach((e=>{r.hasOwnProperty(e.w)?t.push(e):o(e.w)})),delete r[i])}return e.nodes().forEach(o),t}(e)).forEach((t=>{let r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,Pe("rev"))}))},undo:function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.reversed){e.removeEdge(t);let n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}}))}};let Te=_e;var Le={run:function(e){e.graph().dummyChains=[],e.edges().forEach((t=>function(e,t){let r,n,o,i=t.v,s=e.node(i).rank,a=t.w,d=e.node(a).rank,h=t.name,u=e.edge(t),c=u.labelRank;if(d===s+1)return;for(e.removeEdge(t),o=0,++s;s<d;++o,++s)u.points=[],n={width:0,height:0,edgeLabel:u,edgeObj:t,rank:s},r=Te.addDummyNode(e,"edge",n,"_d"),s===c&&(n.width=u.width,n.height=u.height,n.dummy="edge-label",n.labelpos=u.labelpos),e.setEdge(i,r,{weight:u.weight},h),0===o&&e.graph().dummyChains.push(r),i=r;e.setEdge(i,a,{weight:u.weight},h)}(e,t)))},undo:function(e){e.graph().dummyChains.forEach((t=>{let r,n=e.node(t),o=n.edgeLabel;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)}))}};var Se={longestPath:function(e){var t={};e.sources().forEach((function r(n){var o=e.node(n);if(t.hasOwnProperty(n))return o.rank;t[n]=!0;var i=Math.min(...e.outEdges(n).map((t=>null==t?Number.POSITIVE_INFINITY:r(t.w)-e.edge(t).minlen)));return i===Number.POSITIVE_INFINITY&&(i=0),o.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}};var Re=le.Graph,Fe=Se.slack,De=function(e){var t,r,n=new Re({directed:!1}),o=e.nodes()[0],i=e.nodeCount();n.setNode(o,{});for(;Ge(n,e)<i;)t=Ve(n,e),r=n.hasNode(t.v)?Fe(e,t):-Fe(e,t),Ae(n,e,r);return n};function Ge(e,t){return e.nodes().forEach((function r(n){t.nodeEdges(n).forEach((o=>{var i=o.v,s=n===i?o.w:i;e.hasNode(s)||Fe(t,o)||(e.setNode(s,{}),e.setEdge(n,s,{}),r(s))}))})),e.nodeCount()}function Ve(e,t){return t.edges().reduce(((r,n)=>{let o=Number.POSITIVE_INFINITY;return e.hasNode(n.v)!==e.hasNode(n.w)&&(o=Fe(t,n)),o<r[0]?[o,n]:r}),[Number.POSITIVE_INFINITY,null])[1]}function Ae(e,t,r){e.nodes().forEach((e=>t.node(e).rank+=r))}var Be=De,Ye=Se.slack,ze=Se.longestPath,qe=le.alg.preorder,We=le.alg.postorder,He=_e.simplify,Ue=Qe;function Qe(e){e=He(e),ze(e);var t,r=Be(e);for(Je(r),Ze(r,e);t=$e(r);)tt(r,e,t,et(r,e,t))}function Ze(e,t){var r=We(e,e.nodes());(r=r.slice(0,r.length-1)).forEach((r=>function(e,t,r){var n=e.node(r),o=n.parent;e.edge(r,o).cutvalue=Xe(e,t,r)}(e,t,r)))}function Xe(e,t,r){var n=e.node(r).parent,o=!0,i=t.edge(r,n),s=0;return i||(o=!1,i=t.edge(n,r)),s=i.weight,t.nodeEdges(r).forEach((i=>{var a,d,h=i.v===r,u=h?i.w:i.v;if(u!==n){var c=h===o,l=t.edge(i).weight;if(s+=c?l:-l,a=r,d=u,e.hasEdge(a,d)){var f=e.edge(r,u).cutvalue;s+=c?-f:f}}})),s}function Je(e,t){arguments.length<2&&(t=e.nodes()[0]),Ke(e,{},1,t)}function Ke(e,t,r,n,o){var i=r,s=e.node(n);return t[n]=!0,e.neighbors(n).forEach((o=>{t.hasOwnProperty(o)||(r=Ke(e,t,r,o,n))})),s.low=i,s.lim=r++,o?s.parent=o:delete s.parent,r}function $e(e){return e.edges().find((t=>e.edge(t).cutvalue<0))}function et(e,t,r){var n=r.v,o=r.w;t.hasEdge(n,o)||(n=r.w,o=r.v);var i=e.node(n),s=e.node(o),a=i,d=!1;i.lim>s.lim&&(a=s,d=!0);var h=t.edges().filter((t=>d===rt(e,e.node(t.v),a)&&d!==rt(e,e.node(t.w),a)));return h.reduce(((e,r)=>Ye(t,r)<Ye(t,e)?r:e))}function tt(e,t,r,n){var o=r.v,i=r.w;e.removeEdge(o,i),e.setEdge(n.v,n.w,{}),Je(e),Ze(e,t),function(e,t){var r=e.nodes().find((e=>!t.node(e).parent)),n=qe(e,r);(n=n.slice(1)).forEach((r=>{var n=e.node(r).parent,o=t.edge(r,n),i=!1;o||(o=t.edge(n,r),i=!0),t.node(r).rank=t.node(n).rank+(i?o.minlen:-o.minlen)}))}(e,t)}function rt(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}Qe.initLowLimValues=Je,Qe.initCutValues=Ze,Qe.calcCutValue=Xe,Qe.leaveEdge=$e,Qe.enterEdge=et,Qe.exchangeEdges=tt;var nt=Se.longestPath,ot=De,it=Ue,st=function(e){switch(e.graph().ranker){case"network-simplex":default:dt(e);break;case"tight-tree":!function(e){nt(e),ot(e)}(e);break;case"longest-path":at(e)}};var at=nt;function dt(e){it(e)}var ht=function(e){let t=function(e){let t={},r=0;function n(o){let i=r;e.children(o).forEach(n),t[o]={low:i,lim:r++}}return e.children().forEach(n),t}(e);e.graph().dummyChains.forEach((r=>{let n=e.node(r),o=n.edgeObj,i=function(e,t,r,n){let o,i,s=[],a=[],d=Math.min(t[r].low,t[n].low),h=Math.max(t[r].lim,t[n].lim);o=r;do{o=e.parent(o),s.push(o)}while(o&&(t[o].low>d||h>t[o].lim));i=o,o=n;for(;(o=e.parent(o))!==i;)a.push(o);return{path:s.concat(a.reverse()),lca:i}}(e,t,o.v,o.w),s=i.path,a=i.lca,d=0,h=s[d],u=!0;for(;r!==o.w;){if(n=e.node(r),u){for(;(h=s[d])!==a&&e.node(h).maxRank<n.rank;)d++;h===a&&(u=!1)}if(!u){for(;d<s.length-1&&e.node(h=s[d+1]).minRank<=n.rank;)d++;h=s[d]}e.setParent(r,h),r=e.successors(r)[0]}}))};let ut=_e;var ct={run:function(e){let t=ut.addDummyNode(e,"root",{},"_root"),r=function(e){var t={};function r(n,o){var i=e.children(n);i&&i.length&&i.forEach((e=>r(e,o+1))),t[n]=o}return e.children().forEach((e=>r(e,1))),t}(e),n=Math.max(...Object.values(r))-1,o=2*n+1;e.graph().nestingRoot=t,e.edges().forEach((t=>e.edge(t).minlen*=o));let i=function(e){return e.edges().reduce(((t,r)=>t+e.edge(r).weight),0)}(e)+1;e.children().forEach((s=>lt(e,t,o,i,n,r,s))),e.graph().nodeRankFactor=o},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((t=>{e.edge(t).nestingEdge&&e.removeEdge(t)}))}};function lt(e,t,r,n,o,i,s){let a=e.children(s);if(!a.length)return void(s!==t&&e.setEdge(t,s,{weight:0,minlen:r}));let d=ut.addBorderNode(e,"_bt"),h=ut.addBorderNode(e,"_bb"),u=e.node(s);e.setParent(d,s),u.borderTop=d,e.setParent(h,s),u.borderBottom=h,a.forEach((a=>{lt(e,t,r,n,o,i,a);let u=e.node(a),c=u.borderTop?u.borderTop:a,l=u.borderBottom?u.borderBottom:a,f=u.borderTop?n:2*n,p=c!==l?1:o-i[s]+1;e.setEdge(d,c,{weight:f,minlen:p,nestingEdge:!0}),e.setEdge(l,h,{weight:f,minlen:p,nestingEdge:!0})})),e.parent(s)||e.setEdge(t,d,{weight:0,minlen:o+i[s]})}let ft=_e;var pt=function(e){e.children().forEach((function t(r){let n=e.children(r),o=e.node(r);if(n.length&&n.forEach(t),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(let t=o.minRank,n=o.maxRank+1;t<n;++t)gt(e,"borderLeft","_bl",r,o,t),gt(e,"borderRight","_br",r,o,t)}}))};function gt(e,t,r,n,o,i){let s={width:0,height:0,rank:i,borderType:t},a=o[t][i-1],d=ft.addDummyNode(e,"border",s,r);o[t][i]=d,e.setParent(d,n),a&&e.setEdge(a,d,{weight:1})}function mt(e){e.nodes().forEach((t=>vt(e.node(t)))),e.edges().forEach((t=>vt(e.edge(t))))}function vt(e){let t=e.width;e.width=e.height,e.height=t}function wt(e){e.y=-e.y}function Et(e){let t=e.x;e.x=e.y,e.y=t}let bt=_e;var yt=function(e){let t={},r=e.nodes().filter((t=>!e.children(t).length)),n=Math.max(...r.map((t=>e.node(t).rank))),o=bt.range(n+1).map((()=>[]));function i(r){if(t[r])return;t[r]=!0;let n=e.node(r);o[n.rank].push(r),e.successors(r).forEach(i)}return r.sort(((t,r)=>e.node(t).rank-e.node(r).rank)).forEach(i),o};let _t=_e.zipObject;function Nt(e,t,r){let n=_t(r,r.map(((e,t)=>t))),o=t.flatMap((t=>e.outEdges(t).map((t=>({pos:n[t.w],weight:e.edge(t).weight}))).sort(((e,t)=>e.pos-t.pos)))),i=1;for(;i<r.length;)i<<=1;let s=2*i-1;i-=1;let a=new Array(s).fill(0),d=0;return o.forEach((e=>{let t=e.pos+i;a[t]+=e.weight;let r=0;for(;t>0;)t%2&&(r+=a[t+1]),t=t-1>>1,a[t]+=e.weight;d+=e.weight*r})),d}let kt=_e;let jt=_e;function xt(e,t,r){let n;for(;t.length&&(n=t[t.length-1]).i<=r;)t.pop(),e.push(n.vs),r++;return r}let Ot=function(e,t=[]){return t.map((t=>{let r=e.inEdges(t);if(r.length){let n=r.reduce(((t,r)=>{let n=e.edge(r),o=e.node(r.v);return{sum:t.sum+n.weight*o.order,weight:t.weight+n.weight}}),{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}}))},It=function(e,t){let r={};return e.forEach(((e,t)=>{let n=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(n.barycenter=e.barycenter,n.weight=e.weight)})),t.edges().forEach((e=>{let t=r[e.v],n=r[e.w];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(r[e.w]))})),function(e){let t=[];function r(e){return t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function n(t){return r=>{r.in.push(t),0==--r.indegree&&e.push(r)}}for(;e.length;){let o=e.pop();t.push(o),o.in.reverse().forEach(r(o)),o.out.forEach(n(o))}return t.filter((e=>!e.merged)).map((e=>kt.pick(e,["vs","i","barycenter","weight"])))}(Object.values(r).filter((e=>!e.indegree)))},Ct=function(e,t){let r=jt.partition(e,(e=>e.hasOwnProperty("barycenter"))),n=r.lhs,o=r.rhs.sort(((e,t)=>t.i-e.i)),i=[],s=0,a=0,d=0;n.sort((h=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:h?t.i-e.i:e.i-t.i)),d=xt(i,o,d),n.forEach((e=>{d+=e.vs.length,i.push(e.vs),s+=e.barycenter*e.weight,a+=e.weight,d=xt(i,o,d)}));var h;let u={vs:i.flat(!0)};a&&(u.barycenter=s/a,u.weight=a);return u};var Pt=function e(t,r,n,o){let i=t.children(r),s=t.node(r),a=s?s.borderLeft:void 0,d=s?s.borderRight:void 0,h={};a&&(i=i.filter((e=>e!==a&&e!==d)));let u=Ot(t,i);u.forEach((r=>{if(t.children(r.v).length){let a=e(t,r.v,n,o);h[r.v]=a,a.hasOwnProperty("barycenter")&&(s=a,void 0!==(i=r).barycenter?(i.barycenter=(i.barycenter*i.weight+s.barycenter*s.weight)/(i.weight+s.weight),i.weight+=s.weight):(i.barycenter=s.barycenter,i.weight=s.weight))}var i,s}));let c=It(u,n);!function(e,t){e.forEach((e=>{e.vs=e.vs.flatMap((e=>t[e]?t[e].vs:e))}))}(c,h);let l=Ct(c,o);if(a&&(l.vs=[a,l.vs,d].flat(!0),t.predecessors(a).length)){let e=t.node(t.predecessors(a)[0]),r=t.node(t.predecessors(d)[0]);l.hasOwnProperty("barycenter")||(l.barycenter=0,l.weight=0),l.barycenter=(l.barycenter*l.weight+e.order+r.order)/(l.weight+2),l.weight+=2}return l};let Mt=le.Graph,Tt=_e;var Lt=function(e,t,r){let n=function(e){var t;for(;e.hasNode(t=Tt.uniqueId("_root")););return t}(e),o=new Mt({compound:!0}).setGraph({root:n}).setDefaultNodeLabel((t=>e.node(t)));return e.nodes().forEach((i=>{let s=e.node(i),a=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(o.setNode(i),o.setParent(i,a||n),e[r](i).forEach((t=>{let r=t.v===i?t.w:t.v,n=o.edge(r,i),s=void 0!==n?n.weight:0;o.setEdge(r,i,{weight:e.edge(t).weight+s})})),s.hasOwnProperty("minRank")&&o.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))})),o};let St=yt,Rt=function(e,t){let r=0;for(let n=1;n<t.length;++n)r+=Nt(e,t[n-1],t[n]);return r},Ft=Pt,Dt=Lt,Gt=function(e,t,r){let n,o={};r.forEach((r=>{let i,s,a=e.parent(r);for(;a;){if(i=e.parent(a),i?(s=o[i],o[i]=a):(s=n,n=a),s&&s!==a)return void t.setEdge(s,a);a=i}}))},Vt=le.Graph,At=_e;var Bt=function e(t,r){if(r&&"function"==typeof r.customOrder)return void r.customOrder(t,e);let n=At.maxRank(t),o=Yt(t,At.range(1,n+1),"inEdges"),i=Yt(t,At.range(n-1,-1,-1),"outEdges"),s=St(t);if(qt(t,s),r&&r.disableOptimalOrderHeuristic)return;let a,d=Number.POSITIVE_INFINITY;for(let h=0,u=0;u<4;++h,++u){zt(h%2?o:i,h%4>=2),s=At.buildLayerMatrix(t);let e=Rt(t,s);e<d&&(u=0,a=Object.assign({},s),d=e)}qt(t,a)};function Yt(e,t,r){return t.map((function(t){return Dt(e,t,r)}))}function zt(e,t){let r=new Vt;e.forEach((function(e){let n=e.graph().root,o=Ft(e,n,r,t);o.vs.forEach(((t,r)=>e.node(t).order=r)),Gt(e,r,o.vs)}))}function qt(e,t){Object.values(t).forEach((t=>t.forEach(((t,r)=>e.node(t).order=r))))}let Wt=le.Graph,Ht=_e;var Ut=function(e){let t,r=Ht.buildLayerMatrix(e),n=Object.assign(Qt(e,r),Zt(e,r)),o={};["u","d"].forEach((i=>{t="u"===i?r:Object.values(r).reverse(),["l","r"].forEach((r=>{"r"===r&&(t=t.map((e=>Object.values(e).reverse())));let s=("u"===i?e.predecessors:e.successors).bind(e),a=Kt(e,t,n,s),d=$t(e,t,a.root,a.align,"r"===r);"r"===r&&(d=Ht.mapValues(d,(e=>-e))),o[i+r]=d}))}));let i=er(e,o);return tr(o,i),rr(o,e.graph().align)};function Qt(e,t){let r={};return t.length&&t.reduce((function(t,n){let o=0,i=0,s=t.length,a=n[n.length-1];return n.forEach(((t,d)=>{let h=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find((t=>e.node(t).dummy))}(e,t),u=h?e.node(h).order:s;(h||t===a)&&(n.slice(i,d+1).forEach((t=>{e.predecessors(t).forEach((n=>{let i=e.node(n),s=i.order;!(s<o||u<s)||i.dummy&&e.node(t).dummy||Xt(r,n,t)}))})),i=d+1,o=u)})),n})),r}function Zt(e,t){let r={};function n(t,n,o,i,s){let a;Ht.range(n,o).forEach((n=>{a=t[n],e.node(a).dummy&&e.predecessors(a).forEach((t=>{let n=e.node(t);n.dummy&&(n.order<i||n.order>s)&&Xt(r,t,a)}))}))}return t.length&&t.reduce((function(t,r){let o,i=-1,s=0;return r.forEach(((a,d)=>{if("border"===e.node(a).dummy){let t=e.predecessors(a);t.length&&(o=e.node(t[0]).order,n(r,s,d,i,o),s=d,i=o)}n(r,s,r.length,o,t.length)})),r})),r}function Xt(e,t,r){if(t>r){let e=t;t=r,r=e}let n=e[t];n||(e[t]=n={}),n[r]=!0}function Jt(e,t,r){if(t>r){let e=t;t=r,r=e}return!!e[t]&&e[t].hasOwnProperty(r)}function Kt(e,t,r,n){let o={},i={},s={};return t.forEach((e=>{e.forEach(((e,t)=>{o[e]=e,i[e]=e,s[e]=t}))})),t.forEach((e=>{let t=-1;e.forEach((e=>{let a=n(e);if(a.length){a=a.sort(((e,t)=>s[e]-s[t]));let n=(a.length-1)/2;for(let d=Math.floor(n),h=Math.ceil(n);d<=h;++d){let n=a[d];i[e]===e&&t<s[n]&&!Jt(r,e,n)&&(i[n]=e,i[e]=o[e]=o[n],t=s[n])}}}))})),{root:o,align:i}}function $t(e,t,r,n,o){let i={},s=function(e,t,r,n){let o=new Wt,i=e.graph(),s=function(e,t,r){return(n,o,i)=>{let s,a=n.node(o),d=n.node(i),h=0;if(h+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=-a.width/2;break;case"r":s=a.width/2}if(s&&(h+=r?s:-s),s=0,h+=(a.dummy?t:e)/2,h+=(d.dummy?t:e)/2,h+=d.width/2,d.hasOwnProperty("labelpos"))switch(d.labelpos.toLowerCase()){case"l":s=d.width/2;break;case"r":s=-d.width/2}return s&&(h+=r?s:-s),s=0,h}}(i.nodesep,i.edgesep,n);return t.forEach((t=>{let n;t.forEach((t=>{let i=r[t];if(o.setNode(i),n){var a=r[n],d=o.edge(a,i);o.setEdge(a,i,Math.max(s(e,t,n),d||0))}n=t}))})),o}(e,t,r,o),a=o?"borderLeft":"borderRight";function d(e,t){let r=s.nodes(),n=r.pop(),o={};for(;n;)o[n]?e(n):(o[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return d((function(e){i[e]=s.inEdges(e).reduce(((e,t)=>Math.max(e,i[t.v]+s.edge(t))),0)}),s.predecessors.bind(s)),d((function(t){let r=s.outEdges(t).reduce(((e,t)=>Math.min(e,i[t.w]-s.edge(t))),Number.POSITIVE_INFINITY),n=e.node(t);r!==Number.POSITIVE_INFINITY&&n.borderType!==a&&(i[t]=Math.max(i[t],r))}),s.successors.bind(s)),Object.keys(n).forEach((e=>i[e]=i[r[e]])),i}function er(e,t){return Object.values(t).reduce(((t,r)=>{let n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;Object.entries(r).forEach((([t,r])=>{let i=function(e,t){return e.node(t).width}(e,t)/2;n=Math.max(r+i,n),o=Math.min(r-i,o)}));const i=n-o;return i<t[0]&&(t=[i,r]),t}),[Number.POSITIVE_INFINITY,null])[1]}function tr(e,t){let r=Object.values(t),n=Math.min(...r),o=Math.max(...r);["u","d"].forEach((r=>{["l","r"].forEach((i=>{let s=r+i,a=e[s];if(a===t)return;let d=Object.values(a),h=n-Math.min(...d);"l"!==i&&(h=o-Math.max(...d)),h&&(e[s]=Ht.mapValues(a,(e=>e+h)))}))}))}function rr(e,t){return Ht.mapValues(e.ul,((r,n)=>{if(t)return e[t.toLowerCase()][n];{let t=Object.values(e).map((e=>e[n])).sort(((e,t)=>e-t));return(t[1]+t[2])/2}}))}let nr=_e,or=Ut;let ir=Me,sr=Le,ar=st,dr=_e.normalizeRanks,hr=ht,ur=_e.removeEmptyRanks,cr=ct,lr=pt,fr={adjust:function(e){let t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||mt(e)},undo:function(e){let t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){e.nodes().forEach((t=>wt(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(wt),r.hasOwnProperty("y")&&wt(r)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){e.nodes().forEach((t=>Et(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.points.forEach(Et),r.hasOwnProperty("x")&&Et(r)}))}(e),mt(e))}},pr=Bt,gr=function(e){(function(e){let t=nr.buildLayerMatrix(e),r=e.graph().ranksep,n=0;t.forEach((t=>{const o=t.reduce(((t,r)=>{const n=e.node(r).height;return t>n?t:n}),0);t.forEach((t=>e.node(t).y=n+o/2)),n+=o+r}))})(e=nr.asNonCompoundGraph(e)),Object.entries(or(e)).forEach((([t,r])=>e.node(t).x=r))},mr=_e,vr=le.Graph;var wr=function(e,t){let r=t&&t.debugTiming?mr.time:mr.notime;r("layout",(()=>{let t=r("  buildLayoutGraph",(()=>function(e){let t=new vr({multigraph:!0,compound:!0}),r=Ir(e.graph());return t.setGraph(Object.assign({},br,Or(r,Er),mr.pick(r,yr))),e.nodes().forEach((r=>{const n=Or(Ir(e.node(r)),_r);Object.keys(Nr).forEach((e=>{void 0===n[e]&&(n[e]=Nr[e])})),t.setNode(r,n),t.setParent(r,e.parent(r))})),e.edges().forEach((r=>{let n=Ir(e.edge(r));t.setEdge(r,Object.assign({},jr,Or(n,kr),mr.pick(n,xr)))})),t}(e)));r("  runLayout",(()=>function(e,t){t("    makeSpaceForEdgeLabels",(()=>function(e){let t=e.graph();t.ranksep/=2,e.edges().forEach((r=>{let n=e.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(e))),t("    removeSelfEdges",(()=>function(e){e.edges().forEach((t=>{if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e))),t("    acyclic",(()=>ir.run(e))),t("    nestingGraph.run",(()=>cr.run(e))),t("    rank",(()=>ar(mr.asNonCompoundGraph(e)))),t("    injectEdgeLabelProxies",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.width&&r.height){let r=e.node(t.v),n={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};mr.addDummyNode(e,"edge-proxy",n,"_ep")}}))}(e))),t("    removeEmptyRanks",(()=>ur(e))),t("    nestingGraph.cleanup",(()=>cr.cleanup(e))),t("    normalizeRanks",(()=>dr(e))),t("    assignRankMinMax",(()=>function(e){let t=0;e.nodes().forEach((r=>{let n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Math.max(t,n.maxRank))})),e.graph().maxRank=t}(e))),t("    removeEdgeLabelProxies",(()=>function(e){e.nodes().forEach((t=>{let r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))}))}(e))),t("    normalize.run",(()=>sr.run(e))),t("    parentDummyChains",(()=>hr(e))),t("    addBorderSegments",(()=>lr(e))),t("    order",(()=>pr(e))),t("    insertSelfEdges",(()=>function(e){var t=mr.buildLayerMatrix(e);t.forEach((t=>{var r=0;t.forEach(((t,n)=>{var o=e.node(t);o.order=n+r,(o.selfEdges||[]).forEach((t=>{mr.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:n+ ++r,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))}(e))),t("    adjustCoordinateSystem",(()=>fr.adjust(e))),t("    position",(()=>gr(e))),t("    positionSelfEdges",(()=>function(e){e.nodes().forEach((t=>{var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),o=n.x+n.width/2,i=n.y,s=r.x-o,a=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:o+2*s/3,y:i-a},{x:o+5*s/6,y:i-a},{x:o+s,y:i},{x:o+5*s/6,y:i+a},{x:o+2*s/3,y:i+a}],r.label.x=r.x,r.label.y=r.y}}))}(e))),t("    removeBorderNodes",(()=>function(e){e.nodes().forEach((t=>{if(e.children(t).length){let r=e.node(t),n=e.node(r.borderTop),o=e.node(r.borderBottom),i=e.node(r.borderLeft[r.borderLeft.length-1]),s=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(s.x-i.x),r.height=Math.abs(o.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}})),e.nodes().forEach((t=>{"border"===e.node(t).dummy&&e.removeNode(t)}))}(e))),t("    normalize.undo",(()=>sr.undo(e))),t("    fixupEdgeLabelCoords",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);if(r.hasOwnProperty("x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(e))),t("    undoCoordinateSystem",(()=>fr.undo(e))),t("    translateGraph",(()=>function(e){let t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,o=0,i=e.graph(),s=i.marginx||0,a=i.marginy||0;function d(e){let i=e.x,s=e.y,a=e.width,d=e.height;t=Math.min(t,i-a/2),r=Math.max(r,i+a/2),n=Math.min(n,s-d/2),o=Math.max(o,s+d/2)}e.nodes().forEach((t=>d(e.node(t)))),e.edges().forEach((t=>{let r=e.edge(t);r.hasOwnProperty("x")&&d(r)})),t-=s,n-=a,e.nodes().forEach((r=>{let o=e.node(r);o.x-=t,o.y-=n})),e.edges().forEach((r=>{let o=e.edge(r);o.points.forEach((e=>{e.x-=t,e.y-=n})),o.hasOwnProperty("x")&&(o.x-=t),o.hasOwnProperty("y")&&(o.y-=n)})),i.width=r-t+s,i.height=o-n+a}(e))),t("    assignNodeIntersects",(()=>function(e){e.edges().forEach((t=>{let r,n,o=e.edge(t),i=e.node(t.v),s=e.node(t.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=s,n=i),o.points.unshift(mr.intersectRect(i,r)),o.points.push(mr.intersectRect(s,n))}))}(e))),t("    reversePoints",(()=>function(e){e.edges().forEach((t=>{let r=e.edge(t);r.reversed&&r.points.reverse()}))}(e))),t("    acyclic.undo",(()=>ir.undo(e)))}(t,r))),r("  updateInputGraph",(()=>function(e,t){e.nodes().forEach((r=>{let n=e.node(r),o=t.node(r);n&&(n.x=o.x,n.y=o.y,n.rank=o.rank,t.children(r).length&&(n.width=o.width,n.height=o.height))})),e.edges().forEach((r=>{let n=e.edge(r),o=t.edge(r);n.points=o.points,o.hasOwnProperty("x")&&(n.x=o.x,n.y=o.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)))}))};let Er=["nodesep","edgesep","ranksep","marginx","marginy"],br={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},yr=["acyclicer","ranker","rankdir","align"],_r=["width","height"],Nr={width:0,height:0},kr=["minlen","weight","width","height","labeloffset"],jr={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},xr=["labelpos"];function Or(e,t){return mr.mapValues(mr.pick(e,t),Number)}function Ir(e){var t={};return e&&Object.entries(e).forEach((([e,r])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=r})),t}let Cr=_e,Pr=le.Graph;const Mr=e({graphlib:le,layout:wr,debug:{debugOrdering:function(e){let t=Cr.buildLayerMatrix(e),r=new Pr({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach((t=>{r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)})),e.edges().forEach((e=>r.setEdge(e.v,e.w,{},e.name))),t.forEach(((e,t)=>{let n="layer"+t;r.setNode(n,{rank:"same"}),e.reduce(((e,t)=>(r.setEdge(e,t,{style:"invis"}),t)))})),r}},util:{time:_e.time,notime:_e.notime},version:"1.1.2"}),Tr={startNode:b,endNode:y,conditionNode:E,otherConditionNode:_,approvalNode:N,ccNode:k,handleNode:j},Lr={"custom-edge":m,"custom-del-edge":v,"custom-options-edge":w},Sr=e=>{a();const[s,m,v]=d([]),[w,E,b]=h([]),y=(new Mr.graphlib.Graph).setDefaultEdgeLabel((()=>({}))),_=(e,t)=>{const{nodes:r,edges:n}=(o=e,i=t,y.setGraph({rankdir:"TB",ranksep:100,nodesep:50}),o.forEach((e=>{y.setNode(e.id,{width:161,height:50})})),i.forEach((e=>{y.setEdge(e.source,e.target)})),Mr.layout(y),o.forEach((e=>{const t=y.node(e.id);return e.position={x:t.x-80.5,y:t.y-25},e})),{nodes:o,edges:i});var o,i;r.find((e=>1===e.data.level)),m([...r]),E([...n])},N=async()=>{const t=await x({processId:e.processId,processVersionId:e.processVersionId});let r=t.data.nodes.map(((e,t)=>({id:e.processPointId,data:{label:e.name,...e},type:e.type,draggable:!1,style:{backgroundColor:"#ac3131",border:"1px solid #222",borderRadius:"5px"},position:e.position}))),n=t.data.edges.map(((e,t)=>({id:e.processPointRelationId,source:e.source,target:e.target})));_(r,n)};r.useEffect((()=>{N()}),[]);return t.jsx(O.Provider,{value:{initData:N},children:t.jsxs(u,{nodes:s,edges:w,onNodesChange:v,onEdgesChange:b,connectionLineType:c.SmoothStep,defaultEdgeOptions:{animated:!0,type:"custom-options-edge"},nodeTypes:Tr,edgeTypes:Lr,fitView:!0,minZoom:.01,children:[t.jsx(l,{}),t.jsx(f,{pannable:!0}),t.jsx(p,{variant:"dots",gap:12,size:1}),t.jsx(g,{position:"top-left",children:t.jsx(n,{type:"primary",onClick:()=>{(async()=>{o?.confirm({title:"是否确认发布",content:"发布会这个流程将只针对新的申请才会生效，已经在审批中的流程不会受到影响",icon:null,onOk:async()=>{const t=await I({processId:e.processId});i(t)||e.close()}})})()},children:"发布"})})]})})};function Rr(e){return t.jsx("div",{style:{width:"95vw",height:"91vh"},children:t.jsx(s,{children:t.jsx(Sr,{processId:e.processId,processVersionId:e.processVersionId,close:e.close})})})}export{Rr as default};
