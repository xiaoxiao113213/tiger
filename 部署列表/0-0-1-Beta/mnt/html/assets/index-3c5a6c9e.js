import{r as e,O as t,j as a,P as s,D as r,T as o}from"./index-f2321b57.js";import{listOfPendingApprovals as i}from"./processInstanceApi-9883ba95.js";import{G as l}from"./ProcessInstanceStatusDic-a003601b.js";import n from"./detail-fcfe1c74.js";import"./dicApi-6905b9c5.js";import"./uilts-e16e3ac3.js";import"./index-26718f3e.js";import"./Bo-900708b2.js";import"./index-d54aef2b.js";import"./Approval-1aa18ed2.js";import"./Handler-16426a33.js";import"./pointList-358aeebe.js";import"./Timeline-170fea38.js";import"./index-b46dae5a.js";import"./index-55f4da4c.js";import"./index-e51db6e5.js";import"./EditOutlined-1e526840.js";const c=c=>{const d=e.useRef(),[p,u]=e.useState(t.close),[m,j]=e.useState(),{processInstanceStatusMap:x,processInstanceStatusList:y}=l(),h=e=>{j(e.processInstanceId),u(t.detail)};e.useEffect((()=>{"1"===c.tabId&&((async()=>{})(),d.current?.reload())}),[c.tabId]);const I=[{title:"ID",dataIndex:"processInstanceId",valueType:"text",copyable:!1,search:!1},{title:"标题",dataIndex:"title",valueType:"text",copyable:!1,search:!1,render:(e,t)=>a.jsx("a",{onClick:()=>h(t),children:t.title})},{title:"status",dataIndex:"status",valueType:"text",copyable:!1,search:!1,render:(e,{status:t})=>{let s=y.find((e=>e.value===t));return a.jsxs(o,{color:s?.color,children:[" ",s?.label,"  "]})}},{title:"申请时间",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"申请人",dataIndex:"createBy",valueType:"text",copyable:!1,search:!1,render:(e,t)=>t.createByAccount.account},{title:"结束时间",dataIndex:"endTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,t,s,r)=>[a.jsx("a",{onClick:()=>h(t),children:"详情"},"detail")]}];return a.jsxs("div",{children:[a.jsx(s,{columns:I,actionRef:d,cardBordered:!0,params:{},request:async(e={},t,a)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},r=await i({...e,...s});return{data:r.data.list,success:1e3===r.code,total:r.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"processInstance-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processInstanceId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[]}),a.jsx(r,{title:"详情",open:p!==t.close,width:"85%",destroyOnClose:!0,maskClosable:!1,onClose:()=>u(t.close),footer:null,children:a.jsx(n,{detailId:m})})]})};export{c as default};
