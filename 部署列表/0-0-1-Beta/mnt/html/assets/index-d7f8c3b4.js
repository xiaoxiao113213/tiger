import{r as e,O as a,j as t,P as o,B as s,a3 as d,D as i,M as r,c as l,m as n}from"./index-f2321b57.js";import p from"./detail-aff93799.js";import c from"./addOrUpdate-8883a880.js";import{databaseBoardPageApi as m,databaseBoardDeleteApi as j,copyBoardApi as u}from"./api-902e4084.js";import{M as x}from"./MysqlTypeDic-b22f7053.js";import b from"./index-696005bf.js";import{P as y}from"./PlusOutlined-0e19b652.js";import"./index-55f4da4c.js";import"./index-e51db6e5.js";import"./index-d54aef2b.js";import"./EditOutlined-1e526840.js";import"./dicApi-6905b9c5.js";import"./TableNode-896cec27.js";import"./KeyIcon-705f1cf8.js";import"./TextNode-196b3caa.js";import"./index-da2797ee.js";import"./api-caa83fd4.js";import"./TableTag-260746a0.js";import"./AddOrUpdateTable-ea6766f9.js";import"./AddOrUpdateTableField-4bab6dba.js";/* empty css                 */import"./fieldRow-ff33d2a2.js";import"./DeleteOutlined-10e7bcc5.js";import"./AddOrUpdateIndex-e86b21cf.js";import"./indexRow-1e521494.js";import"./MoreOutlined-609bba84.js";import"./MoreOutlined-49b0b054.js";import"./MaximizeIcon-13149026.js";import"./MinimizeIcon-c212ae8e.js";/* empty css              */import"./DefaultTableField-ad3d49ce.js";import"./TableFieldForm-f6535f87.js";import"./core.esm-1c73d5d6.js";import"./DdlFromDatabase-89ee2c3c.js";import"./api-6611f720.js";import"./index-b1840bba.js";import"./CompareFromDatabase-df3d26b2.js";import"./BatchUpdateColor-3d716a92.js";import"./TableOutlined-67e609f9.js";import"./DownOutlined-ffa5ede0.js";import"./SearchOutlined-8e8ecbf1.js";const h=()=>{const h=e.useRef(),[f,T]=e.useState(a.close),[B,C]=e.useState(),[O,I]=e.useState(),[g,k]=e.useState(a.close),[w,M]=e.useState(a.close),{MysqlTypeMap:S}=x(),v=e=>{C(e?.databaseBoardId),I(e?.name),k(e?a.edit:a.add)};e.useEffect((()=>{}),[]);const F=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"备注",dataIndex:"remarks",valueType:"text",copyable:!1,search:!1},{title:"createTime",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"updateTime",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:250,render:(e,o,s,i)=>[t.jsx("a",{onClick:()=>(e=>{C(e?.databaseBoardId),I(e?.name),M(e?a.edit:a.add)})(o),hidden:d("databaseBoard:list"),children:"画板"},"edit13"),t.jsx("a",{onClick:()=>v(o),hidden:d("databaseBoard:edit"),children:"编辑"},"edit2"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认复制",icon:null,onOk:async()=>{let a=await u({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:edit"),children:"复制"},"copy"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let a=await j({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:del"),children:"删除"},"del1")]}];return t.jsxs("div",{children:[t.jsx(o,{columns:F,actionRef:h,cardBordered:!0,params:{},request:async(e={},a,t)=>{let o={pageNum:e.current,pageSize:e.pageSize,pageSort:a},s=await m({...e,...o});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"databaseBoard-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"databaseBoardId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[t.jsx(s,{icon:t.jsx(y,{}),onClick:()=>{v()},type:"primary",hidden:d("databaseBoard:edit"),children:"新建"},"button")]}),t.jsx(i,{title:"配置详情",open:f!==a.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>T(a.close),footer:null,children:t.jsx("div",{children:t.jsx(p,{detailId:B})})}),t.jsx(i,{title:g===a.edit?"配置编辑":"配置新增",open:g!==a.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>k(a.close),footer:null,children:t.jsx("div",{children:t.jsx(c,{detailId:B??0,operateEnum:g,setAddOrUpdateModalFn:k,reloadTable:()=>{h.current?.reload()}})})}),t.jsx(i,{title:"编辑画板     "+O,open:w!==a.close,width:"100%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{M(a.close)},footer:null,children:t.jsx("div",{children:t.jsx(b,{databaseBoardId:B,MysqlTypeMap:S,closeBoardModalFn:()=>{M(a.close)}})})})]})};export{h as default};
