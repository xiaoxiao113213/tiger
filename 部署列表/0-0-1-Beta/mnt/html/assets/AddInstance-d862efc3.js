import{F as s,ad as e,r as t,j as i,ab as r,B as o,c as a,m as l}from"./index-03adb9ee.js";import{getCanSubmitProcessApi as c}from"./processApi-c91a24f3.js";import{serverToClientValue as d,clientToServerValue as m}from"./Bo-c1a8a5bb.js";import n from"./submitNowform-fbdcf9ab.js";import{processInstanceSaveApi as p}from"./processInstanceApi-c6750744.js";import{D as j}from"./index-a2b78009.js";import"./textSubmit-bd6c5b40.js";import"./textAreaSubmit-3b52d66b.js";import"./SelectSubmit-4c180fb2.js";import"./MutSelectSubmit-064a257d.js";import"./DateSubmit-95284b79.js";import"./NumberSubmit-77884c9b.js";import"./FileUploadSubmit-e8f92bb2.js";import"./PlusOutlined-b4032aa8.js";const f=f=>{const[u]=s.useForm(),x=e(),[h,b]=t.useState({fieldList:[]});t.useEffect((()=>{(async()=>{c({processId:f.processId}).then((s=>{s.data.fieldList.forEach((s=>{d(s)})),b(s.data)}))})()}),[]);const y=[{key:"1",label:"申请人",children:x.nickName}];return i.jsxs("div",{children:[i.jsx(j,{title:"申请流程",items:y}),i.jsx(r,{children:"表单"}),i.jsx(s,{form:u,labelCol:{span:3},children:h.fieldList.map(((s,e)=>i.jsx("div",{style:{display:"flex"},children:i.jsx("span",{style:{flex:20},children:i.jsx(n,{initFieldBo:s})})},e)))}),i.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[i.jsx(o,{type:"primary",onClick:async()=>{if(!(await u.validateFields().catch((()=>!1))))return;const s=await u.getFieldsValue();h.fieldList.forEach((e=>{m(e,s)}));const e=await p({processId:f.processId,processVersionId:h.processVersionId,values:s});a(e)||(l.success("提交成功"),f.closeModal())},children:"提交"}),i.jsx(o,{style:{marginLeft:"20px"},onClick:f.closeModal,children:"取消"})]})]})};export{f as default};
