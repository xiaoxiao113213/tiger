import{F as e,r as a,d as l,j as s,I as r,S as t,B as d,O as i,Y as n,m as o}from"./index-52537ad8.js";import{databaseConfigGetOneApi as c,databaseConfigUpdateApi as m,databaseConfigSaveApi as p}from"./api-6cddda11.js";const u=u=>{const[x]=e.useForm(),[h,j]=a.useState(l);return a.useEffect((()=>((async()=>{if(u.operateEnum===i.edit){let e=await c({databaseConfigId:u.detailId});j(e.data),x.setFieldsValue(e.data)}else x.setFieldsValue(l())})(),()=>{})),[]),s.jsx("div",{children:s.jsxs(e,{form:x,labelCol:{flex:"10%"},wrapperCol:{flex:"90%"},children:[s.jsx(e.Item,{label:"名称",name:"name",rules:[{required:!0}],children:s.jsx(r,{placeholder:"请输入"})}),s.jsx(e.Item,{label:"类型",name:"type",rules:[{required:!0}],children:s.jsx(t,{placeholder:"请输入",options:u.DatabaseTypeList})}),s.jsx(e.Item,{label:"连接地址",name:"ip",rules:[{required:!0}],children:s.jsx(r,{placeholder:"请输入"})}),s.jsx(e.Item,{label:"端口号",name:"port",rules:[{required:!0}],children:s.jsx(r,{placeholder:"请输入"})}),s.jsx(e.Item,{label:"用户名",name:"username",rules:[{required:!0}],children:s.jsx(r,{placeholder:"请输入"})}),s.jsx(e.Item,{label:"密码",name:"password",rules:[{required:!0}],children:s.jsx(r.Password,{placeholder:"请输入"})}),s.jsx(e.Item,{label:"备注",name:"remarks",rules:[{required:!0}],children:s.jsx(r.TextArea,{placeholder:"请输入"})}),s.jsxs(e.Item,{wrapperCol:{offset:8,span:16},style:{textAlign:"right"},children:[s.jsx(d,{type:"default",onClick:()=>{u.setAddOrUpdateModalFn(i.close)},style:{marginRight:20},children:"取消"}),s.jsx(d,{type:"primary",onClick:async()=>{if(!(await x.validateFields().catch((()=>!1))))return;const e=await(x?.getFieldsValue());let a;n(e),a=u.operateEnum===i.edit?await m({...e,databaseConfigId:u.detailId}):await p({...e}),1e3===a.code&&(o.success(a.msg),u.reloadTable(),u.setAddOrUpdateModalFn(i.close))},children:"确定"})]})]})})};export{u as default};
