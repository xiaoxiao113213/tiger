import{F as e,r as t,j as a,e as i,f as n,I as s,b as r,S as d}from"./index-f2321b57.js";import{C as l,V as o}from"./ApiBo-06fcdbd2.js";import{aiPipelinePointVarUpdateApi as m,aiPipelinePointVarSaveApi as p,aiPipelinePointVarDeleteApi as x}from"./varApi-9218bc07.js";import{D as c}from"./DeleteOutlined-10e7bcc5.js";const g=g=>{const{point:u,inputVarList:y,getDetail:h}=g,[j]=e.useForm(),[I,f]=t.useState();t.useEffect((()=>{u&&f(u.varList.filter((e=>e.category==l.Output)).map(((e,t)=>({key:e.aiPipelinePointVarId.toString(),name:e.name,type:e.type,remarks:e.remarks}))))}),[u]),t.useEffect((()=>{const e={};for(let t in I)e[I[t].key+"_name"]=I[t].name,e[I[t].key+"_type"]=I[t].type,e[I[t].key+"_remarks"]=I[t].remarks;j.setFieldsValue(e)}),[I]);const k=[{title:"变量名",dataIndex:"name",width:"180px",editable:!0},{title:"变量类型",dataIndex:"type",width:"130px",editable:!0},{title:"描述",dataIndex:"remarks",editable:!0},{title:"",dataIndex:"operation",width:"30px",render:(e,t)=>"historyMsg"===t.name||"newMsg"===t.name?a.jsx(a.Fragment,{}):a.jsx("div",{children:a.jsx(c,{hidden:I&&I.length<=1,onClick:()=>(async e=>{await x({aiPipelinePointVarId:parseInt(e.key)}),g.getDetail()})(t)})})}].map((e=>{if(!e.editable)return e;let t="text";"type"===e.dataIndex&&(t="select"),"remarks"===e.dataIndex&&(t="textArea");return{...e,onCell:a=>({record:a,inputType:t,dataIndex:e.dataIndex,title:e.title,editing:!0})}}));return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",marginBottom:"5px"},children:[a.jsx("div",{children:"输出参数设置："}),a.jsx("div",{style:{marginRight:"30px"},children:a.jsx("a",{onClick:()=>(async()=>{await p({aiPipelinePointId:u.aiPipelinePointId,name:n(),type:"string",remarks:"",category:l.Output}),g.getDetail()})(),children:a.jsx("img",{src:"/icons/加号.svg",alt:"icon",style:{width:16,height:16,display:"inline",marginRight:"5px"}})})})]}),a.jsx(e,{form:j,component:!1,onValuesChange:(e,t)=>{for(let a in e){const t=a.split("_"),i=t[0],n=t[1],s=e[a],r={aiPipelinePointVarId:parseInt(i),[n]:s,keyName:n};m(r)}},children:a.jsx(i,{components:{body:{cell:({editing:t,dataIndex:i,title:n,inputType:l,record:m,index:p,children:x,...c})=>{if("变量名"==n)return a.jsx("td",{...c,children:t?a.jsx(e.Item,{name:`${m.key}_${i}`,style:{margin:0},rules:[{required:!0,message:`请输入 ${n}！只能输入英文字符和数字，且以英文字符开头。`},{pattern:/^[a-zA-Z][a-zA-Z0-9]*$/,message:"只能输入英文字符和数字，且以英文字符开头。"}],children:a.jsx(s,{maxLength:20,showCount:!0})}):x});let g="number"===l?a.jsx(r,{}):a.jsx(s,{maxLength:20,showCount:!0});return"select"===l&&(g=a.jsx(d,{options:o})),"textArea"===l&&(g=a.jsx(s.TextArea,{})),a.jsx("td",{...c,children:t?a.jsx(e.Item,{name:m.key+"_"+i,style:{margin:0},rules:[{required:!1,message:`Please Input ${n}!`}],children:g}):x})}}},bordered:!0,dataSource:I,columns:k,rowClassName:"editable-row",pagination:!1})})]})};export{g as default};
