import{r as e,O as t,j as o,P as s,B as i,a3 as r,D as d,T as l,M as a,c as p,m as n}from"./index-10719960.js";import m from"./detail-66938e68.js";import c from"./addOrUpdate-41417711.js";import{processPageApi as j,processDeleteApi as u}from"./processApi-c938a5c9.js";import x from"./ProcessEdit-0eb2af86.js";import{P as h}from"./PlusOutlined-cc4f568a.js";import"./index-4b23e8f2.js";import"./index-30b704bf.js";import"./index-be16395f.js";import"./EditOutlined-34dfcda0.js";import"./index-c05d5723.js";import"./Title-5ea514a5.js";import"./Input-f4f01092.js";import"./TextArea-8948f20d.js";import"./Password-88bd354d.js";import"./QRCodeSVG-ffc224cf.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-2a2025c5.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./index-937e9b10.js";/* empty css              */import"./CustomEdge-77c7d8ef.js";import"./CustomDelEdge-b52b085c.js";import"./CustomOptionsEdge-c8451035.js";import"./uilts-00b5353e.js";import"./pointApi-99d1ac8e.js";import"./ConditionNode-167e370d.js";/* empty css                          */import"./ConditionNodeEdit-aef82e34.js";import"./Bo-bcadefc8.js";import"./EditTwoTone-e688f6e0.js";import"./RightCircleTwoTone-3aded87c.js";import"./StartNode-829b982c.js";import"./StartNodeEdit-59012216.js";import"./api-5bb72ee6.js";import"./formComponent-402c7b18.js";import"./index-fb93998c.js";import"./textSubmit-5aad76e3.js";import"./textAreaSubmit-e3064045.js";import"./SelectSubmit-fba154f7.js";import"./MutSelectSubmit-7d2986fa.js";import"./FileSubmit-52898802.js";import"./DateSubmit-7b5457eb.js";import"./NumberSubmit-61c4b5e2.js";import"./customerFieldNew-bd52e5d5.js";import"./customerText-ab37e497.js";import"./customerTextArea-fdf43c64.js";import"./customerSelect-0b789148.js";import"./MinusCircleOutlined-f32dd4d0.js";import"./customerMutSelect-2ed19145.js";import"./CustomerFile-b6b47294.js";import"./CustomerDate-c212afd9.js";import"./customerNumber-f42eabd0.js";import"./DeleteOutlined-91444ec2.js";import"./EndNode-6efb8ffe.js";import"./EndNodeEdit-ccdfd0df.js";import"./api-990bd395.js";import"./OtherConditionNode-22c327ee.js";import"./ApprovalNode-2236dc43.js";import"./ApprovalNodeEdit-6c5c0529.js";import"./CcNode-eae00b04.js";import"./CcNodeEdit-abe9b8e3.js";import"./HandleNode-63f51627.js";import"./HandleNodeEdit-13c25551.js";const C=()=>{const C=e.useRef(),[S,y]=e.useState(t.close),[T,b]=e.useState(),[f,O]=e.useState(),[g,I]=e.useState(t.close),[w,v]=e.useState(t.close),E=e=>{b(e?.processId),I(e?t.edit:t.add)},N=()=>{C.current?.reload()};e.useEffect((()=>{}),[]);const k=[{title:"流程ID",dataIndex:"processId",valueType:"text",copyable:!1,search:!1},{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"状态",dataIndex:"disabled",valueType:"text",copyable:!1,search:!1,render:(e,{disabled:t})=>0===t?o.jsx(l,{color:"green",children:"启用"}):o.jsx(l,{color:"red",children:"禁用"})},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"更新人",dataIndex:"updateBy",valueType:"text",copyable:!1,search:!1,render:(e,{updateByAccount:t})=>t.account},{title:"操作",valueType:"option",key:"option",width:180,render:(e,s,i,d)=>[o.jsx("a",{onClick:()=>(e=>{b(e.processId),y(t.detail)})(s),children:"详情"},"detail"),o.jsx("a",{onClick:()=>E(s),hidden:r("approvalSet:edit"),children:"编辑"},"edit"),o.jsx("a",{onClick:()=>(e=>{b(e?.processId),O(e),v(t.edit)})(s),hidden:r("approvalSet:edit"),children:"配置流程"},"config"),o.jsx("a",{onClick:()=>(async e=>{a?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await u({processId:e.processId});p(t)||(n.success(t.msg),C.current?.reload())}})})(s),hidden:r("approvalSet:del"),children:"删除"},"del")]}];return o.jsxs("div",{children:[o.jsx(s,{columns:k,actionRef:C,cardBordered:!0,params:{},request:async(e={},t,o)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},i=await j({...e,...s});return{data:i.data.list,success:1e3===i.code,total:i.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"process-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[o.jsx(i,{icon:o.jsx(h,{}),onClick:()=>{E()},type:"primary",hidden:r("approvalSet:edit"),children:"新建"},"button")]}),o.jsx(d,{title:"配置详情",open:S!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>y(t.close),footer:null,children:o.jsx("div",{children:o.jsx(m,{detailId:T})})}),o.jsx(d,{title:g==t.edit?"配置编辑":"配置新增",open:g!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>I(t.close),footer:null,children:o.jsx("div",{children:o.jsx(c,{detailId:T??0,operateEnum:g,setAddOrUpdateModalFn:I,reloadTable:N})})}),o.jsx(d,{title:"配置流程",open:w!==t.close,width:"98%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{v(t.close),N()},footer:null,children:o.jsx("div",{children:o.jsx(x,{processId:T,processVersionId:f?.processVersionId,close:()=>{v(t.close),N()}})})})]})};export{C as default};
