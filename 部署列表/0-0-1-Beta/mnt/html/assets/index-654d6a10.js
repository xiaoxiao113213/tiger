import{r as e,O as t,j as a,P as s,aP as i,B as l,a3 as o,D as d,T as n,M as r,aQ as c,c as p,m}from"./index-f2321b57.js";import u from"./detail-2fff59e6.js";import y from"./addOrUpdate-a8c27002.js";import{G as x}from"./SystemConfigTypeDic-7405fea0.js";import{P as j}from"./PlusOutlined-0e19b652.js";import"./index-55f4da4c.js";import"./index-e51db6e5.js";import"./index-d54aef2b.js";import"./EditOutlined-1e526840.js";import"./dicApi-6905b9c5.js";const h=()=>{const h=e.useRef(),[f,g]=e.useState(t.close),[C,S]=e.useState(),[T,b]=e.useState(t.close);let{SystemConfigTypeValueEnum:k,SystemConfigTypeMap:v}=x();const w=e=>{S(e?.id),b(e?t.edit:t.add)};e.useEffect((()=>{}),[]);const O=[{title:"类型",dataIndex:"type",valueType:"text",copyable:!1,width:100,render:(e,{type:t})=>{let s=v.get(t);return a.jsxs(n,{color:s?.color,children:[" ",s?.label,"  "]})}},{title:"配置key",dataIndex:"key",valueType:"text",copyable:!1},{title:"配置值",dataIndex:"value",valueType:"text",copyable:!1},{title:"配置描述",dataIndex:"remarks",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:120,render:(e,s,i,l)=>[a.jsx("a",{onClick:()=>(e=>{S(e.id),g(t.detail)})(s),children:"详情"},"detail"),a.jsx("a",{onClick:()=>w(s),hidden:o("systemConfig:edit"),children:"编辑"},"edit"),a.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await c({id:e.id});p(t)||(m.success(t.msg),h.current?.reload())}})})(s),hidden:o("systemConfig:del"),children:"删除"},"del")]}];return a.jsxs("div",{children:[a.jsx(s,{columns:O,actionRef:h,cardBordered:!0,params:{},request:async(e={},t,a)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},l=await i({...e,...s});return{data:l.data.list,success:1e3===l.code,total:l.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"systemConfig-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[a.jsx(l,{icon:a.jsx(j,{}),onClick:()=>{w()},type:"primary",hidden:o("systemConfig:edit"),children:"新建"},"button")]}),a.jsx(d,{title:"配置详情",open:f!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>g(t.close),footer:null,children:a.jsx("div",{children:a.jsx(u,{detailId:C})})}),a.jsx(d,{title:T==t.edit?"配置编辑":"配置新增",open:T!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>b(t.close),footer:null,children:a.jsx("div",{children:a.jsx(y,{detailId:C??0,operateEnum:T,setAddOrUpdateModalFn:b,reloadTable:()=>{h.current?.reload()}})})})]})};export{h as default};
