import{r as e,j as l,a7 as i,S as s,B as t,a8 as r,m as a}from"./index-f2321b57.js";import{l as o}from"./index-20d3ffb0.js";import{deptPageApi as p}from"./api-df708061.js";import{roleAllApi as n}from"./api-5c5bfeed.js";import{pipelinePermissionGetApi as d,pipelinePermissionUpdateApi as m}from"./pipeline-69e8b66b.js";import"./Title-c989167c.js";import"./Input-f009b856.js";import"./TextArea-47627076.js";import"./Password-38003184.js";import"./QRCodeSVG-f82b9ee5.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-c8d13b2f.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";const u=u=>{const[j]=o.Form.useForm(),[c,h]=e.useState([]),[x,w]=e.useState([]),[F,f]=e.useState([]);e.useEffect((()=>{(async()=>{p({}).then((e=>{h(e.data)})),r().then((e=>{w(e.data)})),n({}).then((e=>{f(e.data)})),d({pipelineId:u.pipelineId}).then((e=>{j.setFieldsValue(e.data)}))})()}),[]);return l.jsxs("div",{children:[l.jsx("h1",{style:{color:"blue"},children:"项目人员设置"}),l.jsxs("div",{children:[l.jsxs(o.Form,{form:j,children:[l.jsx(o.Form.Item,{label:"部门（选中之后，只有直属这个部门的人才有效，子部门需要单独选）",name:"deptIds",rules:[{required:!1}],labelCol:{span:24},wrapperCol:{span:24},children:l.jsx(i,{style:{width:"100%"},placeholder:"请选择部门",treeDefaultExpandAll:!0,fieldNames:{label:"name",value:"id"},treeData:c,multiple:!0,showSearch:!0,treeNodeFilterProp:"name"})}),l.jsx(o.Form.Item,{label:"人员",name:"userIds",rules:[{required:!1}],labelCol:{span:24},wrapperCol:{span:24},children:l.jsx(s,{style:{width:"100%"},mode:"multiple",showSearch:!0,optionFilterProp:"label",placeholder:"请选择人员",options:x})}),l.jsx(o.Form.Item,{label:"角色",name:"roleIds",rules:[{required:!1}],labelCol:{span:24},wrapperCol:{span:24},children:l.jsx(s,{style:{width:"100%"},mode:"multiple",showSearch:!0,optionFilterProp:"name",fieldNames:{label:"name",value:"id"},placeholder:"请选择角色",options:F})})]}),l.jsx("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:l.jsx(t,{type:"primary",onClick:async()=>{if(!(await j.validateFields().catch((()=>!1))))return;const e=await j.getFieldsValue();await m({...e,pipelineId:u.pipelineId}),a.success("保存成功"),u.closeFn()},children:"保存"})})]})]})};export{u as default};
