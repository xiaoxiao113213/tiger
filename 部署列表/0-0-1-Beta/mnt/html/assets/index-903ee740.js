import{r as e,O as t,j as o,P as s,B as i,a3 as r,D as d,T as l,M as a,c as p,m as n}from"./index-03adb9ee.js";import m from"./detail-5523ace7.js";import c from"./addOrUpdate-0f49996d.js";import{processPageApi as j,processDeleteApi as u}from"./processApi-c91a24f3.js";import x from"./ProcessEdit-aebfef50.js";import{P as h}from"./PlusOutlined-b4032aa8.js";import"./index-88ad5331.js";import"./index-3585a1a3.js";import"./index-a2b78009.js";import"./EditOutlined-d7a61630.js";import"./index-60bf4ee0.js";import"./Title-06decefc.js";import"./Input-51214805.js";import"./TextArea-24b2fc1a.js";import"./Password-e510335b.js";import"./QRCodeSVG-6b187ce2.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-01c99cd9.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./index-19b1aa5f.js";/* empty css              */import"./CustomEdge-2d54cc04.js";import"./CustomDelEdge-11b04ba9.js";import"./CustomOptionsEdge-b89b89ec.js";import"./uilts-8b8185ea.js";import"./pointApi-d758e390.js";import"./ConditionNode-48b8bb07.js";/* empty css                          */import"./ConditionNodeEdit-551df730.js";import"./Bo-c1a8a5bb.js";import"./EditTwoTone-4766d4eb.js";import"./RightCircleTwoTone-23a56810.js";import"./StartNode-4127d250.js";import"./StartNodeEdit-95b4b40b.js";import"./api-993dce33.js";import"./formComponent-661a5f6d.js";import"./index-dc46b847.js";import"./textSubmit-bd6c5b40.js";import"./textAreaSubmit-3b52d66b.js";import"./SelectSubmit-4c180fb2.js";import"./MutSelectSubmit-064a257d.js";import"./FileSubmit-a73b537e.js";import"./DateSubmit-95284b79.js";import"./NumberSubmit-77884c9b.js";import"./customerFieldNew-4c66ff92.js";import"./customerText-d905b3cb.js";import"./customerTextArea-b54e4aae.js";import"./customerSelect-ae4ebf75.js";import"./MinusCircleOutlined-ad177d4a.js";import"./customerMutSelect-fbe47964.js";import"./CustomerFile-75bdcaec.js";import"./CustomerDate-852678e3.js";import"./customerNumber-dffe68a9.js";import"./DeleteOutlined-2f949a39.js";import"./EndNode-46b5b1fb.js";import"./EndNodeEdit-2d813c7b.js";import"./api-313fc500.js";import"./OtherConditionNode-c4b0813d.js";import"./ApprovalNode-96e8490f.js";import"./ApprovalNodeEdit-33e9adff.js";import"./CcNode-ad198b5b.js";import"./CcNodeEdit-03ccf724.js";import"./HandleNode-7a354757.js";import"./HandleNodeEdit-081593b4.js";const C=()=>{const C=e.useRef(),[S,y]=e.useState(t.close),[T,b]=e.useState(),[f,O]=e.useState(),[g,I]=e.useState(t.close),[w,v]=e.useState(t.close),E=e=>{b(e?.processId),I(e?t.edit:t.add)},N=()=>{C.current?.reload()};e.useEffect((()=>{}),[]);const k=[{title:"流程ID",dataIndex:"processId",valueType:"text",copyable:!1,search:!1},{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"状态",dataIndex:"disabled",valueType:"text",copyable:!1,search:!1,render:(e,{disabled:t})=>0===t?o.jsx(l,{color:"green",children:"启用"}):o.jsx(l,{color:"red",children:"禁用"})},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"更新人",dataIndex:"updateBy",valueType:"text",copyable:!1,search:!1,render:(e,{updateByAccount:t})=>t.account},{title:"操作",valueType:"option",key:"option",width:180,render:(e,s,i,d)=>[o.jsx("a",{onClick:()=>(e=>{b(e.processId),y(t.detail)})(s),children:"详情"},"detail"),o.jsx("a",{onClick:()=>E(s),hidden:r("approvalSet:edit"),children:"编辑"},"edit"),o.jsx("a",{onClick:()=>(e=>{b(e?.processId),O(e),v(t.edit)})(s),hidden:r("approvalSet:edit"),children:"配置流程"},"config"),o.jsx("a",{onClick:()=>(async e=>{a?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await u({processId:e.processId});p(t)||(n.success(t.msg),C.current?.reload())}})})(s),hidden:r("approvalSet:del"),children:"删除"},"del")]}];return o.jsxs("div",{children:[o.jsx(s,{columns:k,actionRef:C,cardBordered:!0,params:{},request:async(e={},t,o)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},i=await j({...e,...s});return{data:i.data.list,success:1e3===i.code,total:i.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"process-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[o.jsx(i,{icon:o.jsx(h,{}),onClick:()=>{E()},type:"primary",hidden:r("approvalSet:edit"),children:"新建"},"button")]}),o.jsx(d,{title:"配置详情",open:S!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>y(t.close),footer:null,children:o.jsx("div",{children:o.jsx(m,{detailId:T})})}),o.jsx(d,{title:g==t.edit?"配置编辑":"配置新增",open:g!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>I(t.close),footer:null,children:o.jsx("div",{children:o.jsx(c,{detailId:T??0,operateEnum:g,setAddOrUpdateModalFn:I,reloadTable:N})})}),o.jsx(d,{title:"配置流程",open:w!==t.close,width:"98%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{v(t.close),N()},footer:null,children:o.jsx("div",{children:o.jsx(x,{processId:T,processVersionId:f?.processVersionId,close:()=>{v(t.close),N()}})})})]})};export{C as default};
