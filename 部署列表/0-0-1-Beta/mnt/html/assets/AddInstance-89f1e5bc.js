import{F as s,ad as e,r as t,j as i,ab as r,B as o,c as a,m as l}from"./index-52537ad8.js";import{getCanSubmitProcessApi as c}from"./processApi-46ba1e32.js";import{serverToClientValue as d,clientToServerValue as m}from"./Bo-cc27e439.js";import n from"./submitNowform-370ac6e7.js";import{processInstanceSaveApi as p}from"./processInstanceApi-5b2286a5.js";import{D as j}from"./index-ec1d06fe.js";import"./textSubmit-f698ce92.js";import"./textAreaSubmit-9cc0fcd3.js";import"./SelectSubmit-a0546f42.js";import"./MutSelectSubmit-978c5f1c.js";import"./DateSubmit-7515399a.js";import"./NumberSubmit-d54ed6cf.js";import"./FileUploadSubmit-1e28b47f.js";import"./PlusOutlined-0403edcb.js";const f=f=>{const[u]=s.useForm(),x=e(),[h,b]=t.useState({fieldList:[]});t.useEffect((()=>{(async()=>{c({processId:f.processId}).then((s=>{s.data.fieldList.forEach((s=>{d(s)})),b(s.data)}))})()}),[]);const y=[{key:"1",label:"申请人",children:x.nickName}];return i.jsxs("div",{children:[i.jsx(j,{title:"申请流程",items:y}),i.jsx(r,{children:"表单"}),i.jsx(s,{form:u,labelCol:{span:3},children:h.fieldList.map(((s,e)=>i.jsx("div",{style:{display:"flex"},children:i.jsx("span",{style:{flex:20},children:i.jsx(n,{initFieldBo:s})})},e)))}),i.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[i.jsx(o,{type:"primary",onClick:async()=>{if(!(await u.validateFields().catch((()=>!1))))return;const s=await u.getFieldsValue();h.fieldList.forEach((e=>{m(e,s)}));const e=await p({processId:f.processId,processVersionId:h.processVersionId,values:s});a(e)||(l.success("提交成功"),f.closeModal())},children:"提交"}),i.jsx(o,{style:{marginLeft:"20px"},onClick:f.closeModal,children:"取消"})]})]})};export{f as default};
