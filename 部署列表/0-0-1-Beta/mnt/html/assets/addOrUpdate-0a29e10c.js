import{F as e,r as l,d as a,j as r,I as s,R as d,B as i,O as t,Y as n,m as c}from"./index-52537ad8.js";import{pipelineNodeGetOneApi as o,pipelineNodeUpdateApi as u,pipelineNodeSaveApi as m}from"./api-222992e2.js";const x=x=>{const[h]=e.useForm(),[j,p]=l.useState(a);return l.useEffect((()=>((async()=>{if(x.operateEnum===t.edit){let e=await o({id:x.detailId});p(e.data),h.setFieldsValue(e.data)}else h.setFieldsValue(a())})(),()=>{})),[]),r.jsx("div",{children:r.jsxs(e,{form:h,labelCol:{flex:"10%"},wrapperCol:{flex:"90%"},children:[r.jsx(e.Item,{label:"name",name:"name",rules:[{required:!0}],children:r.jsx(s,{placeholder:"请输入"})}),r.jsx(e.Item,{label:"标签",name:"label",rules:[{required:!0}],children:r.jsx(s,{placeholder:"请输入"})}),r.jsx(e.Item,{label:"工作目录",name:"workDir",rules:[{required:!0}],children:r.jsx(s,{placeholder:"请输入"})}),r.jsx(e.Item,{label:"描述",name:"desc",rules:[{required:!0}],children:r.jsx(s,{placeholder:"请输入"})}),r.jsx(e.Item,{label:"是否禁用",name:"disabled",rules:[{required:!0}],children:r.jsxs(d.Group,{children:[r.jsx(d,{value:0,children:" 启用 "}),r.jsx(d,{value:1,children:" 禁用 "})]})}),r.jsx(e.Item,{label:"并行工作数量",name:"workNum",rules:[{required:!0}],children:r.jsx(s,{placeholder:"请输入"})}),r.jsx(e.Item,{label:"优先级",name:"priority",rules:[{required:!0}],children:r.jsx(s,{placeholder:"请输入"})}),r.jsxs(e.Item,{wrapperCol:{offset:8,span:16},style:{textAlign:"right"},children:[r.jsx(i,{type:"default",onClick:()=>{x.setAddOrUpdateModalFn(t.close)},style:{marginRight:20},children:"取消"}),r.jsx(i,{type:"primary",onClick:async()=>{if(!(await h.validateFields().catch((()=>!1))))return;const e=await(h?.getFieldsValue());let l;n(e),l=x.operateEnum===t.edit?await u({...e,id:x.detailId}):await m({...e}),1e3===l.code&&(c.success(l.msg),x.reloadTable(),x.setAddOrUpdateModalFn(t.close))},children:"确定"})]})]})})};export{x as default};
