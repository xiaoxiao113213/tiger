import{F as e,r as a,j as i,I as l,R as s,S as t,B as d}from"./index-f2321b57.js";import{aiChatGetOneApi as o,aiChatUpdateApi as r}from"./AiChatApi-23725cb8.js";import{C as n}from"./ChatModelDic-878347d9.js";import{aiPipelineAllApi as m}from"./api-c5b82438.js";import{CosyVoice as p,SambertVoice as u}from"./addChat-b80de5c2.js";import"./api-a63184d2.js";const c=c=>{const[h]=e.useForm(),{ChatModelList:j}=n(),[x,y]=a.useState("Model"),[C,b]=a.useState(),[I,g]=a.useState();a.useEffect((()=>{m({}).then((e=>{b(e.data)}))}),[]),a.useEffect((()=>{o({aiChatId:c.aiChatId}).then((e=>{const a={...e.data};y(e.data.type),"Model"===e.data.type?(a.model=e.data.model.model,a.systemPrompt=e.data.model.systemPrompt):"Pipeline"===e.data.type?a.aiPipelineId=String(e.data.pipeline.aiPipelineId):"Audio"===e.data.type&&(g(e.data.audio.audioType),a.audioType=String(e.data.audio.audioType),a.voice=String(e.data.audio.voice)),h.setFieldsValue(a)}))}),[]);return i.jsx("div",{children:i.jsxs(e,{initialValues:{type:"Model"},autoComplete:"off",form:h,children:[i.jsx(e.Item,{label:"标题",name:"title",rules:[{required:!1,message:"标题"}],children:i.jsx(l,{showCount:!0,maxLength:30,allowClear:!0,placeholder:"请输出标题"})}),i.jsx(e.Item,{label:"类型",name:"type",rules:[{message:"请选择类型"}],children:i.jsxs(s.Group,{disabled:!0,children:[i.jsx(s,{value:"Model",children:"大模型"}),i.jsx(s,{value:"Pipeline",children:"流水线"}),i.jsx(s,{value:"Audio",children:"语音合成"})]})}),"Model"===x&&i.jsxs(i.Fragment,{children:[i.jsx(e.Item,{label:"模型",name:"model",rules:[{message:"模型需要必选"}],children:i.jsx(t,{options:j,disabled:!0})}),i.jsx(e.Item,{label:"系统提示词",name:"systemPrompt",children:i.jsx(l.TextArea,{showCount:!0,maxLength:2e3,allowClear:!0,placeholder:"请输出系统提示词",autoSize:{minRows:3,maxRows:50}})})]}),"Pipeline"===x&&i.jsx(e.Item,{label:"流水线",name:"aiPipelineId",rules:[{required:!0,message:"流水线需要必选"}],children:i.jsx(t,{disabled:!0,options:C?.map((e=>({label:e.name,value:e.aiPipelineId})))})}),"Audio"===x&&i.jsxs(i.Fragment,{children:[i.jsx(e.Item,{label:"音频类型",name:"audioType",rules:[{required:!0,message:"音频地址需要必选"}],children:i.jsx(t,{options:[{label:"CosyVoice音色列表",value:"CosyVoice"},{label:"Sambert音色列表",value:"Sambert"}],onChange:e=>{g(e)}})}),I&&i.jsxs(e.Item,{label:"音色选择",name:"voice",rules:[{required:!0,message:"必选"}],children:["CosyVoice"===I&&i.jsx(t,{options:p}),"Sambert"===I&&i.jsx(t,{options:u})]})]}),i.jsx(e.Item,{label:null,children:i.jsx(d,{type:"primary",onClick:async()=>{if(!(await h.validateFields().catch((()=>!1))))return;const e=await(h?.getFieldsValue()),a=await r({...e,aiChatId:c.aiChatId});c.callback(a.data)},children:"确认"})})]})})};export{c as default};
