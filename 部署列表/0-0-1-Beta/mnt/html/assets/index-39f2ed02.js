import{r as e,O as a,j as t,P as o,B as s,a3 as d,D as i,M as r,c as l,m as n}from"./index-03adb9ee.js";import p from"./detail-0350e712.js";import c from"./addOrUpdate-98dedeae.js";import{databaseBoardPageApi as m,databaseBoardDeleteApi as j,copyBoardApi as u}from"./api-58214640.js";import{M as x}from"./MysqlTypeDic-d7fdb803.js";import b from"./index-7f871542.js";import{P as y}from"./PlusOutlined-b4032aa8.js";import"./index-88ad5331.js";import"./index-3585a1a3.js";import"./index-a2b78009.js";import"./EditOutlined-d7a61630.js";import"./dicApi-3ecc5ba9.js";import"./TableNode-ef2dbbd8.js";import"./KeyIcon-c2d90e8c.js";/* empty css                   */import"./TableTag-b92f49ca.js";import"./api-324d3d45.js";import"./AddOrUpdateTable-0b615a69.js";import"./AddOrUpdateTableField-cb9a4842.js";/* empty css                 */import"./fieldRow-3a55ec76.js";import"./DeleteOutlined-2f949a39.js";import"./AddOrUpdateIndex-015f6e1f.js";import"./indexRow-509acb3b.js";import"./MoreOutlined-d59df38b.js";import"./MoreOutlined-49b0b054.js";import"./MaximizeIcon-9d6df152.js";import"./MinimizeIcon-6ab50c06.js";/* empty css              */import"./DefaultTableField-65990091.js";import"./TableFieldForm-992330a5.js";import"./core.esm-ac719748.js";import"./DdlFromDatabase-f12a052e.js";import"./api-99b6c63c.js";import"./index-d3d70bab.js";import"./CompareFromDatabase-007ea80a.js";import"./BatchUpdateColor-04cf4454.js";import"./index-19b1aa5f.js";import"./TextNode-fe6bc564.js";import"./TableOutlined-67e609f9.js";import"./DownOutlined-1eda3c64.js";import"./SearchOutlined-f8f28aae.js";const h=()=>{const h=e.useRef(),[f,T]=e.useState(a.close),[B,C]=e.useState(),[O,I]=e.useState(),[g,w]=e.useState(a.close),[k,M]=e.useState(a.close),{MysqlTypeMap:S}=x(),v=e=>{C(e?.databaseBoardId),I(e?.name),w(e?a.edit:a.add)};e.useEffect((()=>{}),[]);const F=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"备注",dataIndex:"remarks",valueType:"text",copyable:!1,search:!1},{title:"createTime",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"updateTime",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:250,render:(e,o,s,i)=>[t.jsx("a",{onClick:()=>(e=>{C(e?.databaseBoardId),I(e?.name),M(e?a.edit:a.add)})(o),hidden:d("databaseBoard:list"),children:"画板"},"edit13"),t.jsx("a",{onClick:()=>v(o),hidden:d("databaseBoard:edit"),children:"编辑"},"edit2"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认复制",icon:null,onOk:async()=>{let a=await u({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:edit"),children:"复制"},"copy"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let a=await j({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:del"),children:"删除"},"del1")]}];return t.jsxs("div",{children:[t.jsx(o,{columns:F,actionRef:h,cardBordered:!0,params:{},request:async(e={},a,t)=>{let o={pageNum:e.current,pageSize:e.pageSize,pageSort:a},s=await m({...e,...o});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"databaseBoard-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"databaseBoardId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[t.jsx(s,{icon:t.jsx(y,{}),onClick:()=>{v()},type:"primary",hidden:d("databaseBoard:edit"),children:"新建"},"button")]}),t.jsx(i,{title:"配置详情",open:f!==a.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>T(a.close),footer:null,children:t.jsx("div",{children:t.jsx(p,{detailId:B})})}),t.jsx(i,{title:g===a.edit?"配置编辑":"配置新增",open:g!==a.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>w(a.close),footer:null,children:t.jsx("div",{children:t.jsx(c,{detailId:B??0,operateEnum:g,setAddOrUpdateModalFn:w,reloadTable:()=>{h.current?.reload()}})})}),t.jsx(i,{title:"编辑画板     "+O,open:k!==a.close,width:"100%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{M(a.close)},footer:null,children:t.jsx("div",{children:t.jsx(b,{databaseBoardId:B,MysqlTypeMap:S,closeBoardModalFn:()=>{M(a.close)}})})})]})};export{h as default};
