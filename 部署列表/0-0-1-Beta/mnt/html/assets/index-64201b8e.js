import{r as e,O as t,j as a,P as s,az as i,B as l,a3 as o,D as d,T as n,M as r,aA as c,m as p,aB as u}from"./index-1fe6dff8.js";import{g as m,D as x}from"./detail-598733dd.js";import h from"./addOrUpdate-cb8692d6.js";import{P as j}from"./PlusOutlined-73232e7a.js";import"./menuComponent-5cfd9966.js";import"./api-b0087b33.js";import"./dicApi-b68549fb.js";import"./api-3ffa9e64.js";import"./api-0a5cfd87.js";import"./index-262ec5ed.js";import"./index-80d88ab0.js";import"./index-adfb8488.js";import"./EditOutlined-fbc989f8.js";import"./Password-ff2218fe.js";import"./Input-f98aea5e.js";import"./MinusCircleOutlined-7f40363e.js";import"./MinusCircleOutlined-47af1d51.js";const y=()=>{let y=m();const f=e.useRef(),[C,g]=e.useState(t.close),[b,T]=e.useState(),[k,v]=e.useState(t.close),I=e=>{T(e?.id),v(e?t.edit:t.add)},w=()=>{f.current?.reload()};e.useEffect((()=>{(async()=>{})()}),[]);const O=[{title:"账号",dataIndex:"account",valueType:"text",copyable:!1},{title:"昵称",dataIndex:"nickName",valueType:"text",copyable:!1},{title:"手机号",dataIndex:"phone",valueType:"text",copyable:!1},{title:"禁用状态",dataIndex:"disabled",search:!1,render:(e,{disabled:t})=>{let s=y.find((e=>e.value===t));return a.jsx(n,{color:s?.color,children:s?.label})}},{title:"类型",dataIndex:"type",order:1,initialValue:1,request:async()=>[{label:"后台",value:1},{label:"前台",value:0}],render:(e,{type:t})=>0===t?a.jsx(n,{color:"green",children:"前台"}):a.jsx(n,{color:"red",children:"后台"})},{title:"角色",dataIndex:"roleNames",valueType:"text",search:!1},{title:"部门",dataIndex:"deptNames",valueType:"text",search:!1},{title:"个人简介",dataIndex:"remarks",ellipsis:!0,search:!1},{title:"创建人",dataIndex:"createBy",ellipsis:!0,search:!1,render:(e,t)=>t.createByAccount.account},{title:"创建时间",key:"showTime",dataIndex:"createTime",valueType:"dateTime",sorter:!0,search:!1},{title:"操作",valueType:"option",key:"option",width:180,render:(e,s,i,l)=>[a.jsx("a",{onClick:()=>(e=>{T(e.id),g(t.detail)})(s),children:"详情"},"detail"),a.jsx("a",{onClick:()=>I(s),hidden:o("account:edit"),children:"编辑"},"edit"),a.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否删除该条数据",content:e.account,icon:null,onOk:async()=>{const t=await c({id:e?.id});1e3===t?.code&&(p.success(t?.msg),w())}})})(s),hidden:o("account:del"),children:"删除"},"del"),a.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认重置此用户密码",content:e.account,icon:null,onOk:async()=>{const t=await u({id:e?.id});1e3===t?.code&&(p.success(t?.msg),r?.success({title:"重置密码成功 密码如下 请保存",content:t?.data,icon:null}),w())}})})(s),style:{color:"red"},hidden:o("account:restPwd"),children:"重置密码"},"resetPsw")]}];return a.jsxs("div",{children:[a.jsx(s,{columns:O,actionRef:f,cardBordered:!0,params:{},request:async(e={},t,a)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},l=await i({...e,...s});return{data:l.data.list,success:1e3===l.code,total:l.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange(e){}},rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"管理员列表",toolBarRender:()=>[a.jsx(l,{icon:a.jsx(j,{}),onClick:()=>{I()},type:"primary",hidden:o("account:edit"),children:"新建"},"button")]},"id"),a.jsx(d,{title:"管理员详情",open:C!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>g(t.close),footer:null,children:a.jsx("div",{children:a.jsx(x,{detailId:b})})}),a.jsx(d,{title:k==t.edit?"管理员编辑":"管理员新增",open:k!==t.close,width:"70%",destroyOnClose:!0,maskClosable:!1,onClose:()=>v(t.close),footer:null,children:a.jsx("div",{children:a.jsx(h,{detailId:b??0,operateEnum:k,setAddOrUpdateModalFn:v,reloadTable:w})})})]})};export{y as default};
