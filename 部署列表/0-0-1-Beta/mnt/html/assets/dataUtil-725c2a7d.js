import{f as t}from"./index-52537ad8.js";function e(t,e,i,l){return t.x=e,t.y=i,i>l?{x:e,y:i,globalY:i}:{x:e,y:i,globalY:l}}function i(t,l,o,s){t.x=l,t.y=o;let a=s;if(t.sonStageList&&t.sonStageList.length>0){let e={x:l,y:o,globalY:s};t.sonStageList.forEach(((t,a)=>{e=0===a?i(t,l+200,o,s):i(t,e.x,e.globalY+60,e.globalY)})),s<e.globalY&&(a=e.globalY)}else a<o&&(a=o);if(t.stepList&&t.stepList.length>0){let i={x:l,y:o,globalY:a};return t.stepList.forEach(((t,s)=>{i=0===s?e(t,l+30,o+60,a):e(t,i.x,i.y+60,i.globalY)})),i.globalY>a&&(a=i.globalY),{x:l,y:i.y,globalY:a}}return o>a&&(a=o),{x:l,y:o,globalY:a}}function l(t){return"step-"+t}function o(t){return"stage-"+t}function s(e,i,a,n){let d=(r=e.id,g=e.name,y=e.x,h=e.y,{id:o(r),position:{x:y,y:h},style:{width:100,height:40,fill:"#5bdeea",stroke:"#5ba6ea",lineWidth:0,radius:3},data:{label:g},type:"stageNode"});var r,g,y,h;if(a.push(d),e.x===i.x){const l={id:t(),source:i.id,target:o(e.id)};n.push(l)}else{const l={id:t(),source:i.id,target:o(e.id)};n.push(l)}if(e.stepList&&e.stepList.length>0&&e.stepList.forEach((i=>{let s=function(t,e,i,o){return{id:l(t),position:{x:i,y:o},style:{width:100,height:40,fill:"#bd68dc",stroke:"#c22323",lineWidth:0,radius:20},data:{label:e},type:"stepNode"}}(i.id,i.name,i.x,i.y);a.push(s);const d={id:t(),source:o(e.id),sourceHandle:"b",target:l(i.id)};n.push(d)})),e.sonStageList&&e.sonStageList.length>0){let t={id:o(e.id),x:e.x,y:e.y};e.sonStageList.forEach((e=>{s(e,t,a,n)}))}}function a(t){let e={x:300,y:100,globalY:100};t.forEach(((t,l)=>{e=i(t,e.x,0===l?e.y:e.globalY+60,e.globalY)}));let l={id:"start",position:{x:100,y:100},style:{width:100,height:40,fill:"#6ae7b1",stroke:"#6ae7b1",lineWidth:0,radius:3},data:{label:"Start"},type:"startNode"},o=[l],a=[],n={id:l.id,x:l.position.x,y:l.position.y};return t.forEach((t=>{s(t,n,o,a)})),{nodes:o,edges:a,y:e.globalY+40}}export{a as buildData};
