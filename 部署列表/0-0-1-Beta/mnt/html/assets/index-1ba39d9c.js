import{r as e,O as t,j as o,P as s,B as i,a3 as r,D as d,T as l,M as a,c as p,m as n}from"./index-52537ad8.js";import m from"./detail-5c7b0cb7.js";import c from"./addOrUpdate-ca78defd.js";import{processPageApi as j,processDeleteApi as u}from"./processApi-46ba1e32.js";import x from"./ProcessEdit-aeb64e0c.js";import{P as h}from"./PlusOutlined-0403edcb.js";import"./index-a5ca1b9c.js";import"./index-8d66853c.js";import"./index-ec1d06fe.js";import"./EditOutlined-4076ffe0.js";import"./index-385cacc2.js";import"./Title-0f7b284b.js";import"./Input-33d09d13.js";import"./TextArea-0027e4e6.js";import"./Password-207dd782.js";import"./QRCodeSVG-eefef35a.js";import"./TaobaoOutlined-8cd58809.js";import"./FileZipFilled-239e2818.js";import"./BranchesOutlined-c52fb168.js";import"./RightSquareTwoTone-e5897024.js";import"./FileUnknownTwoTone-791de7ab.js";import"./MinusCircleOutlined-47af1d51.js";import"./MoreOutlined-49b0b054.js";import"./PlusCircleOutlined-a72eecfb.js";import"./PlusSquareTwoTone-f51424a0.js";import"./RetweetOutlined-9d2a328f.js";import"./SendOutlined-86da6479.js";import"./TableOutlined-67e609f9.js";import"./index-f591dfb2.js";/* empty css              */import"./CustomEdge-15f951b2.js";import"./CustomDelEdge-2ea4c70c.js";import"./CustomOptionsEdge-f5cbcc95.js";import"./uilts-69ee15ee.js";import"./pointApi-8e2f7664.js";import"./ConditionNode-3f0bffac.js";/* empty css                          */import"./ConditionNodeEdit-29c006fd.js";import"./Bo-cc27e439.js";import"./EditTwoTone-faaa53cc.js";import"./RightCircleTwoTone-746a25ce.js";import"./StartNode-42f90115.js";import"./StartNodeEdit-429deb05.js";import"./api-900906c9.js";import"./formComponent-546559ea.js";import"./index-f6caee0f.js";import"./textSubmit-f698ce92.js";import"./textAreaSubmit-9cc0fcd3.js";import"./SelectSubmit-a0546f42.js";import"./MutSelectSubmit-978c5f1c.js";import"./FileSubmit-f1303890.js";import"./DateSubmit-7515399a.js";import"./NumberSubmit-d54ed6cf.js";import"./customerFieldNew-1985dcb7.js";import"./customerText-7f38fb85.js";import"./customerTextArea-84d38379.js";import"./customerSelect-aabfe871.js";import"./MinusCircleOutlined-37395b9b.js";import"./customerMutSelect-c1e3cf9e.js";import"./CustomerFile-7877d17f.js";import"./CustomerDate-9ed3e0ba.js";import"./customerNumber-33ced8f3.js";import"./DeleteOutlined-104cbf00.js";import"./EndNode-8151b702.js";import"./EndNodeEdit-5d497185.js";import"./api-29516818.js";import"./OtherConditionNode-ddff5c02.js";import"./ApprovalNode-d11a9a24.js";import"./ApprovalNodeEdit-4600a59f.js";import"./CcNode-cb293401.js";import"./CcNodeEdit-6c6fc2b9.js";import"./HandleNode-0dc7b55c.js";import"./HandleNodeEdit-029c125e.js";const C=()=>{const C=e.useRef(),[S,y]=e.useState(t.close),[T,b]=e.useState(),[f,O]=e.useState(),[g,I]=e.useState(t.close),[w,v]=e.useState(t.close),E=e=>{b(e?.processId),I(e?t.edit:t.add)},N=()=>{C.current?.reload()};e.useEffect((()=>{}),[]);const k=[{title:"流程ID",dataIndex:"processId",valueType:"text",copyable:!1,search:!1},{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"状态",dataIndex:"disabled",valueType:"text",copyable:!1,search:!1,render:(e,{disabled:t})=>0===t?o.jsx(l,{color:"green",children:"启用"}):o.jsx(l,{color:"red",children:"禁用"})},{title:"更新时间",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"更新人",dataIndex:"updateBy",valueType:"text",copyable:!1,search:!1,render:(e,{updateByAccount:t})=>t.account},{title:"操作",valueType:"option",key:"option",width:180,render:(e,s,i,d)=>[o.jsx("a",{onClick:()=>(e=>{b(e.processId),y(t.detail)})(s),children:"详情"},"detail"),o.jsx("a",{onClick:()=>E(s),hidden:r("approvalSet:edit"),children:"编辑"},"edit"),o.jsx("a",{onClick:()=>(e=>{b(e?.processId),O(e),v(t.edit)})(s),hidden:r("approvalSet:edit"),children:"配置流程"},"config"),o.jsx("a",{onClick:()=>(async e=>{a?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let t=await u({processId:e.processId});p(t)||(n.success(t.msg),C.current?.reload())}})})(s),hidden:r("approvalSet:del"),children:"删除"},"del")]}];return o.jsxs("div",{children:[o.jsx(s,{columns:k,actionRef:C,cardBordered:!0,params:{},request:async(e={},t,o)=>{let s={pageNum:e.current,pageSize:e.pageSize,pageSort:t},i=await j({...e,...s});return{data:i.data.list,success:1e3===i.code,total:i.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"process-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"processId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[o.jsx(i,{icon:o.jsx(h,{}),onClick:()=>{E()},type:"primary",hidden:r("approvalSet:edit"),children:"新建"},"button")]}),o.jsx(d,{title:"配置详情",open:S!==t.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>y(t.close),footer:null,children:o.jsx("div",{children:o.jsx(m,{detailId:T})})}),o.jsx(d,{title:g==t.edit?"配置编辑":"配置新增",open:g!==t.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>I(t.close),footer:null,children:o.jsx("div",{children:o.jsx(c,{detailId:T??0,operateEnum:g,setAddOrUpdateModalFn:I,reloadTable:N})})}),o.jsx(d,{title:"配置流程",open:w!==t.close,width:"98%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{v(t.close),N()},footer:null,children:o.jsx("div",{children:o.jsx(x,{processId:T,processVersionId:f?.processVersionId,close:()=>{v(t.close),N()}})})})]})};export{C as default};
