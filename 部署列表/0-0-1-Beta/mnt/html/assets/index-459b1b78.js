import{r as e,O as a,j as t,P as o,B as s,a3 as d,D as i,M as r,c as l,m as n}from"./index-1fe6dff8.js";import p from"./detail-eef6393f.js";import c from"./addOrUpdate-3a44d6b2.js";import{databaseBoardPageApi as m,databaseBoardDeleteApi as j,copyBoardApi as u}from"./api-2b028893.js";import{M as x}from"./MysqlTypeDic-39b9eb62.js";import b from"./index-62ca283b.js";import{P as y}from"./PlusOutlined-73232e7a.js";import"./index-262ec5ed.js";import"./index-80d88ab0.js";import"./index-adfb8488.js";import"./EditOutlined-fbc989f8.js";import"./dicApi-b68549fb.js";import"./TableNode-8c864170.js";import"./KeyIcon-a12c9f5c.js";import"./TextNode-998c3614.js";import"./index-9cc62199.js";import"./api-a8f9de29.js";import"./TableTag-7e37ffe7.js";import"./AddOrUpdateTable-02677ae3.js";import"./AddOrUpdateTableField-a03118bd.js";/* empty css                 */import"./fieldRow-b435f3e8.js";import"./DeleteOutlined-916130f1.js";import"./AddOrUpdateIndex-aa738c2f.js";import"./indexRow-4aa8f6aa.js";import"./MoreOutlined-bbcb7d9f.js";import"./MoreOutlined-49b0b054.js";import"./MaximizeIcon-1ab48980.js";import"./MinimizeIcon-38c77ae9.js";/* empty css              */import"./DefaultTableField-f84c4b6c.js";import"./TableFieldForm-22d821be.js";import"./core.esm-76f81c27.js";import"./DdlFromDatabase-f29a7f91.js";import"./api-e043b6bb.js";import"./index-3f169d58.js";import"./CompareFromDatabase-158621e7.js";import"./BatchUpdateColor-a280a046.js";import"./TableOutlined-67e609f9.js";import"./DownOutlined-621547fd.js";import"./SearchOutlined-fb74abfc.js";const h=()=>{const h=e.useRef(),[f,T]=e.useState(a.close),[B,C]=e.useState(),[O,I]=e.useState(),[g,k]=e.useState(a.close),[w,M]=e.useState(a.close),{MysqlTypeMap:S}=x(),v=e=>{C(e?.databaseBoardId),I(e?.name),k(e?a.edit:a.add)};e.useEffect((()=>{}),[]);const F=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"备注",dataIndex:"remarks",valueType:"text",copyable:!1,search:!1},{title:"createTime",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"updateTime",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:250,render:(e,o,s,i)=>[t.jsx("a",{onClick:()=>(e=>{C(e?.databaseBoardId),I(e?.name),M(e?a.edit:a.add)})(o),hidden:d("databaseBoard:list"),children:"画板"},"edit13"),t.jsx("a",{onClick:()=>v(o),hidden:d("databaseBoard:edit"),children:"编辑"},"edit2"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认复制",icon:null,onOk:async()=>{let a=await u({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:edit"),children:"复制"},"copy"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let a=await j({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:del"),children:"删除"},"del1")]}];return t.jsxs("div",{children:[t.jsx(o,{columns:F,actionRef:h,cardBordered:!0,params:{},request:async(e={},a,t)=>{let o={pageNum:e.current,pageSize:e.pageSize,pageSort:a},s=await m({...e,...o});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"databaseBoard-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"databaseBoardId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[t.jsx(s,{icon:t.jsx(y,{}),onClick:()=>{v()},type:"primary",hidden:d("databaseBoard:edit"),children:"新建"},"button")]}),t.jsx(i,{title:"配置详情",open:f!==a.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>T(a.close),footer:null,children:t.jsx("div",{children:t.jsx(p,{detailId:B})})}),t.jsx(i,{title:g===a.edit?"配置编辑":"配置新增",open:g!==a.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>k(a.close),footer:null,children:t.jsx("div",{children:t.jsx(c,{detailId:B??0,operateEnum:g,setAddOrUpdateModalFn:k,reloadTable:()=>{h.current?.reload()}})})}),t.jsx(i,{title:"编辑画板     "+O,open:w!==a.close,width:"100%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{M(a.close)},footer:null,children:t.jsx("div",{children:t.jsx(b,{databaseBoardId:B,MysqlTypeMap:S,closeBoardModalFn:()=>{M(a.close)}})})})]})};export{h as default};
