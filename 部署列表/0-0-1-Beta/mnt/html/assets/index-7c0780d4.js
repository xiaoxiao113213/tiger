import{F as e,r as s,j as a,B as t,e as n,I as i,b as d}from"./index-52537ad8.js";import{r,S as o,v as l,u as m,a as c}from"./modifiers.esm-fa1886ad.js";import{u,a as x,D as g,C as y,P as h}from"./core.esm-26df07bf.js";import{P as j}from"./PlusOutlined-0403edcb.js";const k=[];for(let w=0;w<10;w++)k.push({key:w.toString(),name:`Edward ${w}`,age:32,address:`London Park no. ${w}`});const p=e=>{const{attributes:s,listeners:t,setNodeRef:n,transform:i,transition:d,isDragging:r}=m({id:e["data-row-key"]}),o={...e.style,transform:y.Translate.toString(i),transition:d,cursor:"move",...r?{position:"relative",zIndex:9999}:{}};return a.jsx("tr",{...e,ref:n,style:o,...s,...t})},f=()=>{const[m]=e.useForm(),[y,f]=s.useState(k),[w,I]=s.useState([]),b=[{title:"标题",dataIndex:"name",width:"25%",editable:!0},{title:"age",dataIndex:"age",width:"15%",editable:!0},{title:"address",dataIndex:"address",width:"40%",editable:!0},{title:"address1",dataIndex:"address1",width:"40%",editable:!0}].map((e=>e.editable?{...e,onCell:s=>({record:s,inputType:"age"===e.dataIndex?"number":"text",dataIndex:e.dataIndex,title:e.title,editing:!0})}:e)),$=u(x(h,{activationConstraint:{distance:1}})),C={selectedRowKeys:w,onChange:e=>{I(e)}};return a.jsxs("div",{style:{height:"100%"},children:[a.jsx(t,{onClick:async()=>{const e=await m.getFieldsValue(),s=JSON.parse(JSON.stringify(y));e&&Object.keys(e).forEach((a=>{const[t,n]=a.split("-");s.find((e=>e.key===n))[t]=e[a]}))},children:"保存"}),a.jsxs(e,{form:m,component:!1,children:[a.jsx(g,{sensors:$,modifiers:[r],onDragEnd:({active:e,over:s})=>{e.id!==s?.id&&f((a=>{const t=a.findIndex((s=>s.key===e.id)),n=a.findIndex((e=>e.key===s?.id));return c(a,t,n)}))},children:a.jsx(o,{items:y.map((e=>e.key)),strategy:l,children:a.jsx(n,{rowSelection:C,components:{body:{cell:({editing:s,dataIndex:t,title:n,inputType:r,record:o,index:l,children:m,...c})=>a.jsx("td",{...c,children:s?"name"===t&&a.jsx(e.Item,{name:`name-${o.key}`,style:{margin:0},initialValue:o.name,rules:[{required:!0,message:`请输入${n}!`}],children:a.jsx(i,{},`name-${o.key}`)})||"age"===t&&a.jsx(e.Item,{name:`age-${o.key}`,style:{margin:0},initialValue:o.age,rules:[{required:!0,message:`请输入${n}!`}],children:a.jsx(d,{},`age-${o.key}`)})||"address"===t&&a.jsx(e.Item,{name:`address-${o.key}`,style:{margin:0},initialValue:o.address,rules:[{required:!0,message:`请输入${n}!`}],children:a.jsx(i,{},`address-${o.key}`)}):m}),row:p}},bordered:!0,rowHoverable:!1,onRow:e=>({onClick:e=>{},onDoubleClick:e=>{},onContextMenu:e=>{},onMouseEnter:e=>{},onMouseLeave:e=>{}}),dataSource:y,columns:b,rowClassName:"editable-row",pagination:!1})})}),a.jsxs(t,{style:{width:"100%"},type:"dashed",onClick:()=>f([...y,{key:(y.length+1).toString(),name:"Edward",age:32,address:"London Park no. 1"}]),children:[a.jsx(j,{}),"添加字段"]})]})]})};export{f as default};
