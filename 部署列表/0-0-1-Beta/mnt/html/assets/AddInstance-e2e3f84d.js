import{F as s,ad as e,r as t,j as i,ab as r,B as o,c as a,m as l}from"./index-1fe6dff8.js";import{getCanSubmitProcessApi as c}from"./processApi-33853f9b.js";import{serverToClientValue as d,clientToServerValue as m}from"./Bo-9e2098a1.js";import n from"./submitNowform-3c073972.js";import{processInstanceSaveApi as p}from"./processInstanceApi-4791703b.js";import{D as j}from"./index-adfb8488.js";import"./textSubmit-0f3171ae.js";import"./textAreaSubmit-d1dfc909.js";import"./SelectSubmit-9d579393.js";import"./MutSelectSubmit-5dc3359d.js";import"./DateSubmit-c557ba41.js";import"./NumberSubmit-de5567a9.js";import"./FileUploadSubmit-add66fc2.js";import"./PlusOutlined-73232e7a.js";const f=f=>{const[u]=s.useForm(),x=e(),[h,b]=t.useState({fieldList:[]});t.useEffect((()=>{(async()=>{c({processId:f.processId}).then((s=>{s.data.fieldList.forEach((s=>{d(s)})),b(s.data)}))})()}),[]);const y=[{key:"1",label:"申请人",children:x.nickName}];return i.jsxs("div",{children:[i.jsx(j,{title:"申请流程",items:y}),i.jsx(r,{children:"表单"}),i.jsx(s,{form:u,labelCol:{span:3},children:h.fieldList.map(((s,e)=>i.jsx("div",{style:{display:"flex"},children:i.jsx("span",{style:{flex:20},children:i.jsx(n,{initFieldBo:s})})},e)))}),i.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[i.jsx(o,{type:"primary",onClick:async()=>{if(!(await u.validateFields().catch((()=>!1))))return;const s=await u.getFieldsValue();h.fieldList.forEach((e=>{m(e,s)}));const e=await p({processId:f.processId,processVersionId:h.processVersionId,values:s});a(e)||(l.success("提交成功"),f.closeModal())},children:"提交"}),i.jsx(o,{style:{marginLeft:"20px"},onClick:f.closeModal,children:"取消"})]})]})};export{f as default};
