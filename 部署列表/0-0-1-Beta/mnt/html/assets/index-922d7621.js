import{r as e,O as a,j as t,P as o,B as s,a3 as d,D as i,M as r,c as l,m as n}from"./index-52537ad8.js";import p from"./detail-76aaa4ed.js";import c from"./addOrUpdate-57515544.js";import{databaseBoardPageApi as m,databaseBoardDeleteApi as j,copyBoardApi as u}from"./api-ed538d3d.js";import{M as x}from"./MysqlTypeDic-ba97f24c.js";import b from"./index-76ac091d.js";import{P as y}from"./PlusOutlined-0403edcb.js";import"./index-a5ca1b9c.js";import"./index-8d66853c.js";import"./index-ec1d06fe.js";import"./EditOutlined-4076ffe0.js";import"./dicApi-f974ede5.js";import"./TableNode-7c75ae18.js";import"./KeyIcon-b74b704d.js";/* empty css                   */import"./TableTag-132f4293.js";import"./api-ba92b399.js";import"./AddOrUpdateTable-77121ca2.js";import"./AddOrUpdateTableField-326ed00e.js";/* empty css                 */import"./fieldRow-aa8b1712.js";import"./DeleteOutlined-104cbf00.js";import"./AddOrUpdateIndex-314eb81a.js";import"./indexRow-777e0e53.js";import"./MoreOutlined-d09fbb75.js";import"./MoreOutlined-49b0b054.js";import"./MaximizeIcon-48f64215.js";import"./MinimizeIcon-7105d01e.js";/* empty css              */import"./DefaultTableField-39383017.js";import"./TableFieldForm-d2f50771.js";import"./core.esm-26df07bf.js";import"./DdlFromDatabase-b3fd60a4.js";import"./api-6cddda11.js";import"./index-404682e4.js";import"./CompareFromDatabase-1b1509aa.js";import"./BatchUpdateColor-650bc1c3.js";import"./index-f591dfb2.js";import"./TextNode-e48e1503.js";import"./TableOutlined-67e609f9.js";import"./DownOutlined-dd927353.js";import"./SearchOutlined-234b70d9.js";const h=()=>{const h=e.useRef(),[f,T]=e.useState(a.close),[B,C]=e.useState(),[O,I]=e.useState(),[g,w]=e.useState(a.close),[k,M]=e.useState(a.close),{MysqlTypeMap:S}=x(),v=e=>{C(e?.databaseBoardId),I(e?.name),w(e?a.edit:a.add)};e.useEffect((()=>{}),[]);const F=[{title:"名称",dataIndex:"name",valueType:"text",copyable:!1,search:!1},{title:"备注",dataIndex:"remarks",valueType:"text",copyable:!1,search:!1},{title:"createTime",dataIndex:"createTime",valueType:"text",copyable:!1,search:!1},{title:"updateTime",dataIndex:"updateTime",valueType:"text",copyable:!1,search:!1},{title:"操作",valueType:"option",key:"option",width:250,render:(e,o,s,i)=>[t.jsx("a",{onClick:()=>(e=>{C(e?.databaseBoardId),I(e?.name),M(e?a.edit:a.add)})(o),hidden:d("databaseBoard:list"),children:"画板"},"edit13"),t.jsx("a",{onClick:()=>v(o),hidden:d("databaseBoard:edit"),children:"编辑"},"edit2"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认复制",icon:null,onOk:async()=>{let a=await u({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:edit"),children:"复制"},"copy"),t.jsx("a",{onClick:()=>(async e=>{r?.confirm({title:"是否确认删除",icon:null,onOk:async()=>{let a=await j({databaseBoardId:e.databaseBoardId});l(a)||(n.success(a.msg),h.current?.reload())}})})(o),hidden:d("databaseBoard:del"),children:"删除"},"del1")]}];return t.jsxs("div",{children:[t.jsx(o,{columns:F,actionRef:h,cardBordered:!0,params:{},request:async(e={},a,t)=>{let o={pageNum:e.current,pageSize:e.pageSize,pageSort:a},s=await m({...e,...o});return{data:s.data.list,success:1e3===s.code,total:s.data.total}},editable:{type:"multiple"},columnsState:{persistenceKey:"databaseBoard-pro-table",persistenceType:"localStorage",onChange(e){}},rowKey:"databaseBoardId",search:{labelWidth:"auto",defaultCollapsed:!1},options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{defaultPageSize:10,showSizeChanger:!0},dateFormatter:"string",headerTitle:"配置列表",toolBarRender:()=>[t.jsx(s,{icon:t.jsx(y,{}),onClick:()=>{v()},type:"primary",hidden:d("databaseBoard:edit"),children:"新建"},"button")]}),t.jsx(i,{title:"配置详情",open:f!==a.close,width:"75%",destroyOnClose:!0,maskClosable:!1,onClose:()=>T(a.close),footer:null,children:t.jsx("div",{children:t.jsx(p,{detailId:B})})}),t.jsx(i,{title:g===a.edit?"配置编辑":"配置新增",open:g!==a.close,width:"50%",destroyOnClose:!0,maskClosable:!1,onClose:()=>w(a.close),footer:null,children:t.jsx("div",{children:t.jsx(c,{detailId:B??0,operateEnum:g,setAddOrUpdateModalFn:w,reloadTable:()=>{h.current?.reload()}})})}),t.jsx(i,{title:"编辑画板     "+O,open:k!==a.close,width:"100%",destroyOnClose:!0,maskClosable:!1,onClose:()=>{M(a.close)},footer:null,children:t.jsx("div",{children:t.jsx(b,{databaseBoardId:B,MysqlTypeMap:S,closeBoardModalFn:()=>{M(a.close)}})})})]})};export{h as default};
