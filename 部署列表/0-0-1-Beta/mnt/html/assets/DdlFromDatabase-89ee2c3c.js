import{F as a,r as e,i as s,j as t,X as l,S as i,B as r,Y as o,m as d}from"./index-f2321b57.js";import{databaseConfigAllApi as n}from"./api-6611f720.js";import{getDatabaseNameList as p,syncDatabaseBoard as c}from"./api-902e4084.js";import{A as m}from"./index-b1840bba.js";const h=h=>{const[f]=a.useForm(),[u,x]=e.useState([]),[j,g]=e.useState([]),[b,w]=s.useState(!1);return e.useEffect((()=>((async()=>{let a=(await n({})).data.map((a=>({label:a.name,value:a.databaseConfigId})));x(a)})(),()=>{})),[]),t.jsx("div",{children:t.jsxs(l,{tip:"Loading",spinning:b,size:"small",children:[t.jsx(m,{message:"从数据库同步 会直接覆盖本地的内容！！",type:"warning",showIcon:!0,style:{marginBottom:20}}),t.jsxs(a,{form:f,labelCol:{flex:"10%"},wrapperCol:{flex:"90%"},children:[t.jsx(a.Item,{label:"数据库",name:"databaseConfigId",rules:[{required:!0}],children:t.jsx(i,{placeholder:"请选择",options:u,onChange:async a=>{let e=(await p({databaseConfigId:a})).data.map((a=>({label:a,value:a})));g(e)},showSearch:!0,optionFilterProp:"label"})}),t.jsx(a.Item,{label:"库名称",name:"databaseName",rules:[{required:!0}],children:t.jsx(i,{placeholder:"请选择",options:j,showSearch:!0,optionFilterProp:"label"})}),t.jsxs(a.Item,{wrapperCol:{offset:8,span:16},style:{textAlign:"right"},children:[t.jsx(r,{type:"default",onClick:()=>{h.setAddOrUpdateModalFn()},style:{marginRight:20},children:"取消"}),t.jsx(r,{type:"primary",onClick:async()=>{if(!(await f.validateFields().catch((()=>!1))))return;const a=await(f?.getFieldsValue());o(a),w(!0);let e=await c({...a,databaseBoardId:h.databaseBoardId});w(!1),1e3===e.code&&(d.success(e.msg),h.setAddOrUpdateModalFn())},children:"确定"})]})]})]})})};export{h as default};
