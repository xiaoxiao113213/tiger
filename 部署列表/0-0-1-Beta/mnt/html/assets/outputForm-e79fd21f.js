import{F as e,r as t,j as a,e as r,I as s,b as n,S as i}from"./index-03adb9ee.js";import{C as d,V as l}from"./ApiBo-93eb9889.js";import{aiPipelinePointVarUpdateApi as o}from"./varApi-5886e459.js";const m=m=>{const{point:p,inputVarList:x,getDetail:u}=m,[c]=e.useForm(),[y,j]=t.useState();t.useEffect((()=>{p&&j(p.varList.filter((e=>e.category==d.Output)).map(((e,t)=>({key:e.aiPipelinePointVarId.toString(),name:e.name,type:e.type,remarks:e.remarks}))))}),[p]),t.useEffect((()=>{const e={};for(let t in y)e[y[t].key+"_name"]=y[t].name,e[y[t].key+"_type"]=y[t].type,e[y[t].key+"_remarks"]=y[t].remarks;c.setFieldsValue(e)}),[y]);const h=[{title:"变量名",dataIndex:"name",width:"180px",editable:!1},{title:"变量类型",dataIndex:"type",width:"130px",editable:!1},{title:"描述",dataIndex:"remarks",editable:!1}].map((e=>{if(!e.editable)return e;let t="text";"type"===e.dataIndex&&(t="select"),"remarks"===e.dataIndex&&(t="textArea");return{...e,onCell:a=>({record:a,inputType:t,dataIndex:e.dataIndex,title:e.title,editing:!0})}}));return a.jsxs("div",{children:[a.jsx("div",{style:{display:"flex",marginBottom:"5px"},children:a.jsx("div",{children:"输出参数设置："})}),a.jsx(e,{form:c,component:!1,onValuesChange:(e,t)=>{for(let a in e){const t=a.split("_"),r=t[0],s=t[1],n=e[a],i={aiPipelinePointVarId:parseInt(r),[s]:n,keyName:s};o(i)}},children:a.jsx(r,{components:{body:{cell:({editing:t,dataIndex:r,title:d,inputType:o,record:m,index:p,children:x,...u})=>{if("变量名"==d)return a.jsx("td",{...u,children:t?a.jsx(e.Item,{name:`${m.key}_${r}`,style:{margin:0},rules:[{required:!0,message:`请输入 ${d}！只能输入英文字符和数字，且以英文字符开头。`},{pattern:/^[a-zA-Z][a-zA-Z0-9]*$/,message:"只能输入英文字符和数字，且以英文字符开头。"}],children:a.jsx(s,{maxLength:20,showCount:!0})}):x});let c="number"===o?a.jsx(n,{}):a.jsx(s,{maxLength:20,showCount:!0});return"select"===o&&(c=a.jsx(i,{options:l})),"textArea"===o&&(c=a.jsx(s.TextArea,{})),a.jsx("td",{...u,children:t?a.jsx(e.Item,{name:m.key+"_"+r,style:{margin:0},rules:[{required:!1,message:`Please Input ${d}!`}],children:c}):x})}}},bordered:!0,dataSource:y,columns:h,rowClassName:"editable-row",pagination:!1})})]})};export{m as default};
